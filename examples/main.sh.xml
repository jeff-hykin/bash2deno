<program>
    <comment text="#!/bin/bash" />
    <whitespace text="\n\n" />
    <comment text="# ========== VARIABLE ASSIGNMENT ==========" />
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="name" />
        <"=" text="=" />
        <string>
            <"\"" text="\"" />
            <string_content text="Alice" />
            <"\"" text="\"" />
        </string>
    </variable_assignment>
    <whitespace text="\n" />
    <declaration_command>
        <export text="export" />
        <whitespace text=" " />
        <variable_assignment>
            <variable_name text="name" />
            <"=" text="=" />
            <string>
                <"\"" text="\"" />
                <string_content text="Alice" />
                <"\"" text="\"" />
            </string>
        </variable_assignment>
    </declaration_command>
    <whitespace text="\n" />
    <declaration_command>
        <readonly text="readonly" />
        <whitespace text=" " />
        <variable_assignment>
            <variable_name text="app_version" />
            <"=" text="=" />
            <string>
                <"\"" text="\"" />
                <string_content text="1.2.3" />
                <"\"" text="\"" />
            </string>
        </variable_assignment>
    </declaration_command>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="number" />
        <"=" text="=" />
        <number text="42" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="greeting" />
        <"=" text="=" />
        <string>
            <"\"" text="\"" />
            <string_content text="Hello, " />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="name" />
            </simple_expansion>
            <string_content text="!" />
            <"\"" text="\"" />
        </string>
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="file_count" />
        <"=" text="=" />
        <command_substitution>
            <"$(" text="$(" />
            <pipeline>
                <command>
                    <command_name>
                        <word text="ls" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="wc" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-l" />
                </command>
            </pipeline>
            <")" text=")" />
        </command_substitution>
    </variable_assignment>
    <whitespace text="\n" />
    <unset_command>
        <unset text="unset" />
        <whitespace text=" " />
        <variable_name text="number" />
    </unset_command>
    <whitespace text="\n\n" />
    <comment text="# ========== SET OPTIONS ==========" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="set" />
        </command_name>
        <whitespace text=" " />
        <word text="-euo" />
        <whitespace text=" " />
        <word text="pipefail" />
    </command>
    <whitespace text="  " />
    <comment text="# Exit on error, undefined var is error, and pipe fails propagate" />
    <whitespace text="\n\n" />
    <comment text="# ========== FUNCTION DEFINITION ==========" />
    <whitespace text="\n" />
    <function_definition>
        <word text="say_hello" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n  " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="who" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="1" />
                            <":-" text=":-" />
                            <word text="World" />
                            <"}" text="}" />
                        </expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
            </declaration_command>
            <whitespace text="  " />
            <comment text="# Default parameter" />
            <whitespace text="\n  " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Hello\\\", " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="who" />
                    </simple_expansion>
                    <string_content text="!" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# ========== ALIASES ==========" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="alias" />
        </command_name>
        <whitespace text=" " />
        <concatenation>
            <word text="ll=" />
            <raw_string text="'ls -lah'" />
        </concatenation>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="alias" />
        </command_name>
        <whitespace text=" " />
        <concatenation>
            <word text="greet=" />
            <raw_string text="'say_hello'" />
        </concatenation>
    </command>
    <whitespace text="\n\n" />
    <comment text="# ========== CONTROL FLOW ==========" />
    <whitespace text="\n\n" />
    <comment text="# IF-ELSE" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="name" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"==" text="==" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Alice" />
                    <"\"" text="\"" />
                </string>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n  " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Hi Alice!" />
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n" />
        <elif_clause>
            <elif text="elif" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="name" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <"==" text="==" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Bob" />
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n  " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Hi Bob!" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
        </elif_clause>
        <else_clause>
            <else text="else" />
            <whitespace text="\n  " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Who are you?" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Are you sure?" />
            <"\"" text="\"" />
        </string>
    </command>
    <";" text=";" />
    <command>
        <command_name>
            <word text="read" />
        </command_name>
        <whitespace text=" " />
        <word text="ANSWER" />
    </command>
    <";" text=";" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
    </command>
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[" text="[" />
            <whitespace text=" " />
            <binary_expression>
                <unary_expression>
                    <"!" text="!" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="ANSWER" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
                <whitespace text=" " />
                <"=~" text="=~" />
                <whitespace text=" " />
                <regex text="^[Yy]" />
            </binary_expression>
            <whitespace text=" " />
            <"]" text="]" />
        </test_command>
        <whitespace text="\n" />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="question" />
        <"=" text="=" />
        <string>
            <"\"" text="\"" />
            <string_content text="question? [y/n]" />
            <"\"" text="\"" />
        </string>
    </variable_assignment>
    <";" text=";" />
    <variable_assignment>
        <variable_name text="answer" />
        <"=" text="=" />
        <raw_string text="''" />
    </variable_assignment>
    <whitespace text="\n" />
    <while_statement>
        <while text="while" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="true" />
            </command_name>
        </command>
        <";" text=";" />
        <whitespace text=" " />
        <do_group>
            <do text="do" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="break" />
                </command_name>
            </command>
            <";" text=";" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="continue" />
                </command_name>
            </command>
            <";" text=";" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="question" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <";" text=";" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="read" />
                </command_name>
                <whitespace text=" " />
                <word text="response" />
            </command>
            <whitespace text="\n    " />
            <case_statement>
                <case text="case" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="response" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <in text="in" />
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="[Yy]*" />
                    <whitespace text=" " />
                    <")" text=")" />
                    <whitespace text=" " />
                    <variable_assignment>
                        <variable_name text="answer" />
                        <"=" text="=" />
                        <raw_string text="'yes'" />
                    </variable_assignment>
                    <";" text=";" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="break" />
                        </command_name>
                    </command>
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="[Nn]*" />
                    <whitespace text=" " />
                    <")" text=")" />
                    <whitespace text=" " />
                    <variable_assignment>
                        <variable_name text="answer" />
                        <"=" text="=" />
                        <raw_string text="'no'" />
                    </variable_assignment>
                    <";" text=";" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="break" />
                        </command_name>
                    </command>
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="*" />
                    <whitespace text=" " />
                    <")" text=")" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="Please answer yes or no." />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n    " />
                <esac text="esac" />
            </case_statement>
            <whitespace text="\n" />
            <done text="done" />
        </do_group>
    </while_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[" text="[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="answer" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"=" text="=" />
                <whitespace text=" " />
                <raw_string text="'yes'" />
            </binary_expression>
            <whitespace text=" " />
            <"]" text="]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="do_something" />
            </command_name>
        </command>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="do_something_else" />
                </command_name>
            </command>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n\n" />
    <comment text="# if curl exists" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[" text="[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="command" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-v" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="curl" />
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <")" text=")" />
                    </command_substitution>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]" text="]" />
        </test_command>
        <whitespace text="\n" />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="curl" />
            </command_name>
            <whitespace text=" " />
            <word text="-s" />
            <whitespace text=" " />
            <word text="https://example.com" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# if name_of_command doesnt exist" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[" text="[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-z" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="command" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-v" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="name_of_command" />
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <")" text=")" />
                    </command_substitution>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]" text="]" />
        </test_command>
        <whitespace text="\n" />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text=":" />
            </command_name>
            <whitespace text=" " />
            <word text="hji" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# FOR LOOP" />
    <whitespace text="\n" />
    <for_statement>
        <for text="for" />
        <whitespace text=" " />
        <variable_name text="i" />
        <whitespace text=" " />
        <in text="in" />
        <whitespace text=" " />
        <brace_expression>
            <"{" text="{" />
            <number text="1" />
            <".." text=".." />
            <number text="3" />
            <"}" text="}" />
        </brace_expression>
        <";" text=";" />
        <whitespace text=" " />
        <do_group>
            <do text="do" />
            <whitespace text="\n  " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Loop #" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="i" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
            <done text="done" />
        </do_group>
    </for_statement>
    <whitespace text="\n" />
    <comment text="# for each argument (in a argument-might-have-spaces friendly way)" />
    <whitespace text="\n" />
    <for_statement>
        <for text="for" />
        <whitespace text=" " />
        <variable_name text="arg" />
        <whitespace text=" " />
        <in text="in" />
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <simple_expansion>
                <"$" text="$" />
                <special_variable_name text="@" />
            </simple_expansion>
            <"\"" text="\"" />
        </string>
        <";" text=";" />
        <whitespace text=" " />
        <do_group>
            <do text="do" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="arg" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
            <done text="done" />
        </do_group>
    </for_statement>
    <whitespace text="\n\n" />
    <comment text="# WHILE LOOP" />
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="counter" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <while_statement>
        <while text="while" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="counter" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-lt" />
                <whitespace text=" " />
                <number text="3" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <do_group>
            <do text="do" />
            <whitespace text="\n  " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Counter: " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="counter" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n  " />
            <test_command>
                <"((" text="((" />
                <word text="counter++" />
                <"))" text="))" />
            </test_command>
            <whitespace text="\n" />
            <done text="done" />
        </do_group>
    </while_statement>
    <whitespace text="\n\n" />
    <comment text="# ========== PARAMETER EXPANSION ==========" />
    <whitespace text="\n\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <word text="unquoted" />
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <word text="unquoted" />
        <whitespace text=" " />
        <word text="two" />
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <word text="unquoted\\ with\\ spaces" />
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <word text="newline" />
        <text text="\\" />
        <whitespace text="\n    " />
        <word text="continued" />
    </command>
    <whitespace text=" " />
    <comment text="# trailing comment" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <word text="splat*" />
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <word text="doubleSplat**" />
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <concatenation>
            <word text="range" />
            <brace_expression>
                <"{" text="{" />
                <number text="1" />
                <".." text=".." />
                <number text="3" />
                <"}" text="}" />
            </brace_expression>
        </concatenation>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <concatenation>
            <word text="range" />
            <word text="{" />
            <word text="1..10..2" />
            <word text="}" />
        </concatenation>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <raw_string text="'single quote'" />
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <raw_string text="'single quote\\\n    '" />
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <concatenation>
            <raw_string text="'single quote'" />
            <string>
                <"\"" text="\"" />
                <string_content text="'" />
                <"\"" text="\"" />
            </string>
            <raw_string text="'hi'" />
        </concatenation>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <ansi_c_string text="$'single dollar'" />
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <concatenation>
            <word text="quote" />
            <raw_string text="'connection'" />
        </concatenation>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="double quote" />
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <concatenation>
            <word text="double" />
            <string>
                <"\"" text="\"" />
                <string_content text=" quote connection" />
                <"\"" text="\"" />
            </string>
        </concatenation>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="double quote with escapes \\\"" />
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="double " />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="dollar" />
            </simple_expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="double with subshell " />
            <command_substitution>
                <"$(" text="$(" />
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="hi" />
                </command>
                <")" text=")" />
            </command_substitution>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="double subshell " />
            <command_substitution>
                <"$(" text="$(" />
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="subsub" />
                            </command>
                            <")" text=")" />
                        </command_substitution>
                        <"\"" text="\"" />
                    </string>
                </command>
                <")" text=")" />
            </command_substitution>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <concatenation>
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="dollar" />
            </simple_expansion>
            <raw_string text="'connection'" />
        </concatenation>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <command_substitution>
            <"`" text="`" />
            <command>
                <command_name>
                    <word text="backticks" />
                </command_name>
            </command>
            <"`" text="`" />
        </command_substitution>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Greeting: " />
            <expansion>
                <"${" text="${" />
                <variable_name text="greeting" />
                <"}" text="}" />
            </expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Greeting upper: " />
            <expansion>
                <"${" text="${" />
                <variable_name text="greeting" />
                <"^^" text="^^" />
                <"}" text="}" />
            </expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="      " />
    <comment text="# Uppercase" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Greeting length: " />
            <expansion>
                <"${" text="${" />
                <"#" text="#" />
                <variable_name text="greeting" />
                <"}" text="}" />
            </expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="      " />
    <comment text="# Length" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Default fallback: " />
            <expansion>
                <"${" text="${" />
                <variable_name text="undefined_var" />
                <":-" text=":-" />
                <word text="DefaultVal" />
                <"}" text="}" />
            </expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text=" " />
    <comment text="# Default if unset" />
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="filename" />
        <"=" text="=" />
        <string>
            <"\"" text="\"" />
            <string_content text="archive.tar.gz" />
            <"\"" text="\"" />
        </string>
    </variable_assignment>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Base name: " />
            <expansion>
                <"${" text="${" />
                <variable_name text="filename" />
                <"%%" text="%%" />
                <regex text=".*" />
                <"}" text="}" />
            </expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="         " />
    <comment text="# Remove longest match from end" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Extension: " />
            <expansion>
                <"${" text="${" />
                <variable_name text="filename" />
                <"##" text="##" />
                <regex text="*." />
                <"}" text="}" />
            </expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="         " />
    <comment text="# Remove longest match from start" />
    <whitespace text="\n\n" />
    <comment text="# ========== REDIRECTS ==========" />
    <whitespace text="\n\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="User processes:" />
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="ps" />
        </command_name>
        <whitespace text=" " />
        <word text="aux" />
    </command>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <file_redirect>
            <">" text=">" />
            <whitespace text=" " />
            <word text="/dev/null" />
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <file_redirect>
            <"&>" text="&>" />
            <word text="/dev/null" />
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <file_redirect>
            <"&>>" text="&>>" />
            <word text="/dev/null" />
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <file_redirect>
            <"&>>" text="&>>" />
            <string>
                <"\"" text="\"" />
                <string_content text="./somefile" />
                <"\"" text="\"" />
            </string>
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <file_redirect>
            <"&>>" text="&>>" />
            <string>
                <"\"" text="\"" />
                <string_content text="./somefile" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="number" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <file_redirect>
            <"&>>" text="&>>" />
            <string>
                <"\"" text="\"" />
                <string_content text="./somefile" />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="number" />
                    <"}" text="}" />
                </expansion>
                <"\"" text="\"" />
            </string>
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <file_redirect>
            <file_descriptor text="1" />
            <">&" text=">&" />
            <number text="2" />
        </file_redirect>
        <whitespace text=" " />
        <file_redirect>
            <file_descriptor text="2" />
            <">" text=">" />
            <word text="/dev/null" />
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="tar" />
        </command_name>
        <whitespace text=" " />
        <word text="-cf" />
        <whitespace text=" " />
        <process_substitution>
            <">(" text=">(" />
            <command>
                <command_name>
                    <word text="ssh" />
                </command_name>
                <whitespace text=" " />
                <word text="remote_server" />
                <whitespace text=" " />
                <word text="tar" />
                <whitespace text=" " />
                <word text="xf" />
                <whitespace text=" " />
                <word text="-" />
            </command>
            <")" text=")" />
        </process_substitution>
        <whitespace text=" " />
        <word text="." />
    </command>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="ls" />
            </command_name>
            <whitespace text=" " />
            <word text="somefile" />
            <whitespace text=" " />
            <word text="thatdoesnotexist" />
        </command>
        <whitespace text=" " />
        <file_redirect>
            <file_descriptor text="1" />
            <">" text=">" />
            <word text="/dev/null" />
        </file_redirect>
        <whitespace text=" " />
        <file_redirect>
            <file_descriptor text="2" />
            <">" text=">" />
            <word text="err" />
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n\n" />
    <comment text="# ========== PIPES ==========" />
    <whitespace text="\n" />
    <pipeline>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="grep" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USER" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
    </pipeline>
    <whitespace text="\n" />
    <pipeline>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USER" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
    </pipeline>
    <whitespace text="\n" />
    <pipeline>
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USER" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
    </pipeline>
    <whitespace text="\n" />
    <comment text="# alsdkjfasdj" />
    <whitespace text="\n" />
    <pipeline>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="grep" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USER" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="grep" />
            </command_name>
            <whitespace text=" " />
            <word text="-v" />
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="double pipe" />
                <"\"" text="\"" />
            </string>
        </command>
    </pipeline>
    <";" text=";" />
    <whitespace text="\n" />
    <comment text="# alsdkjfasdj" />
    <whitespace text="\n" />
    <redirected_statement>
        <pipeline>
            <command>
                <command_name>
                    <word text="ps" />
                </command_name>
                <whitespace text=" " />
                <word text="aux" />
            </command>
            <whitespace text=" " />
            <"|" text="|" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="grep" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="USER" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <"|" text="|" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="grep" />
                </command_name>
                <whitespace text=" " />
                <word text="-v" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="double pipe and" />
                    <"\"" text="\"" />
                </string>
            </command>
        </pipeline>
        <whitespace text=" " />
        <file_redirect>
            <">" text=">" />
            <whitespace text=" " />
            <word text="/dev/null" />
        </file_redirect>
    </redirected_statement>
    <";" text=";" />
    <whitespace text="\n" />
    <comment text="# hi" />
    <whitespace text="\n" />
    <pipeline>
        <redirected_statement>
            <command>
                <command_name>
                    <word text="ps" />
                </command_name>
                <whitespace text=" " />
                <word text="aux" />
            </command>
            <whitespace text=" " />
            <file_redirect>
                <"&>" text="&>" />
                <word text="/dev/null" />
            </file_redirect>
        </redirected_statement>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="grep" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USER" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
    </pipeline>
    <";" text=";" />
    <whitespace text="\n" />
    <pipeline>
        <redirected_statement>
            <command>
                <command_name>
                    <word text="ps" />
                </command_name>
                <whitespace text=" " />
                <word text="aux" />
            </command>
            <whitespace text=" " />
            <file_redirect>
                <file_descriptor text="1" />
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
            <whitespace text=" " />
            <file_redirect>
                <file_descriptor text="2" />
                <">" text=">" />
                <word text="/dev/null" />
            </file_redirect>
        </redirected_statement>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="grep" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USER" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
    </pipeline>
    <";" text=";" />
    <whitespace text="\n" />
    <pipeline>
        <command>
            <command_name>
                <word text="ps" />
            </command_name>
            <whitespace text=" " />
            <word text="aux" />
        </command>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="grep" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USER" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text=" " />
        <"|" text="|" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="grep" />
            </command_name>
            <whitespace text=" " />
            <word text="-v" />
            <whitespace text=" " />
            <word text="grep" />
        </command>
    </pipeline>
    <";" text=";" />
    <whitespace text="\n" />
    <comment text="# TODO: tree-sitter parser doesn't like this part without semicolons for some reason" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="cat" />
        </command_name>
        <whitespace text=" " />
        <herestring_redirect>
            <"<<<" text="<<<" />
            <whitespace text=" " />
            <raw_string text="'hello'" />
        </herestring_redirect>
    </command>
    <";" text=";" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="diff" />
        </command_name>
        <whitespace text=" " />
        <process_substitution>
            <"<(" text="<(" />
            <command>
                <command_name>
                    <word text="ls" />
                </command_name>
                <whitespace text=" " />
                <word text="dir1" />
            </command>
            <")" text=")" />
        </process_substitution>
        <whitespace text=" " />
        <process_substitution>
            <"<(" text="<(" />
            <command>
                <command_name>
                    <word text="ls" />
                </command_name>
                <whitespace text=" " />
                <word text="dir2" />
            </command>
            <")" text=")" />
        </process_substitution>
    </command>
    <";" text=";" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="paste" />
        </command_name>
        <whitespace text=" " />
        <process_substitution>
            <"<(" text="<(" />
            <command>
                <command_name>
                    <word text="ls" />
                </command_name>
                <whitespace text=" " />
                <word text="dir1" />
            </command>
            <")" text=")" />
        </process_substitution>
        <whitespace text=" " />
        <process_substitution>
            <"<(" text="<(" />
            <command>
                <command_name>
                    <word text="ls" />
                </command_name>
                <whitespace text=" " />
                <word text="dir2" />
            </command>
            <")" text=")" />
        </process_substitution>
    </command>
    <";" text=";" />
    <whitespace text="\n\n" />
    <comment text="# ========== CHAINING ==========" />
    <whitespace text="\n" />
    <list>
        <command>
            <command_name>
                <word text="mkdir" />
            </command_name>
            <whitespace text=" " />
            <word text="-p" />
            <whitespace text=" " />
            <word text="/tmp/demo" />
        </command>
        <whitespace text=" " />
        <"||" text="||" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <word text="hi" />
        </command>
    </list>
    <whitespace text="\n" />
    <list>
        <list>
            <list>
                <command>
                    <command_name>
                        <word text="mkdir" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <word text="/tmp/demo" />
                </command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Created demo dir" />
                        <"\"" text="\"" />
                    </string>
                </command>
            </list>
            <whitespace text=" " />
            <"&&" text="&&" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Created demo dir" />
                    <"\"" text="\"" />
                </string>
            </command>
        </list>
        <whitespace text=" " />
        <"&&" text="&&" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Created demo dir" />
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n" />
    <list>
        <list>
            <command>
                <command_name>
                    <word text="mkdir" />
                </command_name>
                <whitespace text=" " />
                <word text="-p" />
                <whitespace text=" " />
                <word text="/tmp/demo" />
            </command>
            <whitespace text=" " />
            <"&&" text="&&" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Created demo dir" />
                    <"\"" text="\"" />
                </string>
            </command>
        </list>
        <whitespace text=" " />
        <"||" text="||" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Failed to create dir" />
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n" />
    <list>
        <list>
            <list>
                <command>
                    <command_name>
                        <word text="mkdir" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <word text="/tmp/demo" />
                </command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Created demo dir" />
                        <"\"" text="\"" />
                    </string>
                </command>
            </list>
            <whitespace text=" " />
            <"||" text="||" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Created demo dir" />
                    <"\"" text="\"" />
                </string>
            </command>
        </list>
        <whitespace text=" " />
        <"&&" text="&&" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Created demo dir" />
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n\n" />
    <comment text="# ========== ESCAPING ==========" />
    <whitespace text="\n\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="This is a quote: \\\" and this is a backslash: \\\\" />
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n\n" />
    <comment text="# ========== CALL FUNCTION ==========" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="say_hello" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="name" />
            </simple_expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="greet" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Bob" />
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n\n" />
    <comment text="# ========== END ==========" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Script completed successfully!" />
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
</program>
