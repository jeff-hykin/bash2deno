<program>
    <comment text="#!/bin/bash" />
    <whitespace text="\n\n" />
    <comment text="# general dependencies:" />
    <whitespace text="\n" />
    <comment text="#    bash (to run this script)" />
    <whitespace text="\n" />
    <comment text="#    util-linux (for getopt)" />
    <whitespace text="\n" />
    <comment text="#    procps or procps-ng" />
    <whitespace text="\n" />
    <comment text="#    hostapd" />
    <whitespace text="\n" />
    <comment text="#    iproute2" />
    <whitespace text="\n" />
    <comment text="#    iw" />
    <whitespace text="\n" />
    <comment text="#    iwconfig (you only need this if 'iw' can not recognize your adapter)" />
    <whitespace text="\n" />
    <comment text="#    haveged (optional)" />
    <whitespace text="\n\n" />
    <comment text="# dependencies for 'nat' or 'none' Internet sharing method" />
    <whitespace text="\n" />
    <comment text="#    dnsmasq" />
    <whitespace text="\n" />
    <comment text="#    iptables" />
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="VERSION" />
        <"=" text="=" />
        <word text="0.4.9" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="PROGNAME" />
        <"=" text="=" />
        <string>
            <"\"" text="\"" />
            <command_substitution>
                <"$(" text="$(" />
                <command>
                    <command_name>
                        <word text="basename" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <special_variable_name text="0" />
                    </simple_expansion>
                </command>
                <")" text=")" />
            </command_substitution>
            <"\"" text="\"" />
        </string>
    </variable_assignment>
    <whitespace text="\n\n" />
    <comment text="# make sure that all command outputs are in english" />
    <whitespace text="\n" />
    <comment text="# so we can parse them correctly" />
    <whitespace text="\n" />
    <declaration_command>
        <export text="export" />
        <whitespace text=" " />
        <variable_assignment>
            <variable_name text="LC_ALL" />
            <"=" text="=" />
            <word text="C" />
        </variable_assignment>
    </declaration_command>
    <whitespace text="\n\n" />
    <comment text="# all new files and directories must be readable only by root." />
    <whitespace text="\n" />
    <comment text="# in special cases we must use chmod to give any other permissions." />
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="SCRIPT_UMASK" />
        <"=" text="=" />
        <number text="0077" />
    </variable_assignment>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="umask" />
        </command_name>
        <whitespace text=" " />
        <simple_expansion>
            <"$" text="$" />
            <variable_name text="SCRIPT_UMASK" />
        </simple_expansion>
    </command>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="usage" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Usage: " />
                        <"\"" text="\"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" [options] <wifi-interface> [<interface-with-internet>] [<access-point-name> [<passphrase>]]" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Options:" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  -h, --help              Show this help" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --version               Print version number" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  -c <channel>            Channel number (default: 1 or fallback to currently connected channel)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  -w <WPA version>        Use 1 for WPA, use 2 for WPA2, use 1+2 for both (default: 2)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  -n                      Disable Internet sharing (if you use this, don't pass" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          the <interface-with-internet> argument)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  -m <method>             Method for Internet sharing." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          Use: 'nat' for NAT (default)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                               'bridge' for bridging" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                               'none' for no Internet sharing (equivalent to -n)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --psk                   Use 64 hex digits pre-shared-key instead of passphrase" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --hidden                Make the Access Point hidden (do not broadcast the SSID)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --mac-filter            Enable MAC address filtering" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --mac-filter-accept     Location of MAC address filter list (defaults to /etc/hostapd/hostapd.accept)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --redirect-to-localhost If -n is set, redirect every web request to localhost (useful for public information networks)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --hostapd-debug <level> With level between 1 and 2, passes arguments -d or -dd to hostapd for debugging." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --hostapd-timestamps    Include timestamps in hostapd debug messages." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --isolate-clients       Disable communication between clients" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --ieee80211n            Enable IEEE 802.11n (HT)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --ieee80211ac           Enable IEEE 802.11ac (VHT)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --ieee80211ax           Enable IEEE 802.11ax (VHT)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --ht_capab <HT>         HT capabilities (default: [HT40+])" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --vht_capab <VHT>       VHT capabilities" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --country <code>        Set two-letter country code for regularity (example: US)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --freq-band <GHz>       Set frequency band. Valid inputs: 2.4, 5 (default: Use 5GHz if the interface supports it)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --driver                Choose your WiFi adapter driver (default: nl80211)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --no-virt               Do not create virtual interface" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --no-haveged            Do not run 'haveged' automatically when needed" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --fix-unmanaged         If NetworkManager shows your interface as unmanaged after you" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          close create_ap, then use this option to switch your interface" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          back to managed" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --mac <MAC>             Set MAC address" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --dhcp-dns <IP1[,IP2]>  Set DNS returned by DHCP" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --dhcp-hosts <H1[,H2]>  Add list of dnsmasq.conf 'dhcp-host=' values" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          If ETC_HOSTS=1, it will use the ip addresses for the named hosts in that /etc/hosts." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          Othwise, the following syntax would work --dhcp-hosts \\\"host1,192.168.12.2 host2,192.168.12.3\\\"" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          See https://github.com/imp/dnsmasq/blob/770bce967cfc9967273d0acfb3ea018fb7b17522/dnsmasq.conf.example#L238" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          for other valid dnsmasq dhcp-host parameters." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --daemon                Run create_ap in the background" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --pidfile <pidfile>     Save daemon PID to file" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --logfile <logfile>     Save daemon messages to file" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --dns-logfile <logfile> Log DNS queries to file" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --stop <id>             Send stop command to an already running create_ap. For an <id>" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          you can put the PID of create_ap or the WiFi interface. You can" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          get them with --list-running" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --list-running          Show the create_ap processes that are already running" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --list-clients <id>     List the clients connected to create_ap instance associated with <id>." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          For an <id> you can put the PID of create_ap or the WiFi interface." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          If virtual WiFi interface was created, then use that one." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="                          You can get them with --list-running" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --mkconfig <conf_file>  Store configs in conf_file" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --config <conf_file>    Load configs from conf_file" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Non-Bridging Options:" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --no-dns                Disable dnsmasq DNS server" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  --no-dnsmasq            Disable dnsmasq server completely" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  -g <gateway>            IPv4 Gateway for the Access Point (default: 192.168.12.1)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  -d                      DNS server will take into account /etc/hosts" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  -e <hosts_file>         DNS server will take into account additional hosts file" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Useful informations:" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  * If you're not using the --no-virt option, then you can create an AP with the same" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="    interface you are getting your Internet connection." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  * You can pass your SSID and password through pipe or through arguments (see examples)." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="  * On bridge method if the <interface-with-internet> is not a bridge interface, then" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="    a bridge interface is created automatically." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Examples:" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" wlan0 eth0 MyAccessPoint MyPassPhrase" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <string_content text="  echo -e 'MyAccessPoint\\nMyPassPhrase' | " />
                        <"\"" text="\"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" wlan0 eth0" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" wlan0 eth0 MyAccessPoint" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <string_content text="  echo 'MyAccessPoint' | " />
                        <"\"" text="\"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" wlan0 eth0" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" wlan0 wlan0 MyAccessPoint MyPassPhrase" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" -n wlan0 MyAccessPoint MyPassPhrase" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" -m bridge wlan0 eth0 MyAccessPoint MyPassPhrase" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" -m bridge wlan0 br0 MyAccessPoint MyPassPhrase" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" --driver rtl871xdrv wlan0 eth0 MyAccessPoint MyPassPhrase" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" --daemon wlan0 eth0 MyAccessPoint MyPassPhrase" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <"\"" text="  \"" />
                    </string>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <string>
                        <"\"" text="\"" />
                        <string_content text=" --stop wlan0" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# Busybox polyfills" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <pipeline>
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="cp" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="--help" />
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <file_descriptor text="2" />
                    <">&" text=">&" />
                    <number text="1" />
                </file_redirect>
            </redirected_statement>
            <whitespace text=" " />
            <"|" text="|" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="grep" />
                </command_name>
                <whitespace text=" " />
                <word text="-q" />
                <whitespace text=" " />
                <word text="--" />
                <whitespace text=" " />
                <word text="--no-clobber" />
            </command>
        </pipeline>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <function_definition>
            <word text="cp_n" />
            <"(" text="(" />
            <")" text=")" />
            <whitespace text=" " />
            <compound_statement>
                <"{" text="{" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="cp" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-n" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <special_variable_name text="@" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n    " />
                <"}" text="}" />
            </compound_statement>
        </function_definition>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <function_definition>
                <word text="cp_n" />
                <"(" text="(" />
                <")" text=")" />
                <whitespace text=" " />
                <compound_statement>
                    <"{" text="{" />
                    <whitespace text="\n        " />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="yes" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="n" />
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="cp" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-i" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <special_variable_name text="@" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                    </pipeline>
                    <whitespace text="\n    " />
                    <"}" text="}" />
                </compound_statement>
            </function_definition>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# on success it echos a non-zero unused FD" />
    <whitespace text="\n" />
    <comment text="# on error it echos 0" />
    <whitespace text="\n" />
    <function_definition>
        <word text="get_avail_fd" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="seq" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                        <whitespace text=" " />
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="ulimit" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-n" />
                            </command>
                            <")" text=")" />
                        </command_substitution>
                    </command>
                    <")" text=")" />
                </command_substitution>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <unary_expression>
                                <"!" text="!" />
                                <whitespace text=" " />
                                <unary_expression>
                                    <test_operator text="-a" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="/proc/" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="BASHPID" />
                                        </simple_expansion>
                                        <string_content text="/fd/" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                </unary_expression>
                            </unary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="x" />
                            </simple_expansion>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                        </command>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# lock file for the mutex counter" />
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="COUNTER_LOCK_FILE" />
        <"=" text="=" />
        <concatenation>
            <word text="/tmp/create_ap." />
            <simple_expansion>
                <"$" text="$" />
                <special_variable_name text="$" />
            </simple_expansion>
            <word text=".lock" />
        </concatenation>
    </variable_assignment>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="cleanup_lock" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="rm" />
                </command_name>
                <whitespace text=" " />
                <word text="-f" />
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="COUNTER_LOCK_FILE" />
                </simple_expansion>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="init_lock" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="LOCK_FILE" />
                    <"=" text="=" />
                    <word text="/tmp/create_ap.all.lock" />
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n\n    " />
            <comment text="# we initialize only once" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="LOCK_FD" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
            </list>
            <whitespace text="\n\n    " />
            <variable_assignment>
                <variable_name text="LOCK_FD" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_avail_fd" />
                        </command_name>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="LOCK_FD" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n\n    " />
            <comment text="# open/create lock file with write access for all users" />
            <whitespace text="\n    " />
            <comment text="# otherwise normal users will not be able to use it." />
            <whitespace text="\n    " />
            <comment text="# to avoid race conditions on creation, we need to" />
            <whitespace text="\n    " />
            <comment text="# use umask to set the permissions." />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="umask" />
                </command_name>
                <whitespace text=" " />
                <number text="0555" />
            </command>
            <whitespace text="\n    " />
            <list>
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="eval" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="exec " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="LOCK_FD" />
                            </simple_expansion>
                            <string_content text=">" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="LOCK_FILE" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/dev/null" />
                    </file_redirect>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="umask" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="SCRIPT_UMASK" />
                </simple_expansion>
            </command>
            <whitespace text="\n\n    " />
            <comment text="# there is a case where lock file was created from a normal" />
            <whitespace text="\n    " />
            <comment text="# user. change the owner to root as soon as we can." />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="id" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-u" />
                            </command>
                            <")" text=")" />
                        </command_substitution>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="chown" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="0:0" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="LOCK_FILE" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n\n    " />
            <comment text="# create mutex counter lock file" />
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="COUNTER_LOCK_FILE" />
                    </simple_expansion>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <special_variable_name text="?" />
                </simple_expansion>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# recursive mutex lock for all create_ap processes" />
    <whitespace text="\n" />
    <function_definition>
        <word text="mutex_lock" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="counter_mutex_fd" />
            </declaration_command>
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="counter" />
            </declaration_command>
            <whitespace text="\n\n    " />
            <comment text="# lock local mutex and read counter" />
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="counter_mutex_fd" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_avail_fd" />
                        </command_name>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter_mutex_fd" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="eval" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="exec " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter_mutex_fd" />
                        </simple_expansion>
                        <string_content text="<>" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="COUNTER_LOCK_FILE" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="flock" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="counter_mutex_fd" />
                    </simple_expansion>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="read" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-u" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="counter_mutex_fd" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <word text="counter" />
                </command>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="Failed to lock mutex counter" />
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">&" text=">&" />
                            <number text="2" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <comment text="# lock global mutex and increase counter" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="flock" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="LOCK_FD" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="counter" />
                <"=" text="=" />
                <arithmetic_expansion>
                    <"$((" text="$((" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <"+" text="+" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"))" text="))" />
                </arithmetic_expansion>
            </variable_assignment>
            <whitespace text="\n\n    " />
            <comment text="# write counter and unlock local mutex" />
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="counter" />
                    </simple_expansion>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <whitespace text=" " />
                    <concatenation>
                        <word text="/proc/" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="BASHPID" />
                        </simple_expansion>
                        <word text="/fd/" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter_mutex_fd" />
                        </simple_expansion>
                    </concatenation>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="eval" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="exec " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="counter_mutex_fd" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text="<&-" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# recursive mutex unlock for all create_ap processes" />
    <whitespace text="\n" />
    <function_definition>
        <word text="mutex_unlock" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="counter_mutex_fd" />
            </declaration_command>
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="counter" />
            </declaration_command>
            <whitespace text="\n\n    " />
            <comment text="# lock local mutex and read counter" />
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="counter_mutex_fd" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_avail_fd" />
                        </command_name>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter_mutex_fd" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="eval" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="exec " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter_mutex_fd" />
                        </simple_expansion>
                        <string_content text="<>" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="COUNTER_LOCK_FILE" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="flock" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="counter_mutex_fd" />
                    </simple_expansion>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="read" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-u" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="counter_mutex_fd" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <word text="counter" />
                </command>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="Failed to lock mutex counter" />
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">&" text=">&" />
                            <number text="2" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <comment text="# decrease counter and unlock global mutex" />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-gt" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="counter" />
                    <"=" text="=" />
                    <arithmetic_expansion>
                        <"$((" text="$((" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="counter" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <"-" text="-" />
                            <whitespace text=" " />
                            <number text="1" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"))" text="))" />
                    </arithmetic_expansion>
                </variable_assignment>
                <whitespace text="\n        " />
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="counter" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="0" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="flock" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-u" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="LOCK_FD" />
                        </simple_expansion>
                    </command>
                </list>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <comment text="# write counter and unlock local mutex" />
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="counter" />
                    </simple_expansion>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <whitespace text=" " />
                    <concatenation>
                        <word text="/proc/" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="BASHPID" />
                        </simple_expansion>
                        <word text="/fd/" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="counter_mutex_fd" />
                        </simple_expansion>
                    </concatenation>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="eval" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="exec " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="counter_mutex_fd" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text="<&-" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# it takes 2 arguments" />
    <whitespace text="\n" />
    <comment text="# returns:" />
    <whitespace text="\n" />
    <comment text="#  0 if v1 (1st argument) and v2 (2nd argument) are the same" />
    <whitespace text="\n" />
    <comment text="#  1 if v1 is less than v2" />
    <whitespace text="\n" />
    <comment text="#  2 if v1 is greater than v2" />
    <whitespace text="\n" />
    <function_definition>
        <word text="version_cmp" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="V1" />
                <whitespace text=" " />
                <variable_name text="V2" />
                <whitespace text=" " />
                <variable_name text="VN" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <unary_expression>
                            <"!" text="!" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                        </unary_expression>
                        <whitespace text=" " />
                        <"=~" text="=~" />
                        <whitespace text=" " />
                        <regex text="^[0-9]+(\\.[0-9]+)*$" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Wrong version format!" />
                        <"\"" text="\"" />
                    </string>
                </command>
            </list>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <unary_expression>
                            <"!" text="!" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="2" />
                            </simple_expansion>
                        </unary_expression>
                        <whitespace text=" " />
                        <"=~" text="=~" />
                        <whitespace text=" " />
                        <regex text="^[0-9]+(\\.[0-9]+)*$" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Wrong version format!" />
                        <"\"" text="\"" />
                    </string>
                </command>
            </list>
            <whitespace text="\n\n    " />
            <variable_assignment>
                <variable_name text="V1" />
                <"=" text="=" />
                <array>
                    <"(" text="(" />
                    <whitespace text=" " />
                    <command_substitution>
                        <"$(" text="$(" />
                        <pipeline>
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="1" />
                                </simple_expansion>
                            </command>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="tr" />
                                </command_name>
                                <whitespace text=" " />
                                <raw_string text="'.'" />
                                <whitespace text=" " />
                                <raw_string text="' '" />
                            </command>
                        </pipeline>
                        <")" text=")" />
                    </command_substitution>
                    <whitespace text=" " />
                    <")" text=")" />
                </array>
            </variable_assignment>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="V2" />
                <"=" text="=" />
                <array>
                    <"(" text="(" />
                    <whitespace text=" " />
                    <command_substitution>
                        <"$(" text="$(" />
                        <pipeline>
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="2" />
                                </simple_expansion>
                            </command>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="tr" />
                                </command_name>
                                <whitespace text=" " />
                                <raw_string text="'.'" />
                                <whitespace text=" " />
                                <raw_string text="' '" />
                            </command>
                        </pipeline>
                        <")" text=")" />
                    </command_substitution>
                    <whitespace text=" " />
                    <")" text=")" />
                </array>
            </variable_assignment>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="VN" />
                <"=" text="=" />
                <expansion>
                    <"${" text="${" />
                    <"#" text="#" />
                    <subscript>
                        <variable_name text="V1" />
                        <"[" text="[" />
                        <word text="@" />
                        <"]" text="]" />
                    </subscript>
                    <"}" text="}" />
                </expansion>
            </variable_assignment>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="VN" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-lt" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <"#" text="#" />
                            <subscript>
                                <variable_name text="V2" />
                                <"[" text="[" />
                                <word text="@" />
                                <"]" text="]" />
                            </subscript>
                            <"}" text="}" />
                        </expansion>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="VN" />
                    <"=" text="=" />
                    <expansion>
                        <"${" text="${" />
                        <"#" text="#" />
                        <subscript>
                            <variable_name text="V2" />
                            <"[" text="[" />
                            <word text="@" />
                            <"]" text="]" />
                        </subscript>
                        <"}" text="}" />
                    </expansion>
                </variable_assignment>
            </list>
            <whitespace text="\n\n    " />
            <c_style_for_statement>
                <for text="for" />
                <whitespace text=" " />
                <"((" text="((" />
                <variable_assignment>
                    <variable_name text="x" />
                    <whitespace text=" " />
                    <"=" text="=" />
                    <whitespace text=" " />
                    <number text="0" />
                </variable_assignment>
                <";" text=";" />
                <whitespace text=" " />
                <binary_expression>
                    <word text="x" />
                    <whitespace text=" " />
                    <"<" text="<" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="VN" />
                    </simple_expansion>
                </binary_expression>
                <";" text=";" />
                <whitespace text=" " />
                <postfix_expression>
                    <word text="x" />
                    <"++" text="++" />
                </postfix_expression>
                <"))" text="))" />
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <list>
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <expansion>
                                    <"${" text="${" />
                                    <subscript>
                                        <variable_name text="V1" />
                                        <"[" text="[" />
                                        <word text="x" />
                                        <"]" text="]" />
                                    </subscript>
                                    <"}" text="}" />
                                </expansion>
                                <whitespace text=" " />
                                <test_operator text="-lt" />
                                <whitespace text=" " />
                                <expansion>
                                    <"${" text="${" />
                                    <subscript>
                                        <variable_name text="V2" />
                                        <"[" text="[" />
                                        <word text="x" />
                                        <"]" text="]" />
                                    </subscript>
                                    <"}" text="}" />
                                </expansion>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="1" />
                        </command>
                    </list>
                    <whitespace text="\n        " />
                    <list>
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <expansion>
                                    <"${" text="${" />
                                    <subscript>
                                        <variable_name text="V1" />
                                        <"[" text="[" />
                                        <word text="x" />
                                        <"]" text="]" />
                                    </subscript>
                                    <"}" text="}" />
                                </expansion>
                                <whitespace text=" " />
                                <test_operator text="-gt" />
                                <whitespace text=" " />
                                <expansion>
                                    <"${" text="${" />
                                    <subscript>
                                        <variable_name text="V2" />
                                        <"[" text="[" />
                                        <word text="x" />
                                        <"]" text="]" />
                                    </subscript>
                                    <"}" text="}" />
                                </expansion>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="2" />
                        </command>
                    </list>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </c_style_for_statement>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="USE_IWCONFIG" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_interface" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-d" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="/sys/class/net/" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="1" />
                            <"}" text="}" />
                        </expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_wifi_interface" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <list>
                <redirected_statement>
                    <list>
                        <redirected_statement>
                            <command>
                                <command_name>
                                    <word text="which" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="iw" />
                            </command>
                            <whitespace text=" " />
                            <file_redirect>
                                <">" text=">" />
                                <whitespace text=" " />
                                <word text="/dev/null" />
                            </file_redirect>
                            <whitespace text=" " />
                            <file_redirect>
                                <file_descriptor text="2" />
                                <">&" text=">&" />
                                <number text="1" />
                            </file_redirect>
                        </redirected_statement>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="iw" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="dev" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <word text="info" />
                        </command>
                    </list>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/dev/null" />
                    </file_redirect>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
            </list>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <redirected_statement>
                    <list>
                        <redirected_statement>
                            <command>
                                <command_name>
                                    <word text="which" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="iwconfig" />
                            </command>
                            <whitespace text=" " />
                            <file_redirect>
                                <">" text=">" />
                                <whitespace text=" " />
                                <word text="/dev/null" />
                            </file_redirect>
                            <whitespace text=" " />
                            <file_redirect>
                                <file_descriptor text="2" />
                                <">&" text=">&" />
                                <number text="1" />
                            </file_redirect>
                        </redirected_statement>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="iwconfig" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                        </command>
                    </list>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/dev/null" />
                    </file_redirect>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="USE_IWCONFIG" />
                    <"=" text="=" />
                    <number text="1" />
                </variable_assignment>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_bridge_interface" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-d" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="/sys/class/net/" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="1" />
                            <"}" text="}" />
                        </expansion>
                        <string_content text="/bridge" />
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_phy_device" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <word text="/sys/class/ieee80211/*" />
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <list>
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <unary_expression>
                                <"!" text="!" />
                                <whitespace text=" " />
                                <unary_expression>
                                    <test_operator text="-e" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                </unary_expression>
                            </unary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="continue" />
                            </command_name>
                        </command>
                    </list>
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="x" />
                                        <"##" text="##" />
                                        <regex text="*/" />
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <"=" text="=" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="1" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="0" />
                        </command>
                        <whitespace text="\n        " />
                        <elif_clause>
                            <elif text="elif" />
                            <whitespace text=" " />
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <unary_expression>
                                    <test_operator text="-e" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <string_content text="/device/net/" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="1" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                </unary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n            " />
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="x" />
                                    <"##" text="##" />
                                    <regex text="*/" />
                                    <"}" text="}" />
                                </expansion>
                            </command>
                            <whitespace text="\n            " />
                            <command>
                                <command_name>
                                    <word text="return" />
                                </command_name>
                                <whitespace text=" " />
                                <number text="0" />
                            </command>
                            <whitespace text="\n" />
                        </elif_clause>
                        <whitespace text="        " />
                        <elif_clause>
                            <elif text="elif" />
                            <whitespace text=" " />
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <unary_expression>
                                    <test_operator text="-e" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <string_content text="/device/net:" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="1" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                </unary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n            " />
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="x" />
                                    <"##" text="##" />
                                    <regex text="*/" />
                                    <"}" text="}" />
                                </expansion>
                            </command>
                            <whitespace text="\n            " />
                            <command>
                                <command_name>
                                    <word text="return" />
                                </command_name>
                                <whitespace text=" " />
                                <number text="0" />
                            </command>
                            <whitespace text="\n" />
                        </elif_clause>
                        <whitespace text="        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Failed to get phy interface" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_adapter_info" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="PHY" />
            </declaration_command>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="PHY" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_phy_device" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <special_variable_name text="?" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="iw" />
                </command_name>
                <whitespace text=" " />
                <word text="phy" />
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="PHY" />
                </simple_expansion>
                <whitespace text=" " />
                <word text="info" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_adapter_kernel_module" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="MODULE" />
            </declaration_command>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="MODULE" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="readlink" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-f" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="/sys/class/net/" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <string_content text="/device/driver/module" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="MODULE" />
                    <"##" text="##" />
                    <regex text="*/" />
                    <"}" text="}" />
                </expansion>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="can_be_sta_and_ap" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <comment text="# iwconfig does not provide this information, assume false" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="USE_IWCONFIG" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <command_substitution>
                                <"$(" text="$(" />
                                <command>
                                    <command_name>
                                        <word text="get_adapter_kernel_module" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="1" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                </command>
                                <")" text=")" />
                            </command_substitution>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"==" text="==" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="brcmfmac" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="WARN: brmfmac driver doesn't work properly with virtual interfaces and" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">&" text=">&" />
                        <number text="2" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="      it can cause kernel panic. For this reason we disallow virtual" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">&" text=">&" />
                        <number text="2" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="      interfaces for your adapter." />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">&" text=">&" />
                        <number text="2" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="      For more info: https://github.com/oblique/create_ap/issues/203" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">&" text=">&" />
                        <number text="2" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <list>
                <redirected_statement>
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="get_adapter_info" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="1" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-E" />
                            <whitespace text=" " />
                            <raw_string text="'{.* managed.* AP.*}'" />
                        </command>
                    </pipeline>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/dev/null" />
                    </file_redirect>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
            </list>
            <whitespace text="\n    " />
            <list>
                <redirected_statement>
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="get_adapter_info" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="1" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-E" />
                            <whitespace text=" " />
                            <raw_string text="'{.* AP.* managed.*}'" />
                        </command>
                    </pipeline>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/dev/null" />
                    </file_redirect>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
            </list>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="can_be_ap" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <comment text="# iwconfig does not provide this information, assume true" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="USE_IWCONFIG" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
            </list>
            <whitespace text="\n    " />
            <list>
                <redirected_statement>
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="get_adapter_info" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="1" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-E" />
                            <whitespace text=" " />
                            <raw_string text="'\\* AP$'" />
                        </command>
                    </pipeline>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/dev/null" />
                    </file_redirect>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
            </list>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="can_transmit_to_channel" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="IFACE" />
                <whitespace text=" " />
                <variable_name text="CHANNEL_NUM" />
                <whitespace text=" " />
                <variable_name text="CHANNEL_INFO" />
            </declaration_command>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="IFACE" />
                <"=" text="=" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="1" />
                </simple_expansion>
            </variable_assignment>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="CHANNEL_NUM" />
                <"=" text="=" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="2" />
                </simple_expansion>
            </variable_assignment>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="USE_IWCONFIG" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="FREQ_BAND" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <"==" text="==" />
                            <whitespace text=" " />
                            <word text="2.4" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="CHANNEL_INFO" />
                        <"=" text="=" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <pipeline>
                                <command>
                                    <command_name>
                                        <word text="get_adapter_info" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="IFACE" />
                                        <"}" text="}" />
                                    </expansion>
                                </command>
                                <whitespace text=" " />
                                <"|" text="|" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="grep" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text=" 24[0-9][0-9]\\(\\.0\\+\\)\\? MHz \\[" />
                                        <expansion>
                                            <"${" text="${" />
                                            <variable_name text="CHANNEL_NUM" />
                                            <"}" text="}" />
                                        </expansion>
                                        <string_content text="\\]" />
                                        <"\"" text="\"" />
                                    </string>
                                </command>
                            </pipeline>
                            <")" text=")" />
                        </command_substitution>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <else_clause>
                        <else text="else" />
                        <whitespace text="\n            " />
                        <variable_assignment>
                            <variable_name text="CHANNEL_INFO" />
                            <"=" text="=" />
                            <command_substitution>
                                <"$(" text="$(" />
                                <pipeline>
                                    <command>
                                        <command_name>
                                            <word text="get_adapter_info" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <expansion>
                                            <"${" text="${" />
                                            <variable_name text="IFACE" />
                                            <"}" text="}" />
                                        </expansion>
                                    </command>
                                    <whitespace text=" " />
                                    <"|" text="|" />
                                    <whitespace text=" " />
                                    <command>
                                        <command_name>
                                            <word text="grep" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <string_content text=" \\(49[0-9][0-9]\\|5[0-9]\\{3\\}\\)\\(\\.0\\+\\)\\? MHz \\[" />
                                            <expansion>
                                                <"${" text="${" />
                                                <variable_name text="CHANNEL_NUM" />
                                                <"}" text="}" />
                                            </expansion>
                                            <string_content text="\\]" />
                                            <"\"" text="\"" />
                                        </string>
                                    </command>
                                </pipeline>
                                <")" text=")" />
                            </command_substitution>
                        </variable_assignment>
                        <whitespace text="\n" />
                    </else_clause>
                    <whitespace text="        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-z" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="CHANNEL_INFO" />
                                    <"}" text="}" />
                                </expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                </list>
                <whitespace text="\n        " />
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <string>
                                <"\"" text="\"" />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="CHANNEL_INFO" />
                                    <"}" text="}" />
                                </expansion>
                                <"\"" text="\"" />
                            </string>
                            <whitespace text=" " />
                            <"==" text="==" />
                            <whitespace text=" " />
                            <extglob_pattern text="*no\\ IR*" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                </list>
                <whitespace text="\n        " />
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <string>
                                <"\"" text="\"" />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="CHANNEL_INFO" />
                                    <"}" text="}" />
                                </expansion>
                                <"\"" text="\"" />
                            </string>
                            <whitespace text=" " />
                            <"==" text="==" />
                            <whitespace text=" " />
                            <extglob_pattern text="*disabled*" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                </list>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="CHANNEL_NUM" />
                        <"=" text="=" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="printf" />
                                </command_name>
                                <whitespace text=" " />
                                <raw_string text="'%02d'" />
                                <whitespace text=" " />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="CHANNEL_NUM" />
                                    <"}" text="}" />
                                </expansion>
                            </command>
                            <")" text=")" />
                        </command_substitution>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="CHANNEL_INFO" />
                        <"=" text="=" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <pipeline>
                                <command>
                                    <command_name>
                                        <word text="iwlist" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="IFACE" />
                                        <"}" text="}" />
                                    </expansion>
                                    <whitespace text=" " />
                                    <word text="channel" />
                                </command>
                                <whitespace text=" " />
                                <"|" text="|" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="grep" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="-E" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="Channel[[:blank:]]" />
                                        <expansion>
                                            <"${" text="${" />
                                            <variable_name text="CHANNEL_NUM" />
                                            <"}" text="}" />
                                        </expansion>
                                        <string_content text="[[:blank:]]?:" />
                                        <"\"" text="\"" />
                                    </string>
                                </command>
                            </pipeline>
                            <")" text=")" />
                        </command_substitution>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <list>
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <unary_expression>
                                <test_operator text="-z" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="CHANNEL_INFO" />
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                            </unary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="1" />
                        </command>
                    </list>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="0" />
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# taken from iw/util.c" />
    <whitespace text="\n" />
    <function_definition>
        <word text="ieee80211_frequency_to_channel" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="FREQ_MAYBE_FRACTIONAL" />
                    <"=" text="=" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="1" />
                    </simple_expansion>
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="FREQ" />
                    <"=" text="=" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="FREQ_MAYBE_FRACTIONAL" />
                        <"%" text="%" />
                        <regex text=".*" />
                        <"}" text="}" />
                    </expansion>
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="FREQ" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-lt" />
                        <whitespace text=" " />
                        <number text="1000" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
                <whitespace text="\n    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="FREQ" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="2484" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="14" />
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="FREQ" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="5935" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="2" />
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="FREQ" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-lt" />
                            <whitespace text=" " />
                            <number text="2484" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <arithmetic_expansion>
                            <"$((" text="$((" />
                            <whitespace text=" " />
                            <binary_expression>
                                <parenthesized_expression>
                                    <"(" text="(" />
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="FREQ" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <"-" text="-" />
                                        <whitespace text=" " />
                                        <number text="2407" />
                                    </binary_expression>
                                    <")" text=")" />
                                </parenthesized_expression>
                                <whitespace text=" " />
                                <"/" text="/" />
                                <whitespace text=" " />
                                <number text="5" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"))" text="))" />
                        </arithmetic_expansion>
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="FREQ" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-ge" />
                                <whitespace text=" " />
                                <number text="4910" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"&&" text="&&" />
                            <whitespace text=" " />
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="FREQ" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-le" />
                                <whitespace text=" " />
                                <number text="4980" />
                            </binary_expression>
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <arithmetic_expansion>
                            <"$((" text="$((" />
                            <whitespace text=" " />
                            <binary_expression>
                                <parenthesized_expression>
                                    <"(" text="(" />
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="FREQ" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <"-" text="-" />
                                        <whitespace text=" " />
                                        <number text="4000" />
                                    </binary_expression>
                                    <")" text=")" />
                                </parenthesized_expression>
                                <whitespace text=" " />
                                <"/" text="/" />
                                <whitespace text=" " />
                                <number text="5" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"))" text="))" />
                        </arithmetic_expansion>
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="FREQ" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-lt" />
                            <whitespace text=" " />
                            <number text="5950" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <arithmetic_expansion>
                            <"$((" text="$((" />
                            <whitespace text=" " />
                            <binary_expression>
                                <parenthesized_expression>
                                    <"(" text="(" />
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="FREQ" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <"-" text="-" />
                                        <whitespace text=" " />
                                        <number text="5000" />
                                    </binary_expression>
                                    <")" text=")" />
                                </parenthesized_expression>
                                <whitespace text=" " />
                                <"/" text="/" />
                                <whitespace text=" " />
                                <number text="5" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"))" text="))" />
                        </arithmetic_expansion>
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="FREQ" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-le" />
                            <whitespace text=" " />
                            <number text="45000" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <arithmetic_expansion>
                            <"$((" text="$((" />
                            <whitespace text=" " />
                            <binary_expression>
                                <parenthesized_expression>
                                    <"(" text="(" />
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="FREQ" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <"-" text="-" />
                                        <whitespace text=" " />
                                        <number text="5950" />
                                    </binary_expression>
                                    <")" text=")" />
                                </parenthesized_expression>
                                <whitespace text=" " />
                                <"/" text="/" />
                                <whitespace text=" " />
                                <number text="5" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"))" text="))" />
                        </arithmetic_expansion>
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="FREQ" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-ge" />
                                <whitespace text=" " />
                                <number text="58320" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"&&" text="&&" />
                            <whitespace text=" " />
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="FREQ" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-le" />
                                <whitespace text=" " />
                                <number text="70200" />
                            </binary_expression>
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <arithmetic_expansion>
                            <"$((" text="$((" />
                            <whitespace text=" " />
                            <binary_expression>
                                <parenthesized_expression>
                                    <"(" text="(" />
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="FREQ" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <"-" text="-" />
                                        <whitespace text=" " />
                                        <number text="56160" />
                                    </binary_expression>
                                    <")" text=")" />
                                </parenthesized_expression>
                                <whitespace text=" " />
                                <"/" text="/" />
                                <whitespace text=" " />
                                <number text="2160" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"))" text="))" />
                        </arithmetic_expansion>
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="0" />
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_5ghz_frequency" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="1" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <"=~" text="=~" />
                    <whitespace text=" " />
                    <regex text="^(49[0-9]{2})|(5[0-9]{3})(\\.0+)?$" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_wifi_connected" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="USE_IWCONFIG" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <list>
                    <redirected_statement>
                        <pipeline>
                            <redirected_statement>
                                <command>
                                    <command_name>
                                        <word text="iw" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="dev" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="1" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                    <whitespace text=" " />
                                    <word text="link" />
                                </command>
                                <whitespace text=" " />
                                <file_redirect>
                                    <file_descriptor text="2" />
                                    <">&" text=">&" />
                                    <number text="1" />
                                </file_redirect>
                            </redirected_statement>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="grep" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-E" />
                                <whitespace text=" " />
                                <raw_string text="'^Connected to'" />
                            </command>
                        </pipeline>
                        <whitespace text=" " />
                        <file_redirect>
                            <">" text=">" />
                            <whitespace text=" " />
                            <word text="/dev/null" />
                        </file_redirect>
                        <whitespace text=" " />
                        <file_redirect>
                            <file_descriptor text="2" />
                            <">&" text=">&" />
                            <number text="1" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="0" />
                    </command>
                </list>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <list>
                        <redirected_statement>
                            <pipeline>
                                <redirected_statement>
                                    <command>
                                        <command_name>
                                            <word text="iwconfig" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="1" />
                                            </simple_expansion>
                                            <"\"" text="\"" />
                                        </string>
                                    </command>
                                    <whitespace text=" " />
                                    <file_redirect>
                                        <file_descriptor text="2" />
                                        <">&" text=">&" />
                                        <number text="1" />
                                    </file_redirect>
                                </redirected_statement>
                                <whitespace text=" " />
                                <"|" text="|" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="grep" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="-E" />
                                    <whitespace text=" " />
                                    <raw_string text="'Access Point: [0-9a-fA-F]{2}:'" />
                                </command>
                            </pipeline>
                            <whitespace text=" " />
                            <file_redirect>
                                <">" text=">" />
                                <whitespace text=" " />
                                <word text="/dev/null" />
                            </file_redirect>
                            <whitespace text=" " />
                            <file_redirect>
                                <file_descriptor text="2" />
                                <">&" text=">&" />
                                <number text="1" />
                            </file_redirect>
                        </redirected_statement>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="0" />
                        </command>
                    </list>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_macaddr" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <redirected_statement>
                <pipeline>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <"|" text="|" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="grep" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-E" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="^([0-9a-fA-F]{2}:){5}[0-9a-fA-F]{2}" />
                            <"$" text="$" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                </pipeline>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <whitespace text=" " />
                    <word text="/dev/null" />
                </file_redirect>
                <whitespace text=" " />
                <file_redirect>
                    <file_descriptor text="2" />
                    <">&" text=">&" />
                    <number text="1" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_unicast_macaddr" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="is_macaddr" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="x" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="1" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="cut" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-d:" />
                            <whitespace text=" " />
                            <word text="-f1" />
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="x" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="printf" />
                        </command_name>
                        <whitespace text=" " />
                        <raw_string text="'%d'" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="0x" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="x" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="expr" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="x" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <word text="%" />
                            <whitespace text=" " />
                            <number text="2" />
                        </command>
                        <")" text=")" />
                    </command_substitution>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_macaddr" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="is_interface" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="cat" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="/sys/class/net/" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="1" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text="/address" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_mtu" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="is_interface" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="cat" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="/sys/class/net/" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="1" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text="/mtu" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="alloc_new_iface" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="prefix" />
                    <"=" text="=" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="1" />
                    </simple_expansion>
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="i" />
                    <"=" text="=" />
                    <number text="0" />
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <while_statement>
                <while text="while" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text=":" />
                    </command_name>
                </command>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <list>
                            <negated_command>
                                <"!" text="!" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="is_interface" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <concatenation>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="prefix" />
                                        </simple_expansion>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="i" />
                                        </simple_expansion>
                                    </concatenation>
                                </command>
                            </negated_command>
                            <whitespace text=" " />
                            <"&&" text="&&" />
                            <whitespace text=" " />
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <unary_expression>
                                    <"!" text="!" />
                                    <whitespace text=" " />
                                    <unary_expression>
                                        <test_operator text="-f" />
                                        <whitespace text=" " />
                                        <concatenation>
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="COMMON_CONFDIR" />
                                            </simple_expansion>
                                            <word text="/ifaces/" />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="prefix" />
                                            </simple_expansion>
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="i" />
                                            </simple_expansion>
                                        </concatenation>
                                    </unary_expression>
                                </unary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                        </list>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="mkdir" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-p" />
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="COMMON_CONFDIR" />
                                </simple_expansion>
                                <word text="/ifaces" />
                            </concatenation>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="touch" />
                            </command_name>
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="COMMON_CONFDIR" />
                                </simple_expansion>
                                <word text="/ifaces/" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="prefix" />
                                </simple_expansion>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="i" />
                                </simple_expansion>
                            </concatenation>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="prefix" />
                                </simple_expansion>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="i" />
                                </simple_expansion>
                            </concatenation>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="mutex_unlock" />
                            </command_name>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                        </command>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="i" />
                        <"=" text="=" />
                        <arithmetic_expansion>
                            <"$((" text="$((" />
                            <binary_expression>
                                <variable_name text="i" />
                                <whitespace text=" " />
                                <"+" text="+" />
                                <whitespace text=" " />
                                <number text="1" />
                            </binary_expression>
                            <"))" text="))" />
                        </arithmetic_expansion>
                    </variable_assignment>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </while_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="dealloc_iface" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="rm" />
                </command_name>
                <whitespace text=" " />
                <word text="-f" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="COMMON_CONFDIR" />
                    </simple_expansion>
                    <word text="/ifaces/" />
                    <"$" text="$" />
                </concatenation>
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_all_macaddrs" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="cat" />
                </command_name>
                <whitespace text=" " />
                <word text="/sys/class/net/*/address" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_new_macaddr" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="OLDMAC" />
                <whitespace text=" " />
                <variable_name text="NEWMAC" />
                <whitespace text=" " />
                <variable_name text="LAST_BYTE" />
                <whitespace text=" " />
                <variable_name text="i" />
            </declaration_command>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="OLDMAC" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_macaddr" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="LAST_BYTE" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="printf" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="%d" />
                        <whitespace text=" " />
                        <concatenation>
                            <word text="0x" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="OLDMAC" />
                                <"##" text="##" />
                                <regex text="*:" />
                                <"}" text="}" />
                            </expansion>
                        </concatenation>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="i" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <brace_expression>
                    <"{" text="{" />
                    <number text="1" />
                    <".." text=".." />
                    <number text="255" />
                    <"}" text="}" />
                </brace_expression>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="NEWMAC" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="OLDMAC" />
                                <"%" text="%" />
                                <regex text=":*" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text=":" />
                            <command_substitution>
                                <"$(" text="$(" />
                                <command>
                                    <command_name>
                                        <word text="printf" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="%02x" />
                                    <whitespace text=" " />
                                    <arithmetic_expansion>
                                        <"$((" text="$((" />
                                        <whitespace text=" " />
                                        <binary_expression>
                                            <parenthesized_expression>
                                                <"(" text="(" />
                                                <binary_expression>
                                                    <simple_expansion>
                                                        <"$" text="$" />
                                                        <variable_name text="LAST_BYTE" />
                                                    </simple_expansion>
                                                    <whitespace text=" " />
                                                    <"+" text="+" />
                                                    <whitespace text=" " />
                                                    <simple_expansion>
                                                        <"$" text="$" />
                                                        <variable_name text="i" />
                                                    </simple_expansion>
                                                </binary_expression>
                                                <")" text=")" />
                                            </parenthesized_expression>
                                            <whitespace text=" " />
                                            <"%" text="%" />
                                            <whitespace text=" " />
                                            <number text="256" />
                                        </binary_expression>
                                        <whitespace text=" " />
                                        <"))" text="))" />
                                    </arithmetic_expansion>
                                </command>
                                <")" text=")" />
                            </command_substitution>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <list>
                        <subshell>
                            <"(" text="(" />
                            <redirected_statement>
                                <pipeline>
                                    <command>
                                        <command_name>
                                            <word text="get_all_macaddrs" />
                                        </command_name>
                                    </command>
                                    <whitespace text=" " />
                                    <"|" text="|" />
                                    <whitespace text=" " />
                                    <command>
                                        <command_name>
                                            <word text="grep" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="NEWMAC" />
                                            </simple_expansion>
                                            <"\"" text="\"" />
                                        </string>
                                    </command>
                                </pipeline>
                                <whitespace text=" " />
                                <file_redirect>
                                    <">" text=">" />
                                    <whitespace text=" " />
                                    <word text="/dev/null" />
                                </file_redirect>
                                <whitespace text=" " />
                                <file_redirect>
                                    <file_descriptor text="2" />
                                    <">&" text=">&" />
                                    <number text="1" />
                                </file_redirect>
                            </redirected_statement>
                            <")" text=")" />
                        </subshell>
                        <whitespace text=" " />
                        <"||" text="||" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="break" />
                            </command_name>
                        </command>
                    </list>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="NEWMAC" />
                </simple_expansion>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# start haveged when needed" />
    <whitespace text="\n" />
    <function_definition>
        <word text="haveged_watchdog" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="show_warn" />
                    <"=" text="=" />
                    <number text="1" />
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n    " />
            <while_statement>
                <while text="while" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text=":" />
                    </command_name>
                </command>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <command_substitution>
                                    <"$(" text="$(" />
                                    <command>
                                        <command_name>
                                            <word text="cat" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="/proc/sys/kernel/random/entropy_avail" />
                                    </command>
                                    <")" text=")" />
                                </command_substitution>
                                <whitespace text=" " />
                                <test_operator text="-lt" />
                                <whitespace text=" " />
                                <number text="1000" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <if_statement>
                            <if text="if" />
                            <whitespace text=" " />
                            <redirected_statement>
                                <negated_command>
                                    <"!" text="!" />
                                    <whitespace text=" " />
                                    <command>
                                        <command_name>
                                            <word text="which" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="haveged" />
                                    </command>
                                </negated_command>
                                <whitespace text=" " />
                                <file_redirect>
                                    <">" text=">" />
                                    <whitespace text=" " />
                                    <word text="/dev/null" />
                                </file_redirect>
                                <whitespace text=" " />
                                <file_redirect>
                                    <file_descriptor text="2" />
                                    <">&" text=">&" />
                                    <number text="1" />
                                </file_redirect>
                            </redirected_statement>
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n                " />
                            <if_statement>
                                <if text="if" />
                                <whitespace text=" " />
                                <test_command>
                                    <"[[" text="[[" />
                                    <whitespace text=" " />
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="show_warn" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <test_operator text="-eq" />
                                        <whitespace text=" " />
                                        <number text="1" />
                                    </binary_expression>
                                    <whitespace text=" " />
                                    <"]]" text="]]" />
                                </test_command>
                                <";" text=";" />
                                <whitespace text=" " />
                                <then text="then" />
                                <whitespace text="\n                    " />
                                <command>
                                    <command_name>
                                        <word text="echo" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="WARN: Low entropy detected. We recommend you to install \\`haveged'" />
                                        <"\"" text="\"" />
                                    </string>
                                </command>
                                <whitespace text="\n                    " />
                                <variable_assignment>
                                    <variable_name text="show_warn" />
                                    <"=" text="=" />
                                    <number text="0" />
                                </variable_assignment>
                                <whitespace text="\n                " />
                                <fi text="fi" />
                            </if_statement>
                            <whitespace text="\n            " />
                            <elif_clause>
                                <elif text="elif" />
                                <whitespace text=" " />
                                <redirected_statement>
                                    <negated_command>
                                        <"!" text="!" />
                                        <whitespace text=" " />
                                        <command>
                                            <command_name>
                                                <word text="pidof" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <word text="haveged" />
                                        </command>
                                    </negated_command>
                                    <whitespace text=" " />
                                    <file_redirect>
                                        <">" text=">" />
                                        <whitespace text=" " />
                                        <word text="/dev/null" />
                                    </file_redirect>
                                    <whitespace text=" " />
                                    <file_redirect>
                                        <file_descriptor text="2" />
                                        <">&" text=">&" />
                                        <number text="1" />
                                    </file_redirect>
                                </redirected_statement>
                                <";" text=";" />
                                <whitespace text=" " />
                                <then text="then" />
                                <whitespace text="\n                " />
                                <command>
                                    <command_name>
                                        <word text="echo" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="Low entropy detected, starting haveged" />
                                        <"\"" text="\"" />
                                    </string>
                                </command>
                                <whitespace text="\n                " />
                                <comment text="# boost low-entropy" />
                                <whitespace text="\n                " />
                                <command>
                                    <command_name>
                                        <word text="mutex_lock" />
                                    </command_name>
                                </command>
                                <whitespace text="\n                " />
                                <command>
                                    <command_name>
                                        <word text="haveged" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="-w" />
                                    <whitespace text=" " />
                                    <number text="1024" />
                                    <whitespace text=" " />
                                    <word text="-p" />
                                    <whitespace text=" " />
                                    <concatenation>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="COMMON_CONFDIR" />
                                        </simple_expansion>
                                        <word text="/haveged.pid" />
                                    </concatenation>
                                </command>
                                <whitespace text="\n                " />
                                <command>
                                    <command_name>
                                        <word text="mutex_unlock" />
                                    </command_name>
                                </command>
                                <whitespace text="\n" />
                            </elif_clause>
                            <whitespace text="            " />
                            <fi text="fi" />
                        </if_statement>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="sleep" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="2" />
                    </command>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </while_statement>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="NETWORKMANAGER_CONF" />
        <"=" text="=" />
        <word text="/etc/NetworkManager/NetworkManager.conf" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="NM_OLDER_VERSION" />
        <"=" text="=" />
        <number text="1" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_exists" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="NM_VER" />
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="which" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="nmcli" />
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/dev/null" />
                    </file_redirect>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="NM_VER" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="nmcli" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-v" />
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-m1" />
                            <whitespace text=" " />
                            <word text="-oE" />
                            <whitespace text=" " />
                            <raw_string text="'[0-9]+(\\.[0-9]+)*\\.[0-9]+'" />
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="version_cmp" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="NM_VER" />
                </simple_expansion>
                <whitespace text=" " />
                <word text="0.9.9" />
            </command>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <special_variable_name text="?" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="NM_OLDER_VERSION" />
                    <"=" text="=" />
                    <number text="1" />
                </variable_assignment>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="NM_OLDER_VERSION" />
                        <"=" text="=" />
                        <number text="0" />
                    </variable_assignment>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_is_running" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="NMCLI_OUT" />
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="networkmanager_exists" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NM_OLDER_VERSION" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="NMCLI_OUT" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <pipeline>
                            <redirected_statement>
                                <command>
                                    <command_name>
                                        <word text="nmcli" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="-t" />
                                    <whitespace text=" " />
                                    <word text="-f" />
                                    <whitespace text=" " />
                                    <word text="RUNNING" />
                                    <whitespace text=" " />
                                    <word text="nm" />
                                </command>
                                <whitespace text=" " />
                                <file_redirect>
                                    <file_descriptor text="2" />
                                    <">&" text=">&" />
                                    <number text="1" />
                                </file_redirect>
                            </redirected_statement>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="grep" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-E" />
                                <whitespace text=" " />
                                <raw_string text="'^running$'" />
                            </command>
                        </pipeline>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="NMCLI_OUT" />
                        <"=" text="=" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <pipeline>
                                <redirected_statement>
                                    <command>
                                        <command_name>
                                            <word text="nmcli" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="-t" />
                                        <whitespace text=" " />
                                        <word text="-f" />
                                        <whitespace text=" " />
                                        <word text="RUNNING" />
                                        <whitespace text=" " />
                                        <word text="g" />
                                    </command>
                                    <whitespace text=" " />
                                    <file_redirect>
                                        <file_descriptor text="2" />
                                        <">&" text=">&" />
                                        <number text="1" />
                                    </file_redirect>
                                </redirected_statement>
                                <whitespace text=" " />
                                <"|" text="|" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="grep" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="-E" />
                                    <whitespace text=" " />
                                    <raw_string text="'^running$'" />
                                </command>
                            </pipeline>
                            <")" text=")" />
                        </command_substitution>
                    </variable_assignment>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-n" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NMCLI_OUT" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_knows_iface" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <comment text="# check if the interface $1 is known to NetworkManager" />
            <whitespace text="\n    " />
            <comment text="# an interface may exist but may not be known to NetworkManager if it is in a different network namespace than NetworkManager" />
            <whitespace text="\n    " />
            <pipeline>
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="nmcli" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-t" />
                        <whitespace text=" " />
                        <word text="-f" />
                        <whitespace text=" " />
                        <word text="DEVICE" />
                        <whitespace text=" " />
                        <word text="d" />
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="grep" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-Fxq" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
            </pipeline>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_iface_is_unmanaged" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="is_interface" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="2" />
                </command>
            </list>
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="networkmanager_knows_iface" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="0" />
                </command>
            </list>
            <whitespace text="\n    " />
            <list>
                <subshell>
                    <"(" text="(" />
                    <redirected_statement>
                        <pipeline>
                            <redirected_statement>
                                <command>
                                    <command_name>
                                        <word text="nmcli" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="-t" />
                                    <whitespace text=" " />
                                    <word text="-f" />
                                    <whitespace text=" " />
                                    <word text="DEVICE,STATE" />
                                    <whitespace text=" " />
                                    <word text="d" />
                                </command>
                                <whitespace text=" " />
                                <file_redirect>
                                    <file_descriptor text="2" />
                                    <">&" text=">&" />
                                    <number text="1" />
                                </file_redirect>
                            </redirected_statement>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="grep" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-E" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="^" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="1" />
                                    </simple_expansion>
                                    <string_content text=":unmanaged" />
                                    <"$" text="$" />
                                    <"\"" text="\"" />
                                </string>
                            </command>
                        </pipeline>
                        <whitespace text=" " />
                        <file_redirect>
                            <">" text=">" />
                            <whitespace text=" " />
                            <word text="/dev/null" />
                        </file_redirect>
                        <whitespace text=" " />
                        <file_redirect>
                            <file_descriptor text="2" />
                            <">&" text=">&" />
                            <number text="1" />
                        </file_redirect>
                    </redirected_statement>
                    <")" text=")" />
                </subshell>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="ADDED_UNMANAGED" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_add_unmanaged" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="MAC" />
                <whitespace text=" " />
                <variable_name text="UNMANAGED" />
                <whitespace text=" " />
                <variable_name text="WAS_EMPTY" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="networkmanager_exists" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-d" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NETWORKMANAGER_CONF" />
                            <"%" text="%" />
                            <regex text="/*" />
                            <"}" text="}" />
                        </expansion>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="mkdir" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="NETWORKMANAGER_CONF" />
                        <"%" text="%" />
                        <regex text="/*" />
                        <"}" text="}" />
                    </expansion>
                </command>
            </list>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-f" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NETWORKMANAGER_CONF" />
                            <"}" text="}" />
                        </expansion>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="touch" />
                    </command_name>
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="NETWORKMANAGER_CONF" />
                        <"}" text="}" />
                    </expansion>
                </command>
            </list>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NM_OLDER_VERSION" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-z" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="2" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="MAC" />
                        <"=" text="=" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="get_macaddr" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="1" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </command>
                            <")" text=")" />
                        </command_substitution>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <else_clause>
                        <else text="else" />
                        <whitespace text="\n            " />
                        <variable_assignment>
                            <variable_name text="MAC" />
                            <"=" text="=" />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="2" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </variable_assignment>
                        <whitespace text="\n" />
                    </else_clause>
                    <whitespace text="        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-z" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="MAC" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                </list>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="UNMANAGED" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="grep" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-m1" />
                        <whitespace text=" " />
                        <word text="-Eo" />
                        <whitespace text=" " />
                        <raw_string text="'^unmanaged-devices=[[:alnum:]:;,?*~=-]*'" />
                        <whitespace text=" " />
                        <word text="/etc/NetworkManager/NetworkManager.conf" />
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n\n    " />
            <variable_assignment>
                <variable_name text="WAS_EMPTY" />
                <"=" text="=" />
                <number text="0" />
            </variable_assignment>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="UNMANAGED" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="WAS_EMPTY" />
                    <"=" text="=" />
                    <number text="1" />
                </variable_assignment>
            </list>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="UNMANAGED" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="UNMANAGED" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="sed" />
                            </command_name>
                            <whitespace text=" " />
                            <raw_string text="'s/unmanaged-devices=//'" />
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="tr" />
                            </command_name>
                            <whitespace text=" " />
                            <raw_string text="';,'" />
                            <whitespace text=" " />
                            <raw_string text="' '" />
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n\n    " />
            <comment text="# if it exists, do nothing" />
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="UNMANAGED" />
                </simple_expansion>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <list>
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <binary_expression>
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="x" />
                                    </simple_expansion>
                                    <whitespace text=" " />
                                    <"==" text="==" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="mac:" />
                                        <expansion>
                                            <"${" text="${" />
                                            <variable_name text="MAC" />
                                            <"}" text="}" />
                                        </expansion>
                                        <"\"" text="\"" />
                                    </string>
                                </binary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                            <whitespace text=" " />
                            <"||" text="||" />
                            <whitespace text="\n               " />
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <binary_expression>
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="NM_OLDER_VERSION" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <test_operator text="-eq" />
                                        <whitespace text=" " />
                                        <number text="0" />
                                    </binary_expression>
                                    <whitespace text=" " />
                                    <"&&" text="&&" />
                                    <whitespace text=" " />
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <"==" text="==" />
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <string_content text="interface-name:" />
                                            <expansion>
                                                <"${" text="${" />
                                                <variable_name text="1" />
                                                <"}" text="}" />
                                            </expansion>
                                            <"\"" text="\"" />
                                        </string>
                                    </binary_expression>
                                </binary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                        </list>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="mutex_unlock" />
                            </command_name>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="2" />
                        </command>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NM_OLDER_VERSION" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="UNMANAGED" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="UNMANAGED" />
                            <"}" text="}" />
                        </expansion>
                        <string_content text=" mac:" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="MAC" />
                            <"}" text="}" />
                        </expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="UNMANAGED" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="UNMANAGED" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text=" interface-name:" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="1" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <variable_assignment>
                <variable_name text="UNMANAGED" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="UNMANAGED" />
                            </simple_expansion>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="sed" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-e" />
                            <whitespace text=" " />
                            <raw_string text="'s/^ //'" />
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="UNMANAGED" />
                <"=" text="=" />
                <string>
                    <"\"" text="\"" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="UNMANAGED" />
                        <"//" text="//" />
                        <regex text=" " />
                        <"/" text="/" />
                        <word text=";" />
                        <"}" text="}" />
                    </expansion>
                    <"\"" text="\"" />
                </string>
            </variable_assignment>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="UNMANAGED" />
                <"=" text="=" />
                <string>
                    <"\"" text="\"" />
                    <string_content text="unmanaged-devices=" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="UNMANAGED" />
                        <"}" text="}" />
                    </expansion>
                    <"\"" text="\"" />
                </string>
            </variable_assignment>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <redirected_statement>
                    <negated_command>
                        <"!" text="!" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-E" />
                            <whitespace text=" " />
                            <raw_string text="'^\\[keyfile\\]'" />
                            <whitespace text=" " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="NETWORKMANAGER_CONF" />
                                <"}" text="}" />
                            </expansion>
                        </command>
                    </negated_command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/dev/null" />
                    </file_redirect>
                    <whitespace text=" " />
                    <file_redirect>
                        <file_descriptor text="2" />
                        <">&" text=">&" />
                        <number text="1" />
                    </file_redirect>
                </redirected_statement>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-e" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="\\n\\n[keyfile]\\n" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="UNMANAGED" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">>" text=">>" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NETWORKMANAGER_CONF" />
                            <"}" text="}" />
                        </expansion>
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="WAS_EMPTY" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="1" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="sed" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-e" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="s/^\\(\\[keyfile\\].*\\)" />
                            <"$" text="$" />
                            <string_content text="/\\1\\n" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="UNMANAGED" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text="/" />
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <word text="-i" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NETWORKMANAGER_CONF" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="sed" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-e" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="s/^unmanaged-devices=.*/" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="UNMANAGED" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text="/" />
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <word text="-i" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NETWORKMANAGER_CONF" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <variable_assignment>
                <variable_name text="ADDED_UNMANAGED" />
                <"=" text="=" />
                <string>
                    <"\"" text="\"" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="ADDED_UNMANAGED" />
                        <"}" text="}" />
                    </expansion>
                    <expansion>
                        <"${" text=" ${" />
                        <variable_name text="1" />
                        <"}" text="}" />
                    </expansion>
                    <"\"" text=" \"" />
                </string>
            </variable_assignment>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="nm_pid" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="pidof" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="NetworkManager" />
                        </command>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="nm_pid" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="kill" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-HUP" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="nm_pid" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_rm_unmanaged" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="MAC" />
                <whitespace text=" " />
                <variable_name text="UNMANAGED" />
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="networkmanager_exists" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <"!" text="!" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-f" />
                            <whitespace text=" " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="NETWORKMANAGER_CONF" />
                                <"}" text="}" />
                            </expansion>
                        </unary_expression>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NM_OLDER_VERSION" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-z" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="2" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="MAC" />
                        <"=" text="=" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="get_macaddr" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="1" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </command>
                            <")" text=")" />
                        </command_substitution>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <else_clause>
                        <else text="else" />
                        <whitespace text="\n            " />
                        <variable_assignment>
                            <variable_name text="MAC" />
                            <"=" text="=" />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="2" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </variable_assignment>
                        <whitespace text="\n" />
                    </else_clause>
                    <whitespace text="        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-z" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="MAC" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                </list>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="UNMANAGED" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-m1" />
                            <whitespace text=" " />
                            <word text="-Eo" />
                            <whitespace text=" " />
                            <raw_string text="'^unmanaged-devices=[[:alnum:]:;,?*~=-]*'" />
                            <whitespace text=" " />
                            <word text="/etc/NetworkManager/NetworkManager.conf" />
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="sed" />
                            </command_name>
                            <whitespace text=" " />
                            <raw_string text="'s/unmanaged-devices=//'" />
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="tr" />
                            </command_name>
                            <whitespace text=" " />
                            <raw_string text="';,'" />
                            <whitespace text=" " />
                            <raw_string text="' '" />
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="UNMANAGED" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="mutex_unlock" />
                    </command_name>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="MAC" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="UNMANAGED" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <pipeline>
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="UNMANAGED" />
                                </simple_expansion>
                            </command>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="sed" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-e" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="s/mac:" />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="MAC" />
                                        <"}" text="}" />
                                    </expansion>
                                    <string_content text="\\( \\|" />
                                    <"$" text="$" />
                                    <string_content text="\\)//g" />
                                    <"\"" text="\"" />
                                </string>
                            </command>
                        </pipeline>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
            </list>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="UNMANAGED" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="UNMANAGED" />
                            </simple_expansion>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="sed" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-e" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="s/interface-name:" />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="1" />
                                    <"}" text="}" />
                                </expansion>
                                <string_content text="\\( \\|" />
                                <"$" text="$" />
                                <string_content text="\\)//g" />
                                <"\"" text="\"" />
                            </string>
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="UNMANAGED" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="UNMANAGED" />
                            </simple_expansion>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="sed" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-e" />
                            <whitespace text=" " />
                            <raw_string text="'s/ $//'" />
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="UNMANAGED" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="sed" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-e" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="/^unmanaged-devices=.*/d" />
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <word text="-i" />
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="NETWORKMANAGER_CONF" />
                        <"}" text="}" />
                    </expansion>
                </command>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="UNMANAGED" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="UNMANAGED" />
                                <"//" text="//" />
                                <regex text=" " />
                                <"/" text="/" />
                                <word text=";" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="UNMANAGED" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="unmanaged-devices=" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="UNMANAGED" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="sed" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-e" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="s/^unmanaged-devices=.*/" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="UNMANAGED" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text="/" />
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <word text="-i" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NETWORKMANAGER_CONF" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <variable_assignment>
                <variable_name text="ADDED_UNMANAGED" />
                <"=" text="=" />
                <string>
                    <"\"" text="\"" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="ADDED_UNMANAGED" />
                        <"/" text="/" />
                        <regex text=" ${1} " />
                        <"/" text="/" />
                        <"}" text="}" />
                    </expansion>
                    <"\"" text="\"" />
                </string>
            </variable_assignment>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="nm_pid" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="pidof" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="NetworkManager" />
                        </command>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="nm_pid" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="kill" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-HUP" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="nm_pid" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_fix_unmanaged" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-f" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NETWORKMANAGER_CONF" />
                            <"}" text="}" />
                        </expansion>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="sed" />
                </command_name>
                <whitespace text=" " />
                <word text="-e" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="/^unmanaged-devices=.*/d" />
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <word text="-i" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="NETWORKMANAGER_CONF" />
                    <"}" text="}" />
                </expansion>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="nm_pid" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="pidof" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="NetworkManager" />
                        </command>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="nm_pid" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="kill" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-HUP" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="nm_pid" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_rm_unmanaged_if_needed" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="ADDED_UNMANAGED" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <"=~" text="=~" />
                        <whitespace text=" " />
                        <regex text=".*\\ ${1}\\ .*" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="networkmanager_rm_unmanaged" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="1" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="2" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="networkmanager_wait_until_unmanaged" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="RES" />
            </declaration_command>
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="networkmanager_is_running" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
            </list>
            <whitespace text="\n    " />
            <while_statement>
                <while text="while" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text=":" />
                    </command_name>
                </command>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="networkmanager_iface_is_unmanaged" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="RES" />
                        <"=" text="=" />
                        <simple_expansion>
                            <"$" text="$" />
                            <special_variable_name text="?" />
                        </simple_expansion>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <list>
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="RES" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-eq" />
                                <whitespace text=" " />
                                <number text="0" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="break" />
                            </command_name>
                        </command>
                    </list>
                    <whitespace text="\n        " />
                    <list>
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="RES" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-eq" />
                                <whitespace text=" " />
                                <number text="2" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="die" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="Interface '" />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="1" />
                                    <"}" text="}" />
                                </expansion>
                                <string_content text="' does not exist." />
                                <whitespace text="\n" />
                                <string_content text="       It's probably renamed by a udev rule." />
                                <"\"" text="\"" />
                            </string>
                        </command>
                    </list>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="sleep" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </while_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="sleep" />
                </command_name>
                <whitespace text=" " />
                <number text="2" />
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n\n" />
    <variable_assignment>
        <variable_name text="CHANNEL" />
        <"=" text="=" />
        <word text="default" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="GATEWAY" />
        <"=" text="=" />
        <word text="192.168.12.1" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="WPA_VERSION" />
        <"=" text="=" />
        <number text="2" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="ETC_HOSTS" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="ADDN_HOSTS" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="DHCP_HOSTS" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="DHCP_DNS" />
        <"=" text="=" />
        <word text="gateway" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="NO_DNS" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="NO_DNSMASQ" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="DNS_PORT" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="HIDDEN" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="MAC_FILTER" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="MAC_FILTER_ACCEPT" />
        <"=" text="=" />
        <word text="/etc/hostapd/hostapd.accept" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="ISOLATE_CLIENTS" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="SHARE_METHOD" />
        <"=" text="=" />
        <word text="nat" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="IEEE80211N" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="IEEE80211AC" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="IEEE80211AX" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="HT_CAPAB" />
        <"=" text="=" />
        <raw_string text="'[HT40+]'" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="VHT_CAPAB" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="DRIVER" />
        <"=" text="=" />
        <word text="nl80211" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="NO_VIRT" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="COUNTRY" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="FREQ_BAND" />
        <"=" text="=" />
        <word text="2.4" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="NEW_MACADDR" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="DAEMONIZE" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="DAEMON_PIDFILE" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="DAEMON_LOGFILE" />
        <"=" text="=" />
        <word text="/dev/null" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="DNS_LOGFILE" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="NO_HAVEGED" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="USE_PSK" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="HOSTAPD_DEBUG_ARGS" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="REDIRECT_TO_LOCALHOST" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="CONFIG_OPTS" />
        <"=" text="=" />
        <array>
            <"(" text="(" />
            <word text="CHANNEL" />
            <whitespace text=" " />
            <word text="GATEWAY" />
            <whitespace text=" " />
            <word text="WPA_VERSION" />
            <whitespace text=" " />
            <word text="ETC_HOSTS" />
            <whitespace text=" " />
            <word text="DHCP_DNS" />
            <whitespace text=" " />
            <word text="NO_DNS" />
            <whitespace text=" " />
            <word text="NO_DNSMASQ" />
            <whitespace text=" " />
            <word text="HIDDEN" />
            <whitespace text=" " />
            <word text="MAC_FILTER" />
            <whitespace text=" " />
            <word text="MAC_FILTER_ACCEPT" />
            <whitespace text=" " />
            <word text="ISOLATE_CLIENTS" />
            <whitespace text="\n             " />
            <word text="SHARE_METHOD" />
            <whitespace text=" " />
            <word text="IEEE80211N" />
            <whitespace text=" " />
            <word text="IEEE80211AC" />
            <whitespace text=" " />
            <word text="IEEE80211AX" />
            <whitespace text=" " />
            <word text="HT_CAPAB" />
            <whitespace text=" " />
            <word text="VHT_CAPAB" />
            <whitespace text=" " />
            <word text="DRIVER" />
            <whitespace text=" " />
            <word text="NO_VIRT" />
            <whitespace text=" " />
            <word text="COUNTRY" />
            <whitespace text=" " />
            <word text="FREQ_BAND" />
            <whitespace text="\n             " />
            <word text="NEW_MACADDR" />
            <whitespace text=" " />
            <word text="DAEMONIZE" />
            <whitespace text=" " />
            <word text="DAEMON_PIDFILE" />
            <whitespace text=" " />
            <word text="DAEMON_LOGFILE" />
            <whitespace text=" " />
            <word text="DNS_LOGFILE" />
            <whitespace text=" " />
            <word text="NO_HAVEGED" />
            <whitespace text=" " />
            <word text="WIFI_IFACE" />
            <whitespace text=" " />
            <word text="INTERNET_IFACE" />
            <whitespace text="\n             " />
            <word text="SSID" />
            <whitespace text=" " />
            <word text="PASSPHRASE" />
            <whitespace text=" " />
            <word text="USE_PSK" />
            <whitespace text=" " />
            <word text="ADDN_HOSTS" />
            <whitespace text=" " />
            <word text="DHCP_HOSTS" />
            <")" text=")" />
        </array>
    </variable_assignment>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="FIX_UNMANAGED" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="LIST_RUNNING" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="STOP_ID" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="LIST_CLIENTS_ID" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="STORE_CONFIG" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="LOAD_CONFIG" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="CONFDIR" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="WIFI_IFACE" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="VWIFI_IFACE" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="INTERNET_IFACE" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="BRIDGE_IFACE" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="OLD_MACADDR" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="IP_ADDRS" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="ROUTE_ADDRS" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="HAVEGED_WATCHDOG_PID" />
        <"=" text="=" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="_cleanup" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="PID" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="trap" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <word text="SIGINT" />
                <whitespace text=" " />
                <word text="SIGUSR1" />
                <whitespace text=" " />
                <word text="SIGUSR2" />
                <whitespace text=" " />
                <word text="EXIT" />
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="disown" />
                </command_name>
                <whitespace text=" " />
                <word text="-a" />
            </command>
            <whitespace text="\n\n    " />
            <comment text="# kill haveged_watchdog" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="HAVEGED_WATCHDOG_PID" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="kill" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="HAVEGED_WATCHDOG_PID" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n\n    " />
            <comment text="# kill processes" />
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/*.pid" />
                </concatenation>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <comment text="# even if the $CONFDIR is empty, the for loop will assign" />
                    <whitespace text="\n        " />
                    <comment text="# a value in $x. so we need to check if the value is a file" />
                    <whitespace text="\n        " />
                    <list>
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <unary_expression>
                                <test_operator text="-f" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="x" />
                                </simple_expansion>
                            </unary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="kill" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="-9" />
                            <whitespace text=" " />
                            <command_substitution>
                                <"$(" text="$(" />
                                <command>
                                    <command_name>
                                        <word text="cat" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="x" />
                                    </simple_expansion>
                                </command>
                                <")" text=")" />
                            </command_substitution>
                        </command>
                    </list>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="rm" />
                </command_name>
                <whitespace text=" " />
                <word text="-rf" />
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="CONFDIR" />
                </simple_expansion>
            </command>
            <whitespace text="\n\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="found" />
                    <"=" text="=" />
                    <number text="0" />
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="list_running_conf" />
                        </command_name>
                    </command>
                    <")" text=")" />
                </command_substitution>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <unary_expression>
                                    <test_operator text="-f" />
                                    <whitespace text=" " />
                                    <concatenation>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <word text="/nat_internet_iface" />
                                    </concatenation>
                                </unary_expression>
                                <whitespace text=" " />
                                <"&&" text="&&" />
                                <whitespace text=" " />
                                <binary_expression>
                                    <command_substitution>
                                        <"$(" text="$(" />
                                        <command>
                                            <command_name>
                                                <word text="cat" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <concatenation>
                                                <simple_expansion>
                                                    <"$" text="$" />
                                                    <variable_name text="x" />
                                                </simple_expansion>
                                                <word text="/nat_internet_iface" />
                                            </concatenation>
                                        </command>
                                        <")" text=")" />
                                    </command_substitution>
                                    <whitespace text=" " />
                                    <"==" text="==" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="INTERNET_IFACE" />
                                    </simple_expansion>
                                </binary_expression>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <variable_assignment>
                            <variable_name text="found" />
                            <"=" text="=" />
                            <number text="1" />
                        </variable_assignment>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="break" />
                            </command_name>
                        </command>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="found" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="cp" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-f" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="COMMON_CONFDIR" />
                        </simple_expansion>
                        <word text="/" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="INTERNET_IFACE" />
                            <"}" text="}" />
                        </expansion>
                        <word text="_forwarding" />
                    </concatenation>
                    <whitespace text=" \\" />
                    <whitespace text="\n           " />
                    <concatenation>
                        <word text="/proc/sys/net/ipv4/conf/" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="INTERNET_IFACE" />
                        </simple_expansion>
                        <word text="/forwarding" />
                    </concatenation>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="rm" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-f" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="COMMON_CONFDIR" />
                        </simple_expansion>
                        <word text="/" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="INTERNET_IFACE" />
                            <"}" text="}" />
                        </expansion>
                        <word text="_forwarding" />
                    </concatenation>
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <comment text="# if we are the last create_ap instance then set back the common values" />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <negated_command>
                    <"!" text="!" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="has_running_instance" />
                        </command_name>
                    </command>
                </negated_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <comment text="# kill common processes" />
                <whitespace text="\n        " />
                <for_statement>
                    <for text="for" />
                    <whitespace text=" " />
                    <variable_name text="x" />
                    <whitespace text=" " />
                    <in text="in" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="COMMON_CONFDIR" />
                        </simple_expansion>
                        <word text="/*.pid" />
                    </concatenation>
                    <";" text=";" />
                    <whitespace text=" " />
                    <do_group>
                        <do text="do" />
                        <whitespace text="\n            " />
                        <list>
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <unary_expression>
                                    <test_operator text="-f" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="x" />
                                    </simple_expansion>
                                </unary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                            <whitespace text=" " />
                            <"&&" text="&&" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="kill" />
                                </command_name>
                                <whitespace text=" " />
                                <number text="-9" />
                                <whitespace text=" " />
                                <command_substitution>
                                    <"$(" text="$(" />
                                    <command>
                                        <command_name>
                                            <word text="cat" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                    </command>
                                    <")" text=")" />
                                </command_substitution>
                            </command>
                        </list>
                        <whitespace text="\n        " />
                        <done text="done" />
                    </do_group>
                </for_statement>
                <whitespace text="\n\n        " />
                <comment text="# set old ip_forward" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-f" />
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="COMMON_CONFDIR" />
                                </simple_expansion>
                                <word text="/ip_forward" />
                            </concatenation>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="cp" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-f" />
                        <whitespace text=" " />
                        <concatenation>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="COMMON_CONFDIR" />
                            </simple_expansion>
                            <word text="/ip_forward" />
                        </concatenation>
                        <whitespace text=" " />
                        <word text="/proc/sys/net/ipv4" />
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="rm" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-f" />
                        <whitespace text=" " />
                        <concatenation>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="COMMON_CONFDIR" />
                            </simple_expansion>
                            <word text="/ip_forward" />
                        </concatenation>
                    </command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n\n        " />
                <comment text="# set old bridge-nf-call-iptables" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-f" />
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="COMMON_CONFDIR" />
                                </simple_expansion>
                                <word text="/bridge-nf-call-iptables" />
                            </concatenation>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <unary_expression>
                                <test_operator text="-e" />
                                <whitespace text=" " />
                                <word text="/proc/sys/net/bridge/bridge-nf-call-iptables" />
                            </unary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n                " />
                        <command>
                            <command_name>
                                <word text="cp" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-f" />
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="COMMON_CONFDIR" />
                                </simple_expansion>
                                <word text="/bridge-nf-call-iptables" />
                            </concatenation>
                            <whitespace text=" " />
                            <word text="/proc/sys/net/bridge" />
                        </command>
                        <whitespace text="\n            " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="rm" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-f" />
                        <whitespace text=" " />
                        <concatenation>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="COMMON_CONFDIR" />
                            </simple_expansion>
                            <word text="/bridge-nf-call-iptables" />
                        </concatenation>
                    </command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n\n        " />
                <command>
                    <command_name>
                        <word text="rm" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-rf" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="COMMON_CONFDIR" />
                    </simple_expansion>
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="SHARE_METHOD" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"!=" text="!=" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="none" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="SHARE_METHOD" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                            <whitespace text=" " />
                            <"==" text="==" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="nat" />
                                <"\"" text="\"" />
                            </string>
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="iptables" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-w" />
                        <whitespace text=" " />
                        <word text="-t" />
                        <whitespace text=" " />
                        <word text="nat" />
                        <whitespace text=" " />
                        <word text="-D" />
                        <whitespace text=" " />
                        <word text="POSTROUTING" />
                        <whitespace text=" " />
                        <word text="-s" />
                        <whitespace text=" " />
                        <concatenation>
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="GATEWAY" />
                                <"%" text="%" />
                                <regex text=".*" />
                                <"}" text="}" />
                            </expansion>
                            <word text=".0/24" />
                        </concatenation>
                        <whitespace text=" " />
                        <word text="!" />
                        <whitespace text=" " />
                        <word text="-o" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <word text="-j" />
                        <whitespace text=" " />
                        <word text="MASQUERADE" />
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="iptables" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-w" />
                        <whitespace text=" " />
                        <word text="-D" />
                        <whitespace text=" " />
                        <word text="FORWARD" />
                        <whitespace text=" " />
                        <word text="-i" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <word text="-s" />
                        <whitespace text=" " />
                        <concatenation>
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="GATEWAY" />
                                <"%" text="%" />
                                <regex text=".*" />
                                <"}" text="}" />
                            </expansion>
                            <word text=".0/24" />
                        </concatenation>
                        <whitespace text=" " />
                        <word text="-j" />
                        <whitespace text=" " />
                        <word text="ACCEPT" />
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="iptables" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-w" />
                        <whitespace text=" " />
                        <word text="-D" />
                        <whitespace text=" " />
                        <word text="FORWARD" />
                        <whitespace text=" " />
                        <word text="-i" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="INTERNET_IFACE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <word text="-d" />
                        <whitespace text=" " />
                        <concatenation>
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="GATEWAY" />
                                <"%" text="%" />
                                <regex text=".*" />
                                <"}" text="}" />
                            </expansion>
                            <word text=".0/24" />
                        </concatenation>
                        <whitespace text=" " />
                        <word text="-j" />
                        <whitespace text=" " />
                        <word text="ACCEPT" />
                    </command>
                    <whitespace text="\n        " />
                    <elif_clause>
                        <elif text="elif" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="SHARE_METHOD" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <"==" text="==" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="bridge" />
                                    <"\"" text="\"" />
                                </string>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <if_statement>
                            <if text="if" />
                            <whitespace text=" " />
                            <negated_command>
                                <"!" text="!" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="is_bridge_interface" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="INTERNET_IFACE" />
                                    </simple_expansion>
                                </command>
                            </negated_command>
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="ip" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="link" />
                                <whitespace text=" " />
                                <word text="set" />
                                <whitespace text=" " />
                                <word text="dev" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="BRIDGE_IFACE" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <word text="down" />
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="ip" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="link" />
                                <whitespace text=" " />
                                <word text="set" />
                                <whitespace text=" " />
                                <word text="dev" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="INTERNET_IFACE" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <word text="down" />
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="ip" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="link" />
                                <whitespace text=" " />
                                <word text="set" />
                                <whitespace text=" " />
                                <word text="dev" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="INTERNET_IFACE" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <word text="promisc" />
                                <whitespace text=" " />
                                <word text="off" />
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="ip" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="link" />
                                <whitespace text=" " />
                                <word text="set" />
                                <whitespace text=" " />
                                <word text="dev" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="INTERNET_IFACE" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <word text="nomaster" />
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="ip" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="link" />
                                <whitespace text=" " />
                                <word text="delete" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="BRIDGE_IFACE" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <word text="type" />
                                <whitespace text=" " />
                                <word text="bridge" />
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="ip" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="addr" />
                                <whitespace text=" " />
                                <word text="flush" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="INTERNET_IFACE" />
                                </simple_expansion>
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="ip" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="link" />
                                <whitespace text=" " />
                                <word text="set" />
                                <whitespace text=" " />
                                <word text="dev" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="INTERNET_IFACE" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <word text="up" />
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="dealloc_iface" />
                                </command_name>
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="BRIDGE_IFACE" />
                                </simple_expansion>
                            </command>
                            <whitespace text="\n\n                " />
                            <for_statement>
                                <for text="for" />
                                <whitespace text=" " />
                                <variable_name text="x" />
                                <whitespace text=" " />
                                <in text="in" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <subscript>
                                            <variable_name text="IP_ADDRS" />
                                            <"[" text="[" />
                                            <word text="@" />
                                            <"]" text="]" />
                                        </subscript>
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                                <";" text=";" />
                                <whitespace text=" " />
                                <do_group>
                                    <do text="do" />
                                    <whitespace text="\n                    " />
                                    <variable_assignment>
                                        <variable_name text="x" />
                                        <"=" text="=" />
                                        <string>
                                            <"\"" text="\"" />
                                            <expansion>
                                                <"${" text="${" />
                                                <variable_name text="x" />
                                                <"/" text="/" />
                                                <regex text="inet" />
                                                <"/" text="/" />
                                                <"}" text="}" />
                                            </expansion>
                                            <"\"" text="\"" />
                                        </string>
                                    </variable_assignment>
                                    <whitespace text="\n                    " />
                                    <variable_assignment>
                                        <variable_name text="x" />
                                        <"=" text="=" />
                                        <string>
                                            <"\"" text="\"" />
                                            <expansion>
                                                <"${" text="${" />
                                                <variable_name text="x" />
                                                <"/" text="/" />
                                                <regex text="secondary" />
                                                <"/" text="/" />
                                                <"}" text="}" />
                                            </expansion>
                                            <"\"" text="\"" />
                                        </string>
                                    </variable_assignment>
                                    <whitespace text="\n                    " />
                                    <variable_assignment>
                                        <variable_name text="x" />
                                        <"=" text="=" />
                                        <string>
                                            <"\"" text="\"" />
                                            <expansion>
                                                <"${" text="${" />
                                                <variable_name text="x" />
                                                <"/" text="/" />
                                                <regex text="dynamic" />
                                                <"/" text="/" />
                                                <"}" text="}" />
                                            </expansion>
                                            <"\"" text="\"" />
                                        </string>
                                    </variable_assignment>
                                    <whitespace text="\n                    " />
                                    <variable_assignment>
                                        <variable_name text="x" />
                                        <"=" text="=" />
                                        <command_substitution>
                                            <"$(" text="$(" />
                                            <pipeline>
                                                <command>
                                                    <command_name>
                                                        <word text="echo" />
                                                    </command_name>
                                                    <whitespace text=" " />
                                                    <simple_expansion>
                                                        <"$" text="$" />
                                                        <variable_name text="x" />
                                                    </simple_expansion>
                                                </command>
                                                <whitespace text=" " />
                                                <"|" text="|" />
                                                <whitespace text=" " />
                                                <command>
                                                    <command_name>
                                                        <word text="sed" />
                                                    </command_name>
                                                    <whitespace text=" " />
                                                    <raw_string text="'s/\\([0-9]\\)sec/\\1/g'" />
                                                </command>
                                            </pipeline>
                                            <")" text=")" />
                                        </command_substitution>
                                    </variable_assignment>
                                    <whitespace text="\n                    " />
                                    <variable_assignment>
                                        <variable_name text="x" />
                                        <"=" text="=" />
                                        <string>
                                            <"\"" text="\"" />
                                            <expansion>
                                                <"${" text="${" />
                                                <variable_name text="x" />
                                                <"/" text="/" />
                                                <regex text="${INTERNET_IFACE}" />
                                                <"/" text="/" />
                                                <"}" text="}" />
                                            </expansion>
                                            <"\"" text="\"" />
                                        </string>
                                    </variable_assignment>
                                    <whitespace text="\n                    " />
                                    <command>
                                        <command_name>
                                            <word text="ip" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="addr" />
                                        <whitespace text=" " />
                                        <word text="add" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <word text="dev" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="INTERNET_IFACE" />
                                        </simple_expansion>
                                    </command>
                                    <whitespace text="\n                " />
                                    <done text="done" />
                                </do_group>
                            </for_statement>
                            <whitespace text="\n\n                " />
                            <command>
                                <command_name>
                                    <word text="ip" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="route" />
                                <whitespace text=" " />
                                <word text="flush" />
                                <whitespace text=" " />
                                <word text="dev" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="INTERNET_IFACE" />
                                </simple_expansion>
                            </command>
                            <whitespace text="\n\n                " />
                            <for_statement>
                                <for text="for" />
                                <whitespace text=" " />
                                <variable_name text="x" />
                                <whitespace text=" " />
                                <in text="in" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <subscript>
                                            <variable_name text="ROUTE_ADDRS" />
                                            <"[" text="[" />
                                            <word text="@" />
                                            <"]" text="]" />
                                        </subscript>
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                                <";" text=";" />
                                <whitespace text=" " />
                                <do_group>
                                    <do text="do" />
                                    <whitespace text="\n                    " />
                                    <list>
                                        <test_command>
                                            <"[[" text="[[" />
                                            <whitespace text=" " />
                                            <unary_expression>
                                                <test_operator text="-z" />
                                                <whitespace text=" " />
                                                <string>
                                                    <"\"" text="\"" />
                                                    <simple_expansion>
                                                        <"$" text="$" />
                                                        <variable_name text="x" />
                                                    </simple_expansion>
                                                    <"\"" text="\"" />
                                                </string>
                                            </unary_expression>
                                            <whitespace text=" " />
                                            <"]]" text="]]" />
                                        </test_command>
                                        <whitespace text=" " />
                                        <"&&" text="&&" />
                                        <whitespace text=" " />
                                        <command>
                                            <command_name>
                                                <word text="continue" />
                                            </command_name>
                                        </command>
                                    </list>
                                    <whitespace text="\n                    " />
                                    <list>
                                        <test_command>
                                            <"[[" text="[[" />
                                            <whitespace text=" " />
                                            <binary_expression>
                                                <string>
                                                    <"\"" text="\"" />
                                                    <simple_expansion>
                                                        <"$" text="$" />
                                                        <variable_name text="x" />
                                                    </simple_expansion>
                                                    <"\"" text="\"" />
                                                </string>
                                                <whitespace text=" " />
                                                <"==" text="==" />
                                                <whitespace text=" " />
                                                <extglob_pattern text="default*" />
                                            </binary_expression>
                                            <whitespace text=" " />
                                            <"]]" text="]]" />
                                        </test_command>
                                        <whitespace text=" " />
                                        <"&&" text="&&" />
                                        <whitespace text=" " />
                                        <command>
                                            <command_name>
                                                <word text="continue" />
                                            </command_name>
                                        </command>
                                    </list>
                                    <whitespace text="\n                    " />
                                    <command>
                                        <command_name>
                                            <word text="ip" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="route" />
                                        <whitespace text=" " />
                                        <word text="add" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <word text="dev" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="INTERNET_IFACE" />
                                        </simple_expansion>
                                    </command>
                                    <whitespace text="\n                " />
                                    <done text="done" />
                                </do_group>
                            </for_statement>
                            <whitespace text="\n\n                " />
                            <for_statement>
                                <for text="for" />
                                <whitespace text=" " />
                                <variable_name text="x" />
                                <whitespace text=" " />
                                <in text="in" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <subscript>
                                            <variable_name text="ROUTE_ADDRS" />
                                            <"[" text="[" />
                                            <word text="@" />
                                            <"]" text="]" />
                                        </subscript>
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                                <";" text=";" />
                                <whitespace text=" " />
                                <do_group>
                                    <do text="do" />
                                    <whitespace text="\n                    " />
                                    <list>
                                        <test_command>
                                            <"[[" text="[[" />
                                            <whitespace text=" " />
                                            <unary_expression>
                                                <test_operator text="-z" />
                                                <whitespace text=" " />
                                                <string>
                                                    <"\"" text="\"" />
                                                    <simple_expansion>
                                                        <"$" text="$" />
                                                        <variable_name text="x" />
                                                    </simple_expansion>
                                                    <"\"" text="\"" />
                                                </string>
                                            </unary_expression>
                                            <whitespace text=" " />
                                            <"]]" text="]]" />
                                        </test_command>
                                        <whitespace text=" " />
                                        <"&&" text="&&" />
                                        <whitespace text=" " />
                                        <command>
                                            <command_name>
                                                <word text="continue" />
                                            </command_name>
                                        </command>
                                    </list>
                                    <whitespace text="\n                    " />
                                    <list>
                                        <test_command>
                                            <"[[" text="[[" />
                                            <whitespace text=" " />
                                            <binary_expression>
                                                <string>
                                                    <"\"" text="\"" />
                                                    <simple_expansion>
                                                        <"$" text="$" />
                                                        <variable_name text="x" />
                                                    </simple_expansion>
                                                    <"\"" text="\"" />
                                                </string>
                                                <whitespace text=" " />
                                                <"!=" text="!=" />
                                                <whitespace text=" " />
                                                <extglob_pattern text="default*" />
                                            </binary_expression>
                                            <whitespace text=" " />
                                            <"]]" text="]]" />
                                        </test_command>
                                        <whitespace text=" " />
                                        <"&&" text="&&" />
                                        <whitespace text=" " />
                                        <command>
                                            <command_name>
                                                <word text="continue" />
                                            </command_name>
                                        </command>
                                    </list>
                                    <whitespace text="\n                    " />
                                    <command>
                                        <command_name>
                                            <word text="ip" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="route" />
                                        <whitespace text=" " />
                                        <word text="add" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <word text="dev" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="INTERNET_IFACE" />
                                        </simple_expansion>
                                    </command>
                                    <whitespace text="\n                " />
                                    <done text="done" />
                                </do_group>
                            </for_statement>
                            <whitespace text="\n\n                " />
                            <command>
                                <command_name>
                                    <word text="networkmanager_rm_unmanaged_if_needed" />
                                </command_name>
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="INTERNET_IFACE" />
                                </simple_expansion>
                            </command>
                            <whitespace text="\n            " />
                            <fi text="fi" />
                        </if_statement>
                        <whitespace text="\n" />
                    </elif_clause>
                    <whitespace text="        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="SHARE_METHOD" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"!=" text="!=" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="bridge" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="NO_DNS" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="0" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="iptables" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-w" />
                        <whitespace text=" " />
                        <word text="-D" />
                        <whitespace text=" " />
                        <word text="INPUT" />
                        <whitespace text=" " />
                        <word text="-p" />
                        <whitespace text=" " />
                        <word text="tcp" />
                        <whitespace text=" " />
                        <word text="-m" />
                        <whitespace text=" " />
                        <word text="tcp" />
                        <whitespace text=" " />
                        <word text="--dport" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="DNS_PORT" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <word text="-j" />
                        <whitespace text=" " />
                        <word text="ACCEPT" />
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="iptables" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-w" />
                        <whitespace text=" " />
                        <word text="-D" />
                        <whitespace text=" " />
                        <word text="INPUT" />
                        <whitespace text=" " />
                        <word text="-p" />
                        <whitespace text=" " />
                        <word text="udp" />
                        <whitespace text=" " />
                        <word text="-m" />
                        <whitespace text=" " />
                        <word text="udp" />
                        <whitespace text=" " />
                        <word text="--dport" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="DNS_PORT" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <word text="-j" />
                        <whitespace text=" " />
                        <word text="ACCEPT" />
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="iptables" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-w" />
                        <whitespace text=" " />
                        <word text="-t" />
                        <whitespace text=" " />
                        <word text="nat" />
                        <whitespace text=" " />
                        <word text="-D" />
                        <whitespace text=" " />
                        <word text="PREROUTING" />
                        <whitespace text=" " />
                        <word text="-s" />
                        <whitespace text=" " />
                        <concatenation>
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="GATEWAY" />
                                <"%" text="%" />
                                <regex text=".*" />
                                <"}" text="}" />
                            </expansion>
                            <word text=".0/24" />
                        </concatenation>
                        <whitespace text=" " />
                        <word text="-d" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" \\" />
                        <whitespace text="\n                " />
                        <word text="-p" />
                        <whitespace text=" " />
                        <word text="tcp" />
                        <whitespace text=" " />
                        <word text="-m" />
                        <whitespace text=" " />
                        <word text="tcp" />
                        <whitespace text=" " />
                        <word text="--dport" />
                        <whitespace text=" " />
                        <number text="53" />
                        <whitespace text=" " />
                        <word text="-j" />
                        <whitespace text=" " />
                        <word text="REDIRECT" />
                        <whitespace text=" " />
                        <word text="--to-ports" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="DNS_PORT" />
                        </simple_expansion>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="iptables" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-w" />
                        <whitespace text=" " />
                        <word text="-t" />
                        <whitespace text=" " />
                        <word text="nat" />
                        <whitespace text=" " />
                        <word text="-D" />
                        <whitespace text=" " />
                        <word text="PREROUTING" />
                        <whitespace text=" " />
                        <word text="-s" />
                        <whitespace text=" " />
                        <concatenation>
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="GATEWAY" />
                                <"%" text="%" />
                                <regex text=".*" />
                                <"}" text="}" />
                            </expansion>
                            <word text=".0/24" />
                        </concatenation>
                        <whitespace text=" " />
                        <word text="-d" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" \\" />
                        <whitespace text="\n                " />
                        <word text="-p" />
                        <whitespace text=" " />
                        <word text="udp" />
                        <whitespace text=" " />
                        <word text="-m" />
                        <whitespace text=" " />
                        <word text="udp" />
                        <whitespace text=" " />
                        <word text="--dport" />
                        <whitespace text=" " />
                        <number text="53" />
                        <whitespace text=" " />
                        <word text="-j" />
                        <whitespace text=" " />
                        <word text="REDIRECT" />
                        <whitespace text=" " />
                        <word text="--to-ports" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="DNS_PORT" />
                        </simple_expansion>
                    </command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-D" />
                    <whitespace text=" " />
                    <word text="INPUT" />
                    <whitespace text=" " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <word text="udp" />
                    <whitespace text=" " />
                    <word text="-m" />
                    <whitespace text=" " />
                    <word text="udp" />
                    <whitespace text=" " />
                    <word text="--dport" />
                    <whitespace text=" " />
                    <number text="67" />
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="ACCEPT" />
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NO_VIRT" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-n" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="VWIFI_IFACE" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="ip" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="link" />
                        <whitespace text=" " />
                        <word text="set" />
                        <whitespace text=" " />
                        <word text="down" />
                        <whitespace text=" " />
                        <word text="dev" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="VWIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="ip" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="addr" />
                        <whitespace text=" " />
                        <word text="flush" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="VWIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="networkmanager_rm_unmanaged_if_needed" />
                        </command_name>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="VWIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="OLD_MACADDR" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="iw" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="dev" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="VWIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <word text="del" />
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="dealloc_iface" />
                        </command_name>
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="VWIFI_IFACE" />
                        </simple_expansion>
                    </command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="ip" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="link" />
                        <whitespace text=" " />
                        <word text="set" />
                        <whitespace text=" " />
                        <word text="down" />
                        <whitespace text=" " />
                        <word text="dev" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="ip" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="addr" />
                        <whitespace text=" " />
                        <word text="flush" />
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <unary_expression>
                                <test_operator text="-n" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="NEW_MACADDR" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </unary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="ip" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="link" />
                            <whitespace text=" " />
                            <word text="set" />
                            <whitespace text=" " />
                            <word text="dev" />
                            <whitespace text=" " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="WIFI_IFACE" />
                                <"}" text="}" />
                            </expansion>
                            <whitespace text=" " />
                            <word text="address" />
                            <whitespace text=" " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="OLD_MACADDR" />
                                <"}" text="}" />
                            </expansion>
                        </command>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="networkmanager_rm_unmanaged_if_needed" />
                        </command_name>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="OLD_MACADDR" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="cleanup_lock" />
                </command_name>
            </command>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <binary_expression>
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="RUNNING_AS_DAEMON" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-eq" />
                                <whitespace text=" " />
                                <number text="1" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"&&" text="&&" />
                            <whitespace text=" " />
                            <unary_expression>
                                <test_operator text="-n" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="DAEMON_PIDFILE" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </unary_expression>
                        </binary_expression>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-f" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="DAEMON_PIDFILE" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="rm" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DAEMON_PIDFILE" />
                    </simple_expansion>
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="cleanup" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <word text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Doing cleanup.. " />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="_cleanup" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <whitespace text=" " />
                    <word text="/dev/null" />
                </file_redirect>
                <whitespace text=" " />
                <file_redirect>
                    <file_descriptor text="2" />
                    <">&" text=">&" />
                    <number text="1" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="done" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="die" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <redirected_statement>
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-n" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="1" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-e" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="\\nERROR: " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <string_content text="\\n" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                </list>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <comment text="# send die signal to the main process" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="BASHPID" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <special_variable_name text="$" />
                        </simple_expansion>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="kill" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-USR2" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <special_variable_name text="$" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n    " />
            <comment text="# we don't need to call cleanup because it's traped on EXIT" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="clean_exit" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <comment text="# send clean_exit signal to the main process" />
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="BASHPID" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <special_variable_name text="$" />
                        </simple_expansion>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="kill" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-USR1" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <special_variable_name text="$" />
                    </simple_expansion>
                </command>
            </list>
            <whitespace text="\n    " />
            <comment text="# we don't need to call cleanup because it's traped on EXIT" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="list_running_conf" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <word text="/tmp/create_ap.*" />
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <binary_expression>
                                    <unary_expression>
                                        <test_operator text="-f" />
                                        <whitespace text=" " />
                                        <concatenation>
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="x" />
                                            </simple_expansion>
                                            <word text="/pid" />
                                        </concatenation>
                                    </unary_expression>
                                    <whitespace text=" " />
                                    <"&&" text="&&" />
                                    <whitespace text=" " />
                                    <unary_expression>
                                        <test_operator text="-f" />
                                        <whitespace text=" " />
                                        <concatenation>
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="x" />
                                            </simple_expansion>
                                            <word text="/wifi_iface" />
                                        </concatenation>
                                    </unary_expression>
                                </binary_expression>
                                <whitespace text=" " />
                                <"&&" text="&&" />
                                <whitespace text=" " />
                                <unary_expression>
                                    <test_operator text="-d" />
                                    <whitespace text=" " />
                                    <concatenation>
                                        <word text="/proc/" />
                                        <command_substitution>
                                            <"$(" text="$(" />
                                            <command>
                                                <command_name>
                                                    <word text="cat" />
                                                </command_name>
                                                <whitespace text=" " />
                                                <concatenation>
                                                    <simple_expansion>
                                                        <"$" text="$" />
                                                        <variable_name text="x" />
                                                    </simple_expansion>
                                                    <word text="/pid" />
                                                </concatenation>
                                            </command>
                                            <")" text=")" />
                                        </command_substitution>
                                    </concatenation>
                                </unary_expression>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="x" />
                            </simple_expansion>
                        </command>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="list_running" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="IFACE" />
                <whitespace text=" " />
                <variable_name text="wifi_iface" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="list_running_conf" />
                        </command_name>
                    </command>
                    <")" text=")" />
                </command_substitution>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="IFACE" />
                        <"=" text="=" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="x" />
                            <"#" text="#" />
                            <regex text="*." />
                            <"}" text="}" />
                        </expansion>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="IFACE" />
                        <"=" text="=" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="IFACE" />
                            <"%%" text="%%" />
                            <regex text=".*" />
                            <"}" text="}" />
                        </expansion>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="wifi_iface" />
                        <"=" text="=" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="cat" />
                                </command_name>
                                <whitespace text=" " />
                                <concatenation>
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="x" />
                                    </simple_expansion>
                                    <word text="/wifi_iface" />
                                </concatenation>
                            </command>
                            <")" text=")" />
                        </command_substitution>
                    </variable_assignment>
                    <whitespace text="\n\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="IFACE" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <"==" text="==" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="wifi_iface" />
                                </simple_expansion>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <command_substitution>
                                <"$(" text="$(" />
                                <command>
                                    <command_name>
                                        <word text="cat" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <concatenation>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <word text="/pid" />
                                    </concatenation>
                                </command>
                                <")" text=")" />
                            </command_substitution>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="IFACE" />
                            </simple_expansion>
                        </command>
                        <whitespace text="\n        " />
                        <else_clause>
                            <else text="else" />
                            <whitespace text="\n            " />
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <command_substitution>
                                    <"$(" text="$(" />
                                    <command>
                                        <command_name>
                                            <word text="cat" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <concatenation>
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="x" />
                                            </simple_expansion>
                                            <word text="/pid" />
                                        </concatenation>
                                    </command>
                                    <")" text=")" />
                                </command_substitution>
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="IFACE" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <concatenation>
                                    <raw_string text="'('" />
                                    <command_substitution>
                                        <"$(" text="$(" />
                                        <command>
                                            <command_name>
                                                <word text="cat" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <concatenation>
                                                <simple_expansion>
                                                    <"$" text="$" />
                                                    <variable_name text="x" />
                                                </simple_expansion>
                                                <word text="/wifi_iface" />
                                            </concatenation>
                                        </command>
                                        <")" text=")" />
                                    </command_substitution>
                                    <raw_string text="')'" />
                                </concatenation>
                            </command>
                            <whitespace text="\n" />
                        </else_clause>
                        <whitespace text="        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_wifi_iface_from_pid" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <pipeline>
                <command>
                    <command_name>
                        <word text="list_running" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="awk" />
                    </command_name>
                    <whitespace text=" " />
                    <raw_string text="'{print $1 \" \" $NF}'" />
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="tr" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-d" />
                    <whitespace text=" " />
                    <raw_string text="'\\(\\)'" />
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="grep" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-E" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="^" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="1" />
                            <"}" text="}" />
                        </expansion>
                        <"\"" text=" \"" />
                    </string>
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="cut" />
                    </command_name>
                    <whitespace text=" " />
                    <concatenation>
                        <word text="-d" />
                        <raw_string text="' '" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-f2" />
                </command>
            </pipeline>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_pid_from_wifi_iface" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <pipeline>
                <command>
                    <command_name>
                        <word text="list_running" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="awk" />
                    </command_name>
                    <whitespace text=" " />
                    <raw_string text="'{print $1 \" \" $NF}'" />
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="tr" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-d" />
                    <whitespace text=" " />
                    <raw_string text="'\\(\\)'" />
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="grep" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-E" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <expansion>
                            <"${" text=" ${" />
                            <variable_name text="1" />
                            <"}" text="}" />
                        </expansion>
                        <"$" text="$" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <"|" text="|" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="cut" />
                    </command_name>
                    <whitespace text=" " />
                    <concatenation>
                        <word text="-d" />
                        <raw_string text="' '" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-f1" />
                </command>
            </pipeline>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="get_confdir_from_pid" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="IFACE" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="list_running_conf" />
                        </command_name>
                    </command>
                    <")" text=")" />
                </command_substitution>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <command_substitution>
                                    <"$(" text="$(" />
                                    <command>
                                        <command_name>
                                            <word text="cat" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <concatenation>
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="x" />
                                            </simple_expansion>
                                            <word text="/pid" />
                                        </concatenation>
                                    </command>
                                    <")" text=")" />
                                </command_substitution>
                                <whitespace text=" " />
                                <"==" text="==" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="1" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="x" />
                            </simple_expansion>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="break" />
                            </command_name>
                        </command>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="print_client" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="line" />
                <whitespace text=" " />
                <variable_name text="ipaddr" />
                <whitespace text=" " />
                <variable_name text="hostname" />
            </declaration_command>
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="mac" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-f" />
                        <whitespace text=" " />
                        <concatenation>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="CONFDIR" />
                            </simple_expansion>
                            <word text="/dnsmasq.leases" />
                        </concatenation>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="line" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <pipeline>
                            <command>
                                <command_name>
                                    <word text="grep" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text=" $" />
                                        <variable_name text="mac" />
                                    </simple_expansion>
                                    <"\"" text=" \"" />
                                </string>
                                <whitespace text=" " />
                                <concatenation>
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="CONFDIR" />
                                    </simple_expansion>
                                    <word text="/dnsmasq.leases" />
                                </concatenation>
                            </command>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="tail" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-n" />
                                <whitespace text=" " />
                                <number text="1" />
                            </command>
                        </pipeline>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="ipaddr" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <pipeline>
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="line" />
                                </simple_expansion>
                            </command>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="cut" />
                                </command_name>
                                <whitespace text=" " />
                                <concatenation>
                                    <word text="-d" />
                                    <raw_string text="' '" />
                                </concatenation>
                                <whitespace text=" " />
                                <word text="-f3" />
                            </command>
                        </pipeline>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="hostname" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <pipeline>
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="line" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </command>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="cut" />
                                </command_name>
                                <whitespace text=" " />
                                <concatenation>
                                    <word text="-d" />
                                    <raw_string text="' '" />
                                </concatenation>
                                <whitespace text=" " />
                                <word text="-f4" />
                            </command>
                        </pipeline>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="ipaddr" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="ipaddr" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="*" />
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
            </list>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="hostname" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="hostname" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="*" />
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
            </list>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="printf" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="%-20s %-18s %s\\n" />
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="mac" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="ipaddr" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="hostname" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="list_clients" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="wifi_iface" />
                <whitespace text=" " />
                <variable_name text="pid" />
            </declaration_command>
            <whitespace text="\n\n    " />
            <comment text="# If PID is given, get the associated wifi iface" />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"=~" text="=~" />
                        <whitespace text=" " />
                        <regex text="^[1-9][0-9]*$" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="pid" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="wifi_iface" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="get_wifi_iface_from_pid" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="pid" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
                <whitespace text="\n        " />
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-z" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="wifi_iface" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="die" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="'" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="pid" />
                            </simple_expansion>
                            <string_content text="' is not the pid of a running " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="PROGNAME" />
                            </simple_expansion>
                            <string_content text=" instance." />
                            <"\"" text="\"" />
                        </string>
                    </command>
                </list>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="wifi_iface" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="wifi_iface" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
            </list>
            <whitespace text="\n    " />
            <list>
                <command>
                    <command_name>
                        <word text="is_wifi_interface" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="wifi_iface" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="'" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="wifi_iface" />
                        </simple_expansion>
                        <string_content text="' is not a WiFi interface." />
                        <"\"" text="\"" />
                    </string>
                </command>
            </list>
            <whitespace text="\n\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="pid" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="pid" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="get_pid_from_wifi_iface" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="wifi_iface" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
            </list>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="pid" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="'" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="wifi_iface" />
                        </simple_expansion>
                        <string_content text="' is not used from " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="PROGNAME" />
                        </simple_expansion>
                        <string_content text=" instance.\\n\\\n       Maybe you need to pass the virtual interface instead.\\n\\\n       Use --list-running to find it out." />
                        <"\"" text="\"" />
                    </string>
                </command>
            </list>
            <whitespace text="\n    " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="CONFDIR" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="CONFDIR" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="get_confdir_from_pid" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="pid" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
            </list>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="USE_IWCONFIG" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <declaration_command>
                    <local text="local" />
                    <whitespace text=" " />
                    <variable_assignment>
                        <variable_name text="awk_cmd" />
                        <"=" text="=" />
                        <raw_string text="'($1 ~ /Station$/) {print $2}'" />
                    </variable_assignment>
                </declaration_command>
                <whitespace text="\n        " />
                <declaration_command>
                    <local text="local" />
                    <whitespace text=" " />
                    <variable_assignment>
                        <variable_name text="client_list" />
                        <"=" text="=" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <pipeline>
                                <command>
                                    <command_name>
                                        <word text="iw" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="dev" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="wifi_iface" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                    <whitespace text=" " />
                                    <word text="station" />
                                    <whitespace text=" " />
                                    <word text="dump" />
                                </command>
                                <whitespace text=" " />
                                <"|" text="|" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="awk" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="awk_cmd" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                </command>
                            </pipeline>
                            <")" text=")" />
                        </command_substitution>
                    </variable_assignment>
                </declaration_command>
                <whitespace text="\n\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-z" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="client_list" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="No clients connected" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="return" />
                        </command_name>
                    </command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n\n        " />
                <command>
                    <command_name>
                        <word text="printf" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="%-20s %-18s %s\\n" />
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="MAC" />
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="IP" />
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Hostname" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n\n        " />
                <declaration_command>
                    <local text="local" />
                    <whitespace text=" " />
                    <variable_name text="mac" />
                </declaration_command>
                <whitespace text="\n        " />
                <for_statement>
                    <for text="for" />
                    <whitespace text=" " />
                    <variable_name text="mac" />
                    <whitespace text=" " />
                    <in text="in" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="client_list" />
                    </simple_expansion>
                    <";" text=";" />
                    <whitespace text=" " />
                    <do_group>
                        <do text="do" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="print_client" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="mac" />
                            </simple_expansion>
                        </command>
                        <whitespace text="\n        " />
                        <done text="done" />
                    </do_group>
                </for_statement>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="die" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="This option is not supported for the current driver." />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="has_running_instance" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="PID" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <word text="/tmp/create_ap.*" />
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <unary_expression>
                                <test_operator text="-f" />
                                <whitespace text=" " />
                                <concatenation>
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="x" />
                                    </simple_expansion>
                                    <word text="/pid" />
                                </concatenation>
                            </unary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <variable_assignment>
                            <variable_name text="PID" />
                            <"=" text="=" />
                            <command_substitution>
                                <"$(" text="$(" />
                                <command>
                                    <command_name>
                                        <word text="cat" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <concatenation>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="x" />
                                        </simple_expansion>
                                        <word text="/pid" />
                                    </concatenation>
                                </command>
                                <")" text=")" />
                            </command_substitution>
                        </variable_assignment>
                        <whitespace text="\n            " />
                        <if_statement>
                            <if text="if" />
                            <whitespace text=" " />
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <unary_expression>
                                    <test_operator text="-d" />
                                    <whitespace text=" " />
                                    <concatenation>
                                        <word text="/proc/" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="PID" />
                                        </simple_expansion>
                                    </concatenation>
                                </unary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="mutex_unlock" />
                                </command_name>
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="return" />
                                </command_name>
                                <whitespace text=" " />
                                <number text="0" />
                            </command>
                            <whitespace text="\n            " />
                            <fi text="fi" />
                        </if_statement>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_running_pid" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <redirected_statement>
                <pipeline>
                    <command>
                        <command_name>
                            <word text="list_running" />
                        </command_name>
                    </command>
                    <whitespace text=" " />
                    <"|" text="|" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="grep" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-E" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="^" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="1" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text=" \"" />
                        </string>
                    </command>
                </pipeline>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <whitespace text=" " />
                    <word text="/dev/null" />
                </file_redirect>
                <whitespace text=" " />
                <file_redirect>
                    <file_descriptor text="2" />
                    <">&" text=">&" />
                    <number text="1" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="send_stop" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="x" />
            </declaration_command>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="mutex_lock" />
                </command_name>
            </command>
            <whitespace text="\n    " />
            <comment text="# send stop signal to specific pid" />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="is_running_pid" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="1" />
                    </simple_expansion>
                </command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="kill" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-USR1" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="1" />
                    </simple_expansion>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="mutex_unlock" />
                    </command_name>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="return" />
                    </command_name>
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <comment text="# send stop signal to specific interface" />
            <whitespace text="\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="x" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="list_running" />
                            </command_name>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-E" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text=" \\(?" />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="1" />
                                    <"}" text="}" />
                                </expansion>
                                <string_content text="( |\\)?\\$)" />
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="cut" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-f1" />
                            <whitespace text=" " />
                            <concatenation>
                                <word text="-d" />
                                <raw_string text="' '" />
                            </concatenation>
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="kill" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-USR1" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="x" />
                        </simple_expansion>
                    </command>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="mutex_unlock" />
                </command_name>
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# Storing configs" />
    <whitespace text="\n" />
    <function_definition>
        <word text="write_config" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="i" />
                    <"=" text="=" />
                    <number text="1" />
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n\n    " />
            <comment text="# If using pkexec, evaluate permissions before writing." />
            <whitespace text="\n    " />
            <comment text="#   However, the /etc/create_ap.conf" />
            <whitespace text="\n    " />
            <comment text="#   location is excepted." />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <binary_expression>
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="STORE_CONFIG" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                            <whitespace text=" " />
                            <"!=" text="!=" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="/etc/create_ap.conf" />
                                <"\"" text="\"" />
                            </string>
                        </binary_expression>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="PKEXEC_UID" />
                        </simple_expansion>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[" text="[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-e" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="STORE_CONFIG" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]" text="]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <negated_command>
                            <"!" text="!" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="pkexec" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="--user" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <command_substitution>
                                        <"$(" text="$(" />
                                        <command>
                                            <command_name>
                                                <word text="id" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <word text="-nu" />
                                            <whitespace text=" " />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="PKEXEC_UID" />
                                            </simple_expansion>
                                        </command>
                                        <")" text=")" />
                                    </command_substitution>
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <word text="test" />
                                <whitespace text=" " />
                                <word text="-w" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="STORE_CONFIG" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </command>
                        </negated_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n                " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="ERROR: 1 " />
                                <command_substitution>
                                    <"$(" text="$(" />
                                    <command>
                                        <command_name>
                                            <word text="id" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="-nu" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="PKEXEC_UID" />
                                        </simple_expansion>
                                    </command>
                                    <")" text=")" />
                                </command_substitution>
                                <string_content text=" has insufficient permissions to write to config file " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="STORE_CONFIG" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text="\n                " />
                        <command>
                            <command_name>
                                <word text="exit" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="1" />
                        </command>
                        <whitespace text="\n            " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n        " />
                    <elif_clause>
                        <elif text="elif" />
                        <whitespace text=" " />
                        <negated_command>
                            <"!" text="!" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="pkexec" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="--user" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <command_substitution>
                                        <"$(" text="$(" />
                                        <command>
                                            <command_name>
                                                <word text="id" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <word text="-nu" />
                                            <whitespace text=" " />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="PKEXEC_UID" />
                                            </simple_expansion>
                                        </command>
                                        <")" text=")" />
                                    </command_substitution>
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <word text="test" />
                                <whitespace text=" " />
                                <word text="-w" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <command_substitution>
                                        <"$(" text="$(" />
                                        <command>
                                            <command_name>
                                                <word text="dirname" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <string>
                                                <"\"" text="\"" />
                                                <simple_expansion>
                                                    <"$" text="$" />
                                                    <variable_name text="STORE_CONFIG" />
                                                </simple_expansion>
                                                <"\"" text="\"" />
                                            </string>
                                        </command>
                                        <")" text=")" />
                                    </command_substitution>
                                    <"\"" text="\"" />
                                </string>
                            </command>
                        </negated_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="ERROR: 2 " />
                                <command_substitution>
                                    <"$(" text="$(" />
                                    <command>
                                        <command_name>
                                            <word text="id" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="-nu" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="PKEXEC_UID" />
                                        </simple_expansion>
                                    </command>
                                    <")" text=")" />
                                </command_substitution>
                                <string_content text=" has insufficient permissions to write to config file " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="STORE_CONFIG" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="exit" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="1" />
                        </command>
                        <whitespace text="\n" />
                    </elif_clause>
                    <whitespace text="        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <comment text="# Assume that the user is making a conf file in a directory they normally" />
                <whitespace text="\n        " />
                <comment text="# have control over, and keep permissions strictly private. (i.e. they will" />
                <whitespace text="\n        " />
                <comment text="# need to run create_ap directly with sudo in order to write to, say, /etc/create_ap2.conf)" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="touch" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="STORE_CONFIG" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="chown" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="id" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-nu" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="PKEXEC_UID" />
                                </simple_expansion>
                            </command>
                            <")" text=")" />
                        </command_substitution>
                        <string_content text=":" />
                        <command_substitution>
                            <"$(" text="$(" />
                            <command>
                                <command_name>
                                    <word text="id" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-ng" />
                                <whitespace text=" " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="PKEXEC_GID" />
                                </simple_expansion>
                            </command>
                            <")" text=")" />
                        </command_substitution>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="STORE_CONFIG" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="chmod" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="600" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="STORE_CONFIG" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n    " />
                <elif_clause>
                    <elif text="elif" />
                    <whitespace text=" " />
                    <redirected_statement>
                        <negated_command>
                            <"!" text="!" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="eval" />
                                </command_name>
                                <whitespace text=" " />
                                <raw_string text="'echo -n > \"$STORE_CONFIG\"'" />
                            </command>
                        </negated_command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">" text=">" />
                            <whitespace text=" " />
                            <word text="/dev/null" />
                        </file_redirect>
                        <whitespace text=" " />
                        <file_redirect>
                            <file_descriptor text="2" />
                            <">&" text=">&" />
                            <number text="1" />
                        </file_redirect>
                    </redirected_statement>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n        " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="ERROR: Unable to create config file " />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="STORE_CONFIG" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">&" text=">&" />
                            <number text="2" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="exit" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                    <whitespace text="\n" />
                </elif_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <variable_assignment>
                <variable_name text="WIFI_IFACE" />
                <"=" text="=" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="1" />
                </simple_expansion>
            </variable_assignment>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="SHARE_METHOD" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"==" text="==" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="none" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="SSID" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="2" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="PASSPHRASE" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="3" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="INTERNET_IFACE" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="2" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="SSID" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="3" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="PASSPHRASE" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="4" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="FREQ_BAND_SET" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="FREQ_BAND" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="default" />
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n    " />
            <redirected_statement>
                <for_statement>
                    <for text="for" />
                    <whitespace text=" " />
                    <variable_name text="config_opt" />
                    <whitespace text=" " />
                    <in text="in" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <expansion>
                            <"${" text="${" />
                            <subscript>
                                <variable_name text="CONFIG_OPTS" />
                                <"[" text="[" />
                                <word text="@" />
                                <"]" text="]" />
                            </subscript>
                            <"}" text="}" />
                        </expansion>
                        <"\"" text="\"" />
                    </string>
                    <";" text=";" />
                    <whitespace text=" " />
                    <do_group>
                        <do text="do" />
                        <whitespace text="\n        " />
                        <command>
                            <command_name>
                                <word text="eval" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="echo" />
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="config_opt" />
                                </simple_expansion>
                                <word text="=\\$" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="config_opt" />
                                </simple_expansion>
                            </concatenation>
                        </command>
                        <whitespace text="\n    " />
                        <done text="done" />
                    </do_group>
                </for_statement>
                <whitespace text=" " />
                <file_redirect>
                    <">>" text=">>" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="STORE_CONFIG" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <word text="-e" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Config options written to '" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="STORE_CONFIG" />
                    </simple_expansion>
                    <string_content text="'" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="0" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <function_definition>
        <word text="is_config_opt" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="elem" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="opt" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="1" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
            </declaration_command>
            <whitespace text="\n\n    " />
            <for_statement>
                <for text="for" />
                <whitespace text=" " />
                <variable_name text="elem" />
                <whitespace text=" " />
                <in text="in" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <expansion>
                        <"${" text="${" />
                        <subscript>
                            <variable_name text="CONFIG_OPTS" />
                            <"[" text="[" />
                            <word text="@" />
                            <"]" text="]" />
                        </subscript>
                        <"}" text="}" />
                    </expansion>
                    <"\"" text="\"" />
                </string>
                <";" text=";" />
                <whitespace text=" " />
                <do_group>
                    <do text="do" />
                    <whitespace text="\n        " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="elem" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <"==" text="==" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="opt" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="return" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="0" />
                        </command>
                        <whitespace text="\n        " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n    " />
                    <done text="done" />
                </do_group>
            </for_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="return" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n" />
    <comment text="# Load options from config file" />
    <whitespace text="\n" />
    <function_definition>
        <word text="read_config" />
        <"(" text="(" />
        <")" text=")" />
        <whitespace text=" " />
        <compound_statement>
            <"{" text="{" />
            <whitespace text="\n    " />
            <declaration_command>
                <local text="local" />
                <whitespace text=" " />
                <variable_name text="opt_name" />
                <whitespace text=" " />
                <variable_name text="opt_val" />
                <whitespace text=" " />
                <variable_name text="line" />
            </declaration_command>
            <whitespace text="\n\n    " />
            <redirected_statement>
                <while_statement>
                    <while text="while" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="read" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="line" />
                    </command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <do_group>
                        <do text="do" />
                        <whitespace text="\n        " />
                        <comment text="# Read switches and their values" />
                        <whitespace text="\n        " />
                        <variable_assignment>
                            <variable_name text="opt_name" />
                            <"=" text="=" />
                            <string>
                                <"\"" text="\"" />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="line" />
                                    <"%%" text="%%" />
                                    <regex text="=*" />
                                    <"}" text="}" />
                                </expansion>
                                <"\"" text="\"" />
                            </string>
                        </variable_assignment>
                        <whitespace text="\n        " />
                        <variable_assignment>
                            <variable_name text="opt_val" />
                            <"=" text="=" />
                            <string>
                                <"\"" text="\"" />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="line" />
                                    <"#" text="#" />
                                    <regex text="*=" />
                                    <"}" text="}" />
                                </expansion>
                                <"\"" text="\"" />
                            </string>
                        </variable_assignment>
                        <whitespace text="\n\n        " />
                        <if_statement>
                            <if text="if" />
                            <whitespace text=" " />
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <binary_expression>
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="opt_name" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <"==" text="==" />
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <string_content text="FREQ_BAND" />
                                            <"\"" text="\"" />
                                        </string>
                                    </binary_expression>
                                    <whitespace text=" " />
                                    <"&&" text="&&" />
                                    <whitespace text=" " />
                                    <binary_expression>
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="opt_val" />
                                        </simple_expansion>
                                        <whitespace text=" " />
                                        <"!=" text="!=" />
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <string_content text="default" />
                                            <"\"" text="\"" />
                                        </string>
                                    </binary_expression>
                                </binary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                            <whitespace text=" " />
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n            " />
                            <variable_assignment>
                                <variable_name text="FREQ_BAND_SET" />
                                <"=" text="=" />
                                <number text="1" />
                            </variable_assignment>
                            <whitespace text="\n        " />
                            <fi text="fi" />
                        </if_statement>
                        <whitespace text="\n\n        " />
                        <if_statement>
                            <if text="if" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="is_config_opt" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="opt_name" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </command>
                            <whitespace text=" " />
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n            " />
                            <command>
                                <command_name>
                                    <word text="eval" />
                                </command_name>
                                <whitespace text=" " />
                                <concatenation>
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="opt_name" />
                                    </simple_expansion>
                                    <word text="=" />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="\\$opt_val" />
                                        <"\"" text="\"" />
                                    </string>
                                </concatenation>
                            </command>
                            <whitespace text="\n        " />
                            <else_clause>
                                <else text="else" />
                                <whitespace text="\n            " />
                                <redirected_statement>
                                    <command>
                                        <command_name>
                                            <word text="echo" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <string_content text="WARN: Unrecognized configuration entry. Please check your config file." />
                                            <"\"" text="\"" />
                                        </string>
                                    </command>
                                    <whitespace text=" " />
                                    <file_redirect>
                                        <">&" text=">&" />
                                        <number text="2" />
                                    </file_redirect>
                                </redirected_statement>
                                <whitespace text="\n" />
                            </else_clause>
                            <whitespace text="        " />
                            <fi text="fi" />
                        </if_statement>
                        <whitespace text="\n    " />
                        <done text="done" />
                    </do_group>
                </while_statement>
                <whitespace text=" " />
                <file_redirect>
                    <"<" text="<" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="LOAD_CONFIG" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n" />
            <"}" text="}" />
        </compound_statement>
    </function_definition>
    <whitespace text="\n\n\n" />
    <variable_assignment>
        <variable_name text="ARGS" />
        <"=" text="=" />
        <array>
            <"(" text="(" />
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <special_variable_name text="@" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
            <whitespace text=" " />
            <")" text=")" />
        </array>
    </variable_assignment>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="FREQ_BAND_SET" />
        <"=" text="=" />
        <number text="0" />
    </variable_assignment>
    <whitespace text="\n\n" />
    <comment text="# Preprocessing for --config before option-parsing starts" />
    <whitespace text="\n" />
    <c_style_for_statement>
        <for text="for" />
        <whitespace text=" " />
        <"((" text="((" />
        <variable_assignment>
            <variable_name text="i" />
            <"=" text="=" />
            <number text="0" />
        </variable_assignment>
        <";" text=";" />
        <whitespace text=" " />
        <binary_expression>
            <word text="i" />
            <"<" text="<" />
            <simple_expansion>
                <"$" text="$" />
                <special_variable_name text="#" />
            </simple_expansion>
        </binary_expression>
        <";" text=";" />
        <whitespace text=" " />
        <postfix_expression>
            <word text="i" />
            <"++" text="++" />
        </postfix_expression>
        <"))" text="))" />
        <";" text=";" />
        <whitespace text=" " />
        <do_group>
            <do text="do" />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <subscript>
                                    <variable_name text="ARGS" />
                                    <"[" text="[" />
                                    <word text="i" />
                                    <"]" text="]" />
                                </subscript>
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"=" text="=" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="--config" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-f" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <expansion>
                                    <"${" text="${" />
                                    <subscript>
                                        <variable_name text="ARGS" />
                                        <"[" text="[" />
                                        <word text="i+1" />
                                        <"]" text="]" />
                                    </subscript>
                                    <"}" text="}" />
                                </expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="LOAD_CONFIG" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <subscript>
                                    <variable_name text="ARGS" />
                                    <"[" text="[" />
                                    <word text="i+1" />
                                    <"]" text="]" />
                                </subscript>
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="read_config" />
                        </command_name>
                    </command>
                    <whitespace text="\n        " />
                    <else_clause>
                        <else text="else" />
                        <whitespace text="\n            " />
                        <redirected_statement>
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="ERROR: No config file found at given location" />
                                    <"\"" text="\"" />
                                </string>
                            </command>
                            <whitespace text=" " />
                            <file_redirect>
                                <">&" text=">&" />
                                <number text="2" />
                            </file_redirect>
                        </redirected_statement>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="exit" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="1" />
                        </command>
                        <whitespace text="\n" />
                    </else_clause>
                    <whitespace text="        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="break" />
                    </command_name>
                </command>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n" />
            <done text="done" />
        </do_group>
    </c_style_for_statement>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="GETOPT_ARGS" />
        <"=" text="=" />
        <command_substitution>
            <"$(" text="$(" />
            <command>
                <command_name>
                    <word text="getopt" />
                </command_name>
                <whitespace text=" " />
                <word text="-o" />
                <whitespace text=" " />
                <word text="hc:w:g:de:nm:" />
                <whitespace text=" " />
                <word text="-l" />
                <whitespace text=" " />
                <concatenation>
                    <string>
                        <"\"" text="\"" />
                        <string_content text="help" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="hidden" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="hostapd-debug:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="hostapd-timestamps" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="redirect-to-localhost" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="mac-filter" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="mac-filter-accept:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="isolate-clients" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ieee80211n" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ieee80211ac" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ieee80211ax" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ht_capab:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="vht_capab:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="driver:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="no-virt" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="fix-unmanaged" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="country:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="freq-band:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="mac:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="dhcp-dns:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="daemon" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="pidfile:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="logfile:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="dns-logfile:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="stop:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="list" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="list-running" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="list-clients:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="version" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="psk" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="no-haveged" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="no-dns" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="no-dnsmasq" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="mkconfig:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="config:" />
                        <"\"" text="\"" />
                    </string>
                    <word text="," />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="dhcp-hosts:" />
                        <"\"" text="\"" />
                    </string>
                </concatenation>
                <whitespace text=" " />
                <word text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PROGNAME" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <word text="--" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <special_variable_name text="@" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <")" text=")" />
        </command_substitution>
    </variable_assignment>
    <whitespace text="\n" />
    <list>
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <special_variable_name text="?" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-ne" />
                <whitespace text=" " />
                <number text="0" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <whitespace text=" " />
        <"&&" text="&&" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
    </list>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="eval" />
        </command_name>
        <whitespace text=" " />
        <word text="set" />
        <whitespace text=" " />
        <word text="--" />
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="GETOPT_ARGS" />
            </simple_expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n\n" />
    <while_statement>
        <while text="while" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text=":" />
            </command_name>
        </command>
        <";" text=";" />
        <whitespace text=" " />
        <do_group>
            <do text="do" />
            <whitespace text="\n    " />
            <case_statement>
                <case text="case" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="1" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <in text="in" />
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="-h" />
                    <"|" text="|" />
                    <extglob_pattern text="--help" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="usage" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="exit" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="0" />
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--version" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="VERSION" />
                        </simple_expansion>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="exit" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="0" />
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--hidden" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="HIDDEN" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--mac-filter" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="MAC_FILTER" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--mac-filter-accept" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="MAC_FILTER_ACCEPT" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--isolate-clients" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="ISOLATE_CLIENTS" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <word text="-c" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="CHANNEL" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <word text="-w" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="WPA_VERSION" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <list>
                        <test_command>
                            <"[[" text="[[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="WPA_VERSION" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <"==" text="==" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="2+1" />
                                    <"\"" text="\"" />
                                </string>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]]" text="]]" />
                        </test_command>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <variable_assignment>
                            <variable_name text="WPA_VERSION" />
                            <"=" text="=" />
                            <word text="1+2" />
                        </variable_assignment>
                    </list>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <word text="-g" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="GATEWAY" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <word text="-d" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="ETC_HOSTS" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <word text="-e" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="ADDN_HOSTS" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--dhcp-hosts" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="DHCP_HOSTS" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <word text="-n" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="SHARE_METHOD" />
                        <"=" text="=" />
                        <word text="none" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <word text="-m" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="SHARE_METHOD" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--ieee80211n" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="IEEE80211N" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--ieee80211ac" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="IEEE80211AC" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n\t" />
                <case_item>
                    <extglob_pattern text="--ieee80211ax" />
                    <")" text=")" />
                    <whitespace text="\n\t    " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n\t    " />
                    <variable_assignment>
                        <variable_name text="IEEE80211AX" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n\t    " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--ht_capab" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="HT_CAPAB" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--vht_capab" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="VHT_CAPAB" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--driver" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="DRIVER" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--no-virt" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="NO_VIRT" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--fix-unmanaged" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="FIX_UNMANAGED" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--country" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="COUNTRY" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--freq-band" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="FREQ_BAND" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="FREQ_BAND_SET" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--mac" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="NEW_MACADDR" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--dhcp-dns" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="DHCP_DNS" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--daemon" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="DAEMONIZE" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--pidfile" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="DAEMON_PIDFILE" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--logfile" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="DAEMON_LOGFILE" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--dns-logfile" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="DNS_LOGFILE" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--stop" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="STOP_ID" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--list" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="LIST_RUNNING" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-e" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="WARN: --list is deprecated, use --list-running instead.\\n" />
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">&" text=">&" />
                            <number text="2" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--list-running" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="LIST_RUNNING" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--list-clients" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="LIST_CLIENTS_ID" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--no-haveged" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="NO_HAVEGED" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--psk" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="USE_PSK" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--no-dns" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="NO_DNS" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--no-dnsmasq" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="NO_DNSMASQ" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--redirect-to-localhost" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="REDIRECT_TO_LOCALHOST" />
                        <"=" text="=" />
                        <number text="1" />
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--hostapd-debug" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <test_command>
                            <"[" text="[" />
                            <whitespace text=" " />
                            <binary_expression>
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="x" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="1" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <"=" text="=" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="x1" />
                                    <"\"" text="\"" />
                                </string>
                            </binary_expression>
                            <whitespace text=" " />
                            <"]" text="]" />
                        </test_command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n                " />
                        <variable_assignment>
                            <variable_name text="HOSTAPD_DEBUG_ARGS" />
                            <"+=" text="+=" />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="-d " />
                                <"\"" text="\"" />
                            </string>
                        </variable_assignment>
                        <whitespace text="\n            " />
                        <elif_clause>
                            <elif text="elif" />
                            <whitespace text=" " />
                            <test_command>
                                <"[" text="[" />
                                <whitespace text=" " />
                                <binary_expression>
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="x" />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="1" />
                                        </simple_expansion>
                                        <"\"" text="\"" />
                                    </string>
                                    <whitespace text=" " />
                                    <"=" text="=" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="x2" />
                                        <"\"" text="\"" />
                                    </string>
                                </binary_expression>
                                <whitespace text=" " />
                                <"]" text="]" />
                            </test_command>
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n                " />
                            <variable_assignment>
                                <variable_name text="HOSTAPD_DEBUG_ARGS" />
                                <"+=" text="+=" />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="-dd " />
                                    <"\"" text="\"" />
                                </string>
                            </variable_assignment>
                            <whitespace text="\n" />
                        </elif_clause>
                        <whitespace text="            " />
                        <else_clause>
                            <else text="else" />
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="printf" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="Error: argument for --hostapd-debug expected 1 or 2, got %s\\n" />
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="1" />
                                    </simple_expansion>
                                    <"\"" text="\"" />
                                </string>
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="exit" />
                                </command_name>
                                <whitespace text=" " />
                                <number text="1" />
                            </command>
                            <whitespace text="\n" />
                        </else_clause>
                        <whitespace text="            " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--hostapd-timestamps" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="HOSTAPD_DEBUG_ARGS" />
                        <"+=" text="+=" />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="-t " />
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--mkconfig" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="STORE_CONFIG" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="1" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--config" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n        " />
                <case_item>
                    <extglob_pattern text="--" />
                    <")" text=")" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="shift" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="break" />
                        </command_name>
                    </command>
                    <whitespace text="\n            " />
                    <";;" text=";;" />
                </case_item>
                <whitespace text="\n    " />
                <esac text="esac" />
            </case_statement>
            <whitespace text="\n" />
            <done text="done" />
        </do_group>
    </while_statement>
    <whitespace text="\n\n" />
    <comment text="# Load positional args from config file, if needed" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <unary_expression>
                    <test_operator text="-n" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="LOAD_CONFIG" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <special_variable_name text="#" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="i" />
            <"=" text="=" />
            <number text="0" />
        </variable_assignment>
        <whitespace text="\n    " />
        <comment text="# set arguments in order" />
        <whitespace text="\n    " />
        <for_statement>
            <for text="for" />
            <whitespace text=" " />
            <variable_name text="x" />
            <whitespace text=" " />
            <in text="in" />
            <whitespace text=" " />
            <word text="WIFI_IFACE" />
            <whitespace text=" " />
            <word text="INTERNET_IFACE" />
            <whitespace text=" " />
            <word text="SSID" />
            <whitespace text=" " />
            <word text="PASSPHRASE" />
            <";" text=";" />
            <whitespace text=" " />
            <do_group>
                <do text="do" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="eval" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="[[ -n \\\"\\$" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="x" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text="\\\" ]]" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="eval" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="set -- \\\"\\${@:1:" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="i" />
                            </simple_expansion>
                            <string_content text="}\\\" \\\"\\$" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="x" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text="\\\"" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n            " />
                    <test_command>
                        <"((" text="((" />
                        <word text="i++" />
                        <"))" text="))" />
                    </test_command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <comment text="# we unset the variable to avoid any problems later" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="eval" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="unset " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="x" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n    " />
                <done text="done" />
            </do_group>
        </for_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# Check if required number of positional args are present" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <binary_expression>
                    <binary_expression>
                        <binary_expression>
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <special_variable_name text="#" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-lt" />
                                <whitespace text=" " />
                                <number text="1" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"&&" text="&&" />
                            <whitespace text=" " />
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="FIX_UNMANAGED" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-eq" />
                                <whitespace text=" " />
                                <number text="0" />
                            </binary_expression>
                        </binary_expression>
                        <whitespace text="  " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-z" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="STOP_ID" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                    </binary_expression>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text="\n      " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="LIST_RUNNING" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                </binary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-z" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="LIST_CLIENTS_ID" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="usage" />
                </command_name>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# Set NO_DNS, if dnsmasq is disabled" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="NO_DNSMASQ" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n  " />
        <variable_assignment>
            <variable_name text="NO_DNS" />
            <"=" text="=" />
            <number text="1" />
        </variable_assignment>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <command>
        <command_name>
            <word text="trap" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="cleanup_lock" />
            <"\"" text="\"" />
        </string>
        <whitespace text=" " />
        <word text="EXIT" />
    </command>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="id" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-u" />
                    </command>
                    <")" text=")" />
                </command_substitution>
                <whitespace text=" " />
                <test_operator text="-ne" />
                <whitespace text=" " />
                <number text="0" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="create_ap must be run as root." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <negated_command>
            <"!" text="!" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="init_lock" />
                </command_name>
            </command>
        </negated_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ERROR: Failed to initialize lock" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# if the user press ctrl+c or we get USR1 signal" />
    <whitespace text="\n" />
    <comment text="# then run clean_exit()" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="trap" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="clean_exit" />
            <"\"" text="\"" />
        </string>
        <whitespace text=" " />
        <word text="SIGINT" />
        <whitespace text=" " />
        <word text="SIGUSR1" />
    </command>
    <whitespace text="\n" />
    <comment text="# if we get USR2 signal then run die()." />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="trap" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="die" />
            <"\"" text="\"" />
        </string>
        <whitespace text=" " />
        <word text="SIGUSR2" />
    </command>
    <whitespace text="\n\n" />
    <list>
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="STORE_CONFIG" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <whitespace text=" " />
        <"&&" text="&&" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="write_config" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <special_variable_name text="@" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="LIST_RUNNING" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <comment text="#echo -e \"List of running $PROGNAME instances:\\n\"" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="list_running" />
            </command_name>
        </command>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="0" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="LIST_CLIENTS_ID" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="list_clients" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="LIST_CLIENTS_ID" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="0" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="STOP_ID" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Trying to kill " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="PROGNAME" />
                </simple_expansion>
                <string_content text=" instance associated with " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="STOP_ID" />
                </simple_expansion>
                <string_content text="..." />
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="send_stop" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="STOP_ID" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="0" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="FIX_UNMANAGED" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Trying to fix unmanaged status in NetworkManager..." />
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="networkmanager_fix_unmanaged" />
            </command_name>
        </command>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="0" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DAEMONIZE" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="1" />
                </binary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="RUNNING_AS_DAEMON" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <comment text="# Assume we're running underneath a service manager if PIDFILE is set" />
        <whitespace text="\n    " />
        <comment text="# and don't clobber it's output with a useless message" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[" text="[" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-z" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="DAEMON_PIDFILE" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
                <whitespace text=" " />
                <"]" text="]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Running as Daemon..." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n    " />
        <comment text="# run a detached create_ap" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <variable_assignment>
                    <variable_name text="RUNNING_AS_DAEMON" />
                    <"=" text="=" />
                    <number text="1" />
                </variable_assignment>
                <whitespace text=" " />
                <command_name>
                    <word text="setsid" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <special_variable_name text="0" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <expansion>
                        <"${" text="${" />
                        <subscript>
                            <variable_name text="ARGS" />
                            <"[" text="[" />
                            <word text="@" />
                            <"]" text="]" />
                        </subscript>
                        <"}" text="}" />
                    </expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">>" text=">>" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="DAEMON_LOGFILE" />
                </simple_expansion>
            </file_redirect>
            <whitespace text=" " />
            <file_redirect>
                <file_descriptor text="2" />
                <">&" text=">&" />
                <number text="1" />
            </file_redirect>
        </redirected_statement>
        <whitespace text=" " />
        <"&" text="&" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="0" />
        </command>
        <whitespace text="\n" />
        <elif_clause>
            <elif text="elif" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="RUNNING_AS_DAEMON" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="DAEMON_PIDFILE" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <special_variable_name text="$" />
                    </simple_expansion>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DAEMON_PIDFILE" />
                    </simple_expansion>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n" />
        </elif_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="FREQ_BAND_SET" />
                </simple_expansion>
                <whitespace text=" " />
                <"!=" text="!=" />
                <whitespace text=" " />
                <number text="0" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="FREQ_BAND" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <"!=" text="!=" />
                        <whitespace text=" " />
                        <word text="2.4" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="FREQ_BAND" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <"!=" text="!=" />
                        <whitespace text=" " />
                        <number text="5" />
                    </binary_expression>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ERROR: Invalid frequency band" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="CHANNEL" />
                </simple_expansion>
                <whitespace text=" " />
                <"==" text="==" />
                <whitespace text=" " />
                <word text="default" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="USING_DEFAULT_CHANNEL" />
            <"=" text="=" />
            <number text="1" />
        </variable_assignment>
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="FREQ_BAND" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <"==" text="==" />
                    <whitespace text=" " />
                    <word text="2.4" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="CHANNEL" />
                <"=" text="=" />
                <number text="1" />
            </variable_assignment>
            <whitespace text="\n    " />
            <else_clause>
                <else text="else" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="CHANNEL" />
                    <"=" text="=" />
                    <number text="36" />
                </variable_assignment>
                <whitespace text="\n" />
            </else_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="USING_DEFAULT_CHANNEL" />
                <"=" text="=" />
                <number text="0" />
            </variable_assignment>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="FREQ_BAND" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <"!=" text="!=" />
                    <whitespace text=" " />
                    <number text="5" />
                </binary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CHANNEL" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-gt" />
                    <whitespace text=" " />
                    <number text="14" />
                </binary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Channel number is greater than 14, assuming 5GHz frequency band" />
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="FREQ_BAND" />
            <"=" text="=" />
            <number text="5" />
        </variable_assignment>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="WIFI_IFACE" />
        <"=" text="=" />
        <simple_expansion>
            <"$" text="$" />
            <variable_name text="1" />
        </simple_expansion>
    </variable_assignment>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <negated_command>
            <"!" text="!" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="is_wifi_interface" />
                </command_name>
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
            </command>
        </negated_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ERROR: '" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text="' is not a WiFi interface" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <negated_command>
            <"!" text="!" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="can_be_ap" />
                </command_name>
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
            </command>
        </negated_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ERROR: Your adapter does not support AP (master) mode" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <negated_command>
            <"!" text="!" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="can_be_sta_and_ap" />
                </command_name>
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
            </command>
        </negated_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="is_wifi_connected" />
                </command_name>
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
            </command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ERROR: Your adapter can not be a station (i.e. be connected) and an AP at the same time" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n    " />
            <elif_clause>
                <elif text="elif" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NO_VIRT" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="WARN: Your adapter does not fully support AP virtual interface, enabling --no-virt" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">&" text=">&" />
                        <number text="2" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="NO_VIRT" />
                    <"=" text="=" />
                    <number text="1" />
                </variable_assignment>
                <whitespace text="\n" />
            </elif_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="HOSTAPD" />
        <"=" text="=" />
        <command_substitution>
            <"$(" text="$(" />
            <command>
                <command_name>
                    <word text="which" />
                </command_name>
                <whitespace text=" " />
                <word text="hostapd" />
            </command>
            <")" text=")" />
        </command_substitution>
    </variable_assignment>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <"!" text="!" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-x" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="HOSTAPD" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ERROR: hostapd not found." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_adapter_kernel_module" />
                        </command_name>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <")" text=")" />
                </command_substitution>
                <whitespace text=" " />
                <"=~" text="=~" />
                <whitespace text=" " />
                <regex text="^(8192[cd][ue]|8723a[sue])$" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <redirected_statement>
                <pipeline>
                    <negated_command>
                        <"!" text="!" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="strings" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="HOSTAPD" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                    </negated_command>
                    <whitespace text=" " />
                    <"|" text="|" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="grep" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-m1" />
                        <whitespace text=" " />
                        <word text="rtl871xdrv" />
                    </command>
                </pipeline>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <whitespace text=" " />
                    <word text="/dev/null" />
                </file_redirect>
                <whitespace text=" " />
                <file_redirect>
                    <file_descriptor text="2" />
                    <">&" text=">&" />
                    <number text="1" />
                </file_redirect>
            </redirected_statement>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ERROR: You need to patch your hostapd with rtl871xdrv patches." />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DRIVER" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <"!=" text="!=" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="rtl871xdrv" />
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="WARN: Your adapter needs rtl871xdrv, enabling --driver=rtl871xdrv" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="DRIVER" />
                <"=" text="=" />
                <word text="rtl871xdrv" />
            </variable_assignment>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <binary_expression>
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="SHARE_METHOD" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"!=" text="!=" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="nat" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="SHARE_METHOD" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"!=" text="!=" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="bridge" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                </binary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <binary_expression>
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="SHARE_METHOD" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <"!=" text="!=" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="none" />
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ERROR: Wrong Internet sharing method" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
        </command>
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="usage" />
                </command_name>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="NEW_MACADDR" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <negated_command>
                <"!" text="!" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="is_macaddr" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NEW_MACADDR" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
            </negated_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ERROR: '" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NEW_MACADDR" />
                            <"}" text="}" />
                        </expansion>
                        <string_content text="' is not a valid MAC address" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <negated_command>
                <"!" text="!" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="is_unicast_macaddr" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NEW_MACADDR" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
            </negated_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ERROR: The first byte of MAC address (" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NEW_MACADDR" />
                            <"}" text="}" />
                        </expansion>
                        <string_content text=") must be even" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <command_substitution>
                        <"$(" text="$(" />
                        <pipeline>
                            <command>
                                <command_name>
                                    <word text="get_all_macaddrs" />
                                </command_name>
                            </command>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="grep" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-c" />
                                <whitespace text=" " />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="NEW_MACADDR" />
                                    <"}" text="}" />
                                </expansion>
                            </command>
                        </pipeline>
                        <")" text=")" />
                    </command_substitution>
                    <whitespace text=" " />
                    <test_operator text="-ne" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="WARN: MAC address '" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="NEW_MACADDR" />
                            <"}" text="}" />
                        </expansion>
                        <string_content text="' already exists. Because of this, you may encounter some problems" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="SHARE_METHOD" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"!=" text="!=" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="none" />
                    <"\"" text="\"" />
                </string>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="MIN_REQUIRED_ARGS" />
            <"=" text="=" />
            <number text="2" />
        </variable_assignment>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="MIN_REQUIRED_ARGS" />
                <"=" text="=" />
                <number text="1" />
            </variable_assignment>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <special_variable_name text="#" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-gt" />
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="MIN_REQUIRED_ARGS" />
                </simple_expansion>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="SHARE_METHOD" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <"!=" text="!=" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="none" />
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <special_variable_name text="#" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-ne" />
                            <whitespace text=" " />
                            <number text="3" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <special_variable_name text="#" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-ne" />
                            <whitespace text=" " />
                            <number text="4" />
                        </binary_expression>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n            " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="usage" />
                        </command_name>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">&" text=">&" />
                        <number text="2" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n            " />
                <command>
                    <command_name>
                        <word text="exit" />
                    </command_name>
                    <whitespace text=" " />
                    <number text="1" />
                </command>
                <whitespace text="\n        " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="INTERNET_IFACE" />
                <"=" text="=" />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="2" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </variable_assignment>
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="SSID" />
                <"=" text="=" />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="3" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </variable_assignment>
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="PASSPHRASE" />
                <"=" text="=" />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="4" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </variable_assignment>
            <whitespace text="\n    " />
            <else_clause>
                <else text="else" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <special_variable_name text="#" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-ne" />
                                <whitespace text=" " />
                                <number text="2" />
                            </binary_expression>
                            <whitespace text=" " />
                            <"&&" text="&&" />
                            <whitespace text=" " />
                            <binary_expression>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <special_variable_name text="#" />
                                </simple_expansion>
                                <whitespace text=" " />
                                <test_operator text="-ne" />
                                <whitespace text=" " />
                                <number text="3" />
                            </binary_expression>
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="usage" />
                            </command_name>
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">&" text=">&" />
                            <number text="2" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="exit" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="SSID" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="2" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="PASSPHRASE" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="3" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n" />
            </else_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="SHARE_METHOD" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"!=" text="!=" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="none" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <special_variable_name text="#" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-ne" />
                            <whitespace text=" " />
                            <number text="2" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="usage" />
                            </command_name>
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">&" text=">&" />
                            <number text="2" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="exit" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="INTERNET_IFACE" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="2" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="tty" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-s" />
                </command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <while_statement>
                    <while text="while" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text=":" />
                        </command_name>
                    </command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <do_group>
                        <do text="do" />
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="read" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-p" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="SSID: " />
                                <"\"" text="\"" />
                            </string>
                            <whitespace text=" " />
                            <word text="SSID" />
                        </command>
                        <whitespace text="\n            " />
                        <if_statement>
                            <if text="if" />
                            <whitespace text=" " />
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <binary_expression>
                                    <binary_expression>
                                        <expansion>
                                            <"${" text="${" />
                                            <"#" text="#" />
                                            <variable_name text="SSID" />
                                            <"}" text="}" />
                                        </expansion>
                                        <whitespace text=" " />
                                        <test_operator text="-lt" />
                                        <whitespace text=" " />
                                        <number text="1" />
                                    </binary_expression>
                                    <whitespace text=" " />
                                    <"||" text="||" />
                                    <whitespace text=" " />
                                    <binary_expression>
                                        <expansion>
                                            <"${" text="${" />
                                            <"#" text="#" />
                                            <variable_name text="SSID" />
                                            <"}" text="}" />
                                        </expansion>
                                        <whitespace text=" " />
                                        <test_operator text="-gt" />
                                        <whitespace text=" " />
                                        <number text="32" />
                                    </binary_expression>
                                </binary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n                " />
                            <redirected_statement>
                                <command>
                                    <command_name>
                                        <word text="echo" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="ERROR: Invalid SSID length " />
                                        <expansion>
                                            <"${" text="${" />
                                            <"#" text="#" />
                                            <variable_name text="SSID" />
                                            <"}" text="}" />
                                        </expansion>
                                        <string_content text=" (expected 1..32)" />
                                        <"\"" text="\"" />
                                    </string>
                                </command>
                                <whitespace text=" " />
                                <file_redirect>
                                    <">&" text=">&" />
                                    <number text="2" />
                                </file_redirect>
                            </redirected_statement>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="continue" />
                                </command_name>
                            </command>
                            <whitespace text="\n            " />
                            <fi text="fi" />
                        </if_statement>
                        <whitespace text="\n            " />
                        <command>
                            <command_name>
                                <word text="break" />
                            </command_name>
                        </command>
                        <whitespace text="\n        " />
                        <done text="done" />
                    </do_group>
                </while_statement>
                <whitespace text="\n        " />
                <while_statement>
                    <while text="while" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text=":" />
                        </command_name>
                    </command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <do_group>
                        <do text="do" />
                        <whitespace text="\n            " />
                        <if_statement>
                            <if text="if" />
                            <whitespace text=" " />
                            <test_command>
                                <"[[" text="[[" />
                                <whitespace text=" " />
                                <binary_expression>
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="USE_PSK" />
                                    </simple_expansion>
                                    <whitespace text=" " />
                                    <test_operator text="-eq" />
                                    <whitespace text=" " />
                                    <number text="0" />
                                </binary_expression>
                                <whitespace text=" " />
                                <"]]" text="]]" />
                            </test_command>
                            <";" text=";" />
                            <whitespace text=" " />
                            <then text="then" />
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="read" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-p" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="Passphrase: " />
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <word text="-s" />
                                <whitespace text=" " />
                                <word text="PASSPHRASE" />
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                            </command>
                            <whitespace text="\n                " />
                            <if_statement>
                                <if text="if" />
                                <whitespace text=" " />
                                <list>
                                    <test_command>
                                        <"[[" text="[[" />
                                        <whitespace text=" " />
                                        <binary_expression>
                                            <binary_expression>
                                                <expansion>
                                                    <"${" text="${" />
                                                    <"#" text="#" />
                                                    <variable_name text="PASSPHRASE" />
                                                    <"}" text="}" />
                                                </expansion>
                                                <whitespace text=" " />
                                                <test_operator text="-gt" />
                                                <whitespace text=" " />
                                                <number text="0" />
                                            </binary_expression>
                                            <whitespace text=" " />
                                            <"&&" text="&&" />
                                            <whitespace text=" " />
                                            <binary_expression>
                                                <expansion>
                                                    <"${" text="${" />
                                                    <"#" text="#" />
                                                    <variable_name text="PASSPHRASE" />
                                                    <"}" text="}" />
                                                </expansion>
                                                <whitespace text=" " />
                                                <test_operator text="-lt" />
                                                <whitespace text=" " />
                                                <number text="8" />
                                            </binary_expression>
                                        </binary_expression>
                                        <whitespace text=" " />
                                        <"]]" text="]]" />
                                    </test_command>
                                    <whitespace text=" " />
                                    <"||" text="||" />
                                    <whitespace text=" " />
                                    <test_command>
                                        <"[[" text="[[" />
                                        <whitespace text=" " />
                                        <binary_expression>
                                            <expansion>
                                                <"${" text="${" />
                                                <"#" text="#" />
                                                <variable_name text="PASSPHRASE" />
                                                <"}" text="}" />
                                            </expansion>
                                            <whitespace text=" " />
                                            <test_operator text="-gt" />
                                            <whitespace text=" " />
                                            <number text="63" />
                                        </binary_expression>
                                        <whitespace text=" " />
                                        <"]]" text="]]" />
                                    </test_command>
                                </list>
                                <";" text=";" />
                                <whitespace text=" " />
                                <then text="then" />
                                <whitespace text="\n                    " />
                                <redirected_statement>
                                    <command>
                                        <command_name>
                                            <word text="echo" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <string_content text="ERROR: Invalid passphrase length " />
                                            <expansion>
                                                <"${" text="${" />
                                                <"#" text="#" />
                                                <variable_name text="PASSPHRASE" />
                                                <"}" text="}" />
                                            </expansion>
                                            <string_content text=" (expected 8..63)" />
                                            <"\"" text="\"" />
                                        </string>
                                    </command>
                                    <whitespace text=" " />
                                    <file_redirect>
                                        <">&" text=">&" />
                                        <number text="2" />
                                    </file_redirect>
                                </redirected_statement>
                                <whitespace text="\n                    " />
                                <command>
                                    <command_name>
                                        <word text="continue" />
                                    </command_name>
                                </command>
                                <whitespace text="\n                " />
                                <fi text="fi" />
                            </if_statement>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="read" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-p" />
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="Retype passphrase: " />
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <word text="-s" />
                                <whitespace text=" " />
                                <word text="PASSPHRASE2" />
                            </command>
                            <whitespace text="\n                " />
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                            </command>
                            <whitespace text="\n                " />
                            <if_statement>
                                <if text="if" />
                                <whitespace text=" " />
                                <test_command>
                                    <"[[" text="[[" />
                                    <whitespace text=" " />
                                    <binary_expression>
                                        <string>
                                            <"\"" text="\"" />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="PASSPHRASE" />
                                            </simple_expansion>
                                            <"\"" text="\"" />
                                        </string>
                                        <whitespace text=" " />
                                        <"!=" text="!=" />
                                        <whitespace text=" " />
                                        <string>
                                            <"\"" text="\"" />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="PASSPHRASE2" />
                                            </simple_expansion>
                                            <"\"" text="\"" />
                                        </string>
                                    </binary_expression>
                                    <whitespace text=" " />
                                    <"]]" text="]]" />
                                </test_command>
                                <";" text=";" />
                                <whitespace text=" " />
                                <then text="then" />
                                <whitespace text="\n                    " />
                                <command>
                                    <command_name>
                                        <word text="echo" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="Passphrases do not match." />
                                        <"\"" text="\"" />
                                    </string>
                                </command>
                                <whitespace text="\n                " />
                                <else_clause>
                                    <else text="else" />
                                    <whitespace text="\n                    " />
                                    <command>
                                        <command_name>
                                            <word text="break" />
                                        </command_name>
                                    </command>
                                    <whitespace text="\n" />
                                </else_clause>
                                <whitespace text="                " />
                                <fi text="fi" />
                            </if_statement>
                            <whitespace text="\n            " />
                            <else_clause>
                                <else text="else" />
                                <whitespace text="\n                " />
                                <command>
                                    <command_name>
                                        <word text="read" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="-p" />
                                    <whitespace text=" " />
                                    <string>
                                        <"\"" text="\"" />
                                        <string_content text="PSK: " />
                                        <"\"" text="\"" />
                                    </string>
                                    <whitespace text=" " />
                                    <word text="PASSPHRASE" />
                                </command>
                                <whitespace text="\n                " />
                                <command>
                                    <command_name>
                                        <word text="echo" />
                                    </command_name>
                                </command>
                                <whitespace text="\n                " />
                                <if_statement>
                                    <if text="if" />
                                    <whitespace text=" " />
                                    <test_command>
                                        <"[[" text="[[" />
                                        <whitespace text=" " />
                                        <binary_expression>
                                            <binary_expression>
                                                <expansion>
                                                    <"${" text="${" />
                                                    <"#" text="#" />
                                                    <variable_name text="PASSPHRASE" />
                                                    <"}" text="}" />
                                                </expansion>
                                                <whitespace text=" " />
                                                <test_operator text="-gt" />
                                                <whitespace text=" " />
                                                <number text="0" />
                                            </binary_expression>
                                            <whitespace text=" " />
                                            <"&&" text="&&" />
                                            <whitespace text=" " />
                                            <binary_expression>
                                                <expansion>
                                                    <"${" text="${" />
                                                    <"#" text="#" />
                                                    <variable_name text="PASSPHRASE" />
                                                    <"}" text="}" />
                                                </expansion>
                                                <whitespace text=" " />
                                                <test_operator text="-ne" />
                                                <whitespace text=" " />
                                                <number text="64" />
                                            </binary_expression>
                                        </binary_expression>
                                        <whitespace text=" " />
                                        <"]]" text="]]" />
                                    </test_command>
                                    <";" text=";" />
                                    <whitespace text=" " />
                                    <then text="then" />
                                    <whitespace text="\n                    " />
                                    <redirected_statement>
                                        <command>
                                            <command_name>
                                                <word text="echo" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <string>
                                                <"\"" text="\"" />
                                                <string_content text="ERROR: Invalid pre-shared-key length " />
                                                <expansion>
                                                    <"${" text="${" />
                                                    <"#" text="#" />
                                                    <variable_name text="PASSPHRASE" />
                                                    <"}" text="}" />
                                                </expansion>
                                                <string_content text=" (expected 64)" />
                                                <"\"" text="\"" />
                                            </string>
                                        </command>
                                        <whitespace text=" " />
                                        <file_redirect>
                                            <">&" text=">&" />
                                            <number text="2" />
                                        </file_redirect>
                                    </redirected_statement>
                                    <whitespace text="\n                    " />
                                    <command>
                                        <command_name>
                                            <word text="continue" />
                                        </command_name>
                                    </command>
                                    <whitespace text="\n                " />
                                    <fi text="fi" />
                                </if_statement>
                                <whitespace text="\n" />
                            </else_clause>
                            <whitespace text="            " />
                            <fi text="fi" />
                        </if_statement>
                        <whitespace text="\n        " />
                        <done text="done" />
                    </do_group>
                </while_statement>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="read" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="SSID" />
                    </command>
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="read" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="PASSPHRASE" />
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <list>
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="SHARE_METHOD" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <"!=" text="!=" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="none" />
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <whitespace text=" " />
            <"&&" text="&&" />
            <whitespace text=" " />
            <negated_command>
                <"!" text="!" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="is_interface" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="INTERNET_IFACE" />
                    </simple_expansion>
                </command>
            </negated_command>
        </list>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ERROR: '" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="INTERNET_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text="' is not an interface" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <binary_expression>
                    <expansion>
                        <"${" text="${" />
                        <"#" text="#" />
                        <variable_name text="SSID" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text=" " />
                    <test_operator text="-lt" />
                    <whitespace text=" " />
                    <number text="1" />
                </binary_expression>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <binary_expression>
                    <expansion>
                        <"${" text="${" />
                        <"#" text="#" />
                        <variable_name text="SSID" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text=" " />
                    <test_operator text="-gt" />
                    <whitespace text=" " />
                    <number text="32" />
                </binary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ERROR: Invalid SSID length " />
                    <expansion>
                        <"${" text="${" />
                        <"#" text="#" />
                        <variable_name text="SSID" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text=" (expected 1..32)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USE_PSK" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="0" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <list>
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <binary_expression>
                            <expansion>
                                <"${" text="${" />
                                <"#" text="#" />
                                <variable_name text="PASSPHRASE" />
                                <"}" text="}" />
                            </expansion>
                            <whitespace text=" " />
                            <test_operator text="-gt" />
                            <whitespace text=" " />
                            <number text="0" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <binary_expression>
                            <expansion>
                                <"${" text="${" />
                                <"#" text="#" />
                                <variable_name text="PASSPHRASE" />
                                <"}" text="}" />
                            </expansion>
                            <whitespace text=" " />
                            <test_operator text="-lt" />
                            <whitespace text=" " />
                            <number text="8" />
                        </binary_expression>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <expansion>
                            <"${" text="${" />
                            <"#" text="#" />
                            <variable_name text="PASSPHRASE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <test_operator text="-gt" />
                        <whitespace text=" " />
                        <number text="63" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
            </list>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ERROR: Invalid passphrase length " />
                        <expansion>
                            <"${" text="${" />
                            <"#" text="#" />
                            <variable_name text="PASSPHRASE" />
                            <"}" text="}" />
                        </expansion>
                        <string_content text=" (expected 8..63)" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <elif_clause>
            <elif text="elif" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <binary_expression>
                        <expansion>
                            <"${" text="${" />
                            <"#" text="#" />
                            <variable_name text="PASSPHRASE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <test_operator text="-gt" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <binary_expression>
                        <expansion>
                            <"${" text="${" />
                            <"#" text="#" />
                            <variable_name text="PASSPHRASE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <number text="64" />
                    </binary_expression>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="ERROR: Invalid pre-shared-key length " />
                        <expansion>
                            <"${" text="${" />
                            <"#" text="#" />
                            <variable_name text="PASSPHRASE" />
                            <"}" text="}" />
                        </expansion>
                        <string_content text=" (expected 64)" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="exit" />
                </command_name>
                <whitespace text=" " />
                <number text="1" />
            </command>
            <whitespace text="\n" />
        </elif_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_adapter_kernel_module" />
                        </command_name>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <")" text=")" />
                </command_substitution>
                <whitespace text=" " />
                <"=~" text="=~" />
                <whitespace text=" " />
                <regex text="^rtl[0-9].*$" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-n" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="PASSPHRASE" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="WARN: Realtek drivers usually have problems with WPA1, enabling -w 2" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="WPA_VERSION" />
                <"=" text="=" />
                <number text="2" />
            </variable_assignment>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="WARN: If AP doesn't work, please read: howto/realtek.md" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="NO_VIRT" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="1" />
                </binary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <binary_expression>
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="WIFI_IFACE" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <"==" text="==" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="INTERNET_IFACE" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <word text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ERROR: You can not share your connection from the same" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text=" interface if you are using --no-virt option." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="exit" />
            </command_name>
            <whitespace text=" " />
            <number text="1" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <command>
        <command_name>
            <word text="mutex_lock" />
        </command_name>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="trap" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="cleanup" />
            <"\"" text="\"" />
        </string>
        <whitespace text=" " />
        <word text="EXIT" />
    </command>
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="CONFDIR" />
        <"=" text="=" />
        <command_substitution>
            <"$(" text="$(" />
            <command>
                <command_name>
                    <word text="mktemp" />
                </command_name>
                <whitespace text=" " />
                <word text="-d" />
                <whitespace text=" " />
                <concatenation>
                    <word text="/tmp/create_ap." />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <word text=".conf.XXXXXXXX" />
                </concatenation>
            </command>
            <")" text=")" />
        </command_substitution>
    </variable_assignment>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="Config dir: " />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="CONFDIR" />
            </simple_expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="PID: " />
            <simple_expansion>
                <"$" text="$" />
                <special_variable_name text="$" />
            </simple_expansion>
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <simple_expansion>
                <"$" text="$" />
                <special_variable_name text="$" />
            </simple_expansion>
        </command>
        <whitespace text=" " />
        <file_redirect>
            <">" text=">" />
            <whitespace text=" " />
            <concatenation>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="CONFDIR" />
                </simple_expansion>
                <word text="/pid" />
            </concatenation>
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n\n" />
    <comment text="# to make --list-running work from any user, we must give read" />
    <whitespace text="\n" />
    <comment text="# permissions to $CONFDIR and $CONFDIR/pid" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="chmod" />
        </command_name>
        <whitespace text=" " />
        <number text="755" />
        <whitespace text=" " />
        <simple_expansion>
            <"$" text="$" />
            <variable_name text="CONFDIR" />
        </simple_expansion>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="chmod" />
        </command_name>
        <whitespace text=" " />
        <number text="444" />
        <whitespace text=" " />
        <concatenation>
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="CONFDIR" />
            </simple_expansion>
            <word text="/pid" />
        </concatenation>
    </command>
    <whitespace text="\n\n" />
    <variable_assignment>
        <variable_name text="COMMON_CONFDIR" />
        <"=" text="=" />
        <word text="/tmp/create_ap.common.conf" />
    </variable_assignment>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="mkdir" />
        </command_name>
        <whitespace text=" " />
        <word text="-p" />
        <whitespace text=" " />
        <simple_expansion>
            <"$" text="$" />
            <variable_name text="COMMON_CONFDIR" />
        </simple_expansion>
    </command>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="SHARE_METHOD" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"==" text="==" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="nat" />
                    <"\"" text="\"" />
                </string>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="INTERNET_IFACE" />
                </simple_expansion>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">" text=">" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/nat_internet_iface" />
                </concatenation>
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="cp_n" />
            </command_name>
            <whitespace text=" " />
            <concatenation>
                <word text="/proc/sys/net/ipv4/conf/" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="INTERNET_IFACE" />
                </simple_expansion>
                <word text="/forwarding" />
            </concatenation>
            <whitespace text=" \\" />
            <whitespace text="\n       " />
            <concatenation>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="COMMON_CONFDIR" />
                </simple_expansion>
                <word text="/" />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="INTERNET_IFACE" />
                    <"}" text="}" />
                </expansion>
                <word text="_forwarding" />
            </concatenation>
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="cp_n" />
        </command_name>
        <whitespace text=" " />
        <word text="/proc/sys/net/ipv4/ip_forward" />
        <whitespace text=" " />
        <simple_expansion>
            <"$" text="$" />
            <variable_name text="COMMON_CONFDIR" />
        </simple_expansion>
    </command>
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-e" />
                <whitespace text=" " />
                <word text="/proc/sys/net/bridge/bridge-nf-call-iptables" />
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="cp_n" />
            </command_name>
            <whitespace text=" " />
            <word text="/proc/sys/net/bridge/bridge-nf-call-iptables" />
            <whitespace text=" " />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="COMMON_CONFDIR" />
            </simple_expansion>
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="mutex_unlock" />
        </command_name>
    </command>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="SHARE_METHOD" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"==" text="==" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="bridge" />
                    <"\"" text="\"" />
                </string>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="is_bridge_interface" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="INTERNET_IFACE" />
                </simple_expansion>
            </command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="BRIDGE_IFACE" />
                <"=" text="=" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="INTERNET_IFACE" />
                </simple_expansion>
            </variable_assignment>
            <whitespace text="\n    " />
            <else_clause>
                <else text="else" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="BRIDGE_IFACE" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <command>
                            <command_name>
                                <word text="alloc_new_iface" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="br" />
                        </command>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
                <whitespace text="\n" />
            </else_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="USE_IWCONFIG" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="0" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="iw" />
            </command_name>
            <whitespace text=" " />
            <word text="dev" />
            <whitespace text=" " />
            <expansion>
                <"${" text="${" />
                <variable_name text="WIFI_IFACE" />
                <"}" text="}" />
            </expansion>
            <whitespace text=" " />
            <word text="set" />
            <whitespace text=" " />
            <word text="power_save" />
            <whitespace text=" " />
            <word text="off" />
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="NO_VIRT" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="0" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="VWIFI_IFACE" />
            <"=" text="=" />
            <command_substitution>
                <"$(" text="$(" />
                <command>
                    <command_name>
                        <word text="alloc_new_iface" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="ap" />
                </command>
                <")" text=")" />
            </command_substitution>
        </variable_assignment>
        <whitespace text="\n\n    " />
        <comment text="# in NetworkManager 0.9.9 and above we can set the interface as unmanaged without" />
        <whitespace text="\n    " />
        <comment text="# the need of MAC address, so we set it before we create the virtual interface." />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <list>
                <command>
                    <command_name>
                        <word text="networkmanager_is_running" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NM_OLDER_VERSION" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
            </list>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <word text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="Network Manager found, set " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="VWIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text=" as unmanaged device... " />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="networkmanager_add_unmanaged" />
                </command_name>
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="VWIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
            </command>
            <whitespace text="\n        " />
            <comment text="# do not call networkmanager_wait_until_unmanaged because interface does not" />
            <whitespace text="\n        " />
            <comment text="# exist yet" />
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="DONE" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n\n\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <list>
                <command>
                    <command_name>
                        <word text="is_wifi_connected" />
                    </command_name>
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                </command>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="FREQ_BAND_SET" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="0" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
            </list>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="WIFI_IFACE_FREQ" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="iw" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="dev" />
                            <whitespace text=" " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="WIFI_IFACE" />
                                <"}" text="}" />
                            </expansion>
                            <whitespace text=" " />
                            <word text="link" />
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-i" />
                            <whitespace text=" " />
                            <word text="freq" />
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="awk" />
                            </command_name>
                            <whitespace text=" " />
                            <raw_string text="'{print $2}'" />
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="WIFI_IFACE_CHANNEL" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="ieee80211_frequency_to_channel" />
                        </command_name>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE_FREQ" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <word text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text=" is already associated with channel " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE_CHANNEL" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text=" (" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE_FREQ" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text=" MHz)" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n        " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="is_5ghz_frequency" />
                    </command_name>
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="WIFI_IFACE_FREQ" />
                    </simple_expansion>
                </command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n            " />
                <variable_assignment>
                    <variable_name text="FREQ_BAND" />
                    <"=" text="=" />
                    <number text="5" />
                </variable_assignment>
                <whitespace text="\n        " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="FREQ_BAND" />
                        <"=" text="=" />
                        <word text="2.4" />
                    </variable_assignment>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="        " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n        " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="WIFI_IFACE_CHANNEL" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CHANNEL" />
                        </simple_expansion>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n            " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <subshell>
                        <"(" text="(" />
                        <whitespace text=" " />
                        <pipeline>
                            <command>
                                <command_name>
                                    <word text="get_adapter_info" />
                                </command_name>
                                <whitespace text=" " />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="IFACE" />
                                    <"}" text="}" />
                                </expansion>
                            </command>
                            <whitespace text=" " />
                            <"|" text="|" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="grep" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="#channels <= 2" />
                                    <"\"" text="\"" />
                                </string>
                                <whitespace text=" " />
                                <word text="-q" />
                            </command>
                        </pipeline>
                        <whitespace text=" " />
                        <")" text=")" />
                    </subshell>
                    <whitespace text="\n            " />
                    <then text="then" />
                    <whitespace text="\n                " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-e" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="\\nmultiple channels supported" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n            " />
                    <else_clause>
                        <else text="else" />
                        <whitespace text="\n                " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-e" />
                            <whitespace text="  " />
                            <concatenation>
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="\\nmultiple channels not supported" />
                                    <"\"" text="\"" />
                                </string>
                                <word text="," />
                            </concatenation>
                        </command>
                        <whitespace text="\n                " />
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-e" />
                            <whitespace text="  " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="\\nfallback to channel " />
                                <expansion>
                                    <"${" text="${" />
                                    <variable_name text="WIFI_IFACE_CHANNEL" />
                                    <"}" text="}" />
                                </expansion>
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text="\n                " />
                        <variable_assignment>
                            <variable_name text="CHANNEL" />
                            <"=" text="=" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="WIFI_IFACE_CHANNEL" />
                            </simple_expansion>
                        </variable_assignment>
                        <whitespace text="\n" />
                    </else_clause>
                    <whitespace text="            " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n        " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="channel------------------ " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="CHANNEL" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="        " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <elif_clause>
                <elif text="elif" />
                <whitespace text=" " />
                <list>
                    <command>
                        <command_name>
                            <word text="is_wifi_connected" />
                        </command_name>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="FREQ_BAND_SET" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="1" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                </list>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Custom frequency band set with " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="FREQ_BAND" />
                            <"}" text="}" />
                        </expansion>
                        <string_content text="Ghz with channel " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="CHANNEL" />
                            <"}" text="}" />
                        </expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n" />
            </elif_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n\n\n    " />
        <variable_assignment>
            <variable_name text="VIRTDIEMSG" />
            <"=" text="=" />
            <string>
                <"\"" text="\"" />
                <string_content text="Maybe your WiFi adapter does not fully support virtual interfaces." />
                <whitespace text="\n" />
                <string_content text="       Try again with --no-virt." />
                <"\"" text="\"" />
            </string>
        </variable_assignment>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <word text="-n" />
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Creating a virtual WiFi interface... " />
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="iw" />
                </command_name>
                <whitespace text=" " />
                <word text="dev" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
                <whitespace text=" " />
                <word text="interface" />
                <whitespace text=" " />
                <word text="add" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="VWIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
                <whitespace text=" " />
                <word text="type" />
                <whitespace text=" " />
                <word text="__ap" />
            </command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <comment text="# now we can call networkmanager_wait_until_unmanaged" />
            <whitespace text="\n        " />
            <list>
                <list>
                    <command>
                        <command_name>
                            <word text="networkmanager_is_running" />
                        </command_name>
                    </command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="NM_OLDER_VERSION" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="0" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                </list>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="networkmanager_wait_until_unmanaged" />
                    </command_name>
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="VWIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                </command>
            </list>
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="VWIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <string_content text=" created." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n    " />
            <else_clause>
                <else text="else" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="VWIFI_IFACE" />
                    <"=" text="=" />
                </variable_assignment>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="VIRTDIEMSG" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n" />
            </else_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="OLD_MACADDR" />
            <"=" text="=" />
            <command_substitution>
                <"$(" text="$(" />
                <command>
                    <command_name>
                        <word text="get_macaddr" />
                    </command_name>
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="VWIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                </command>
                <")" text=")" />
            </command_substitution>
        </variable_assignment>
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <unary_expression>
                        <test_operator text="-z" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="NEW_MACADDR" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <binary_expression>
                        <command_substitution>
                            <"$(" text="$(" />
                            <pipeline>
                                <command>
                                    <command_name>
                                        <word text="get_all_macaddrs" />
                                    </command_name>
                                </command>
                                <whitespace text=" " />
                                <"|" text="|" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="grep" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="-c" />
                                    <whitespace text=" " />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="OLD_MACADDR" />
                                        <"}" text="}" />
                                    </expansion>
                                </command>
                            </pipeline>
                            <")" text=")" />
                        </command_substitution>
                        <whitespace text=" " />
                        <test_operator text="-ne" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="NEW_MACADDR" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_new_macaddr" />
                        </command_name>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="VWIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="WIFI_IFACE" />
            <"=" text="=" />
            <expansion>
                <"${" text="${" />
                <variable_name text="VWIFI_IFACE" />
                <"}" text="}" />
            </expansion>
        </variable_assignment>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="OLD_MACADDR" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_macaddr" />
                        </command_name>
                        <whitespace text=" " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WIFI_IFACE" />
                            <"}" text="}" />
                        </expansion>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <command>
        <command_name>
            <word text="mutex_lock" />
        </command_name>
    </command>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="WIFI_IFACE" />
            </simple_expansion>
        </command>
        <whitespace text=" " />
        <file_redirect>
            <">" text=">" />
            <whitespace text=" " />
            <concatenation>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="CONFDIR" />
                </simple_expansion>
                <word text="/wifi_iface" />
            </concatenation>
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="chmod" />
        </command_name>
        <whitespace text=" " />
        <number text="444" />
        <whitespace text=" " />
        <concatenation>
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="CONFDIR" />
            </simple_expansion>
            <word text="/wifi_iface" />
        </concatenation>
    </command>
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="mutex_unlock" />
        </command_name>
    </command>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <unary_expression>
                    <test_operator text="-n" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="COUNTRY" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="USE_IWCONFIG" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="iw" />
            </command_name>
            <whitespace text=" " />
            <word text="reg" />
            <whitespace text=" " />
            <word text="set" />
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="COUNTRY" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# Fallback to currently connected channel if the adapter can not transmit to the default channel (1)" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="can_transmit_to_channel" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
                <"\"" text="\"" />
            </string>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="CHANNEL" />
                    <"}" text="}" />
                </expansion>
                <"\"" text="\"" />
            </string>
        </command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Transmitting to channel " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="CHANNEL" />
                    <"}" text="}" />
                </expansion>
                <string_content text="..." />
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="USING_DEFAULT_CHANNEL" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="1" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="WIFI_IFACE_CHANNEL" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-ne" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="CHANNEL" />
                            </simple_expansion>
                        </binary_expression>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-e" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="Your adapter can not transmit to channel " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="CHANNEL" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">&" text=">&" />
                        <number text="2" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="CHANNEL" />
                    <"=" text="=" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="WIFI_IFACE_CHANNEL" />
                    </simple_expansion>
                </variable_assignment>
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-e" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="Falling back to channel " />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="CHANNEL" />
                            <"}" text="}" />
                        </expansion>
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text="\n        " />
                <list>
                    <command>
                        <command_name>
                            <word text="can_transmit_to_channel" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="WIFI_IFACE" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="CHANNEL" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <"||" text="||" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="die" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="Your adapter can not transmit to channel " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="CHANNEL" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text=", frequency band " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="FREQ_BAND" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text="GHz." />
                            <"\"" text="\"" />
                        </string>
                    </command>
                </list>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <command>
                        <command_name>
                            <word text="die" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="Your adapter can not transmit to channel " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="CHANNEL" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text=", frequency band " />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="FREQ_BAND" />
                                <"}" text="}" />
                            </expansion>
                            <string_content text="GHz." />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <list>
            <command>
                <command_name>
                    <word text="networkmanager_exists" />
                </command_name>
            </command>
            <whitespace text=" " />
            <"&&" text="&&" />
            <whitespace text=" " />
            <negated_command>
                <"!" text="!" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="networkmanager_iface_is_unmanaged" />
                    </command_name>
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                </command>
            </negated_command>
        </list>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <word text="-n" />
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Network Manager found, set " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
                <string_content text=" as unmanaged device... " />
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="networkmanager_add_unmanaged" />
            </command_name>
            <whitespace text=" " />
            <expansion>
                <"${" text="${" />
                <variable_name text="WIFI_IFACE" />
                <"}" text="}" />
            </expansion>
        </command>
        <whitespace text="\n\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="networkmanager_is_running" />
                </command_name>
            </command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <command>
                <command_name>
                    <word text="networkmanager_wait_until_unmanaged" />
                </command_name>
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="DONE" />
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <list>
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="HIDDEN" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <whitespace text=" " />
        <"&&" text="&&" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Access Point's SSID is hidden!" />
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n\n" />
    <list>
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="MAC_FILTER" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <whitespace text=" " />
        <"&&" text="&&" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="MAC address filtering is enabled!" />
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n\n" />
    <list>
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="ISOLATE_CLIENTS" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <whitespace text=" " />
        <"&&" text="&&" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Access Point's clients will be isolated!" />
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n\n" />
    <comment text="# hostapd config" />
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="cat" />
            </command_name>
        </command>
        <whitespace text=" " />
        <heredoc_redirect>
            <"<<" text="<<" />
            <whitespace text=" " />
            <heredoc_start text="EOF" />
            <whitespace text=" " />
            <file_redirect>
                <">" text=">" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/hostapd.conf" />
                </concatenation>
            </file_redirect>
            <whitespace text="\n" />
            <heredoc_body>
                <text text="beacon_int=100" />
                <whitespace text="\nssid=" />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="SSID" />
                    <"}" text="}" />
                </expansion>
                <whitespace text="\n" />
                <heredoc_content text="interface=" />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
                <whitespace text="\n" />
                <heredoc_content text="driver=" />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="DRIVER" />
                    <"}" text="}" />
                </expansion>
                <whitespace text="\n" />
                <heredoc_content text="channel=" />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="CHANNEL" />
                    <"}" text="}" />
                </expansion>
                <whitespace text="\n" />
                <heredoc_content text="ctrl_interface=" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="CONFDIR" />
                </simple_expansion>
                <heredoc_content text="/hostapd_ctrl\nctrl_interface_group=0\nignore_broadcast_ssid=" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="HIDDEN" />
                </simple_expansion>
                <whitespace text="\n" />
                <heredoc_content text="ap_isolate=" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="ISOLATE_CLIENTS" />
                </simple_expansion>
                <whitespace text="\n" />
                <heredoc_content text="" />
            </heredoc_body>
            <heredoc_end text="EOF" />
        </heredoc_redirect>
    </redirected_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="COUNTRY" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="cat" />
                </command_name>
            </command>
            <whitespace text=" " />
            <heredoc_redirect>
                <"<<" text="<<" />
                <whitespace text=" " />
                <heredoc_start text="EOF" />
                <whitespace text=" " />
                <file_redirect>
                    <">>" text=">>" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/hostapd.conf" />
                    </concatenation>
                </file_redirect>
                <whitespace text="\n" />
                <heredoc_body>
                    <text text="country_code=" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="COUNTRY" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text="\n" />
                    <heredoc_content text="ieee80211d=1\n" />
                </heredoc_body>
                <heredoc_end text="EOF" />
            </heredoc_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="FREQ_BAND" />
                </simple_expansion>
                <whitespace text=" " />
                <"==" text="==" />
                <whitespace text=" " />
                <word text="2.4" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="hw_mode=g" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">>" text=">>" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/hostapd.conf" />
                </concatenation>
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="hw_mode=a" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">>" text=">>" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/hostapd.conf" />
                    </concatenation>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="MAC_FILTER" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="cat" />
                </command_name>
            </command>
            <whitespace text=" " />
            <heredoc_redirect>
                <"<<" text="<<" />
                <whitespace text=" " />
                <heredoc_start text="EOF" />
                <whitespace text=" " />
                <file_redirect>
                    <">>" text=">>" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/hostapd.conf" />
                    </concatenation>
                </file_redirect>
                <whitespace text="\n" />
                <heredoc_body>
                    <text text="macaddr_acl=" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="MAC_FILTER" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text="\n" />
                    <heredoc_content text="accept_mac_file=" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="MAC_FILTER_ACCEPT" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text="\n" />
                    <heredoc_content text="" />
                </heredoc_body>
                <heredoc_end text="EOF" />
            </heredoc_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="IEEE80211N" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="cat" />
                </command_name>
            </command>
            <whitespace text=" " />
            <heredoc_redirect>
                <"<<" text="<<" />
                <whitespace text=" " />
                <heredoc_start text="EOF" />
                <whitespace text=" " />
                <file_redirect>
                    <">>" text=">>" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/hostapd.conf" />
                    </concatenation>
                </file_redirect>
                <whitespace text="\n" />
                <heredoc_body>
                    <text text="ieee80211n=1" />
                    <whitespace text="\nht_capab=" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="HT_CAPAB" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text="\n" />
                    <heredoc_content text="" />
                </heredoc_body>
                <heredoc_end text="EOF" />
            </heredoc_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="IEEE80211AC" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ieee80211ac=1" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">>" text=">>" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/hostapd.conf" />
                </concatenation>
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="IEEE80211AX" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="1" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="ieee80211ax=1" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">>" text=">>" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/hostapd.conf" />
                </concatenation>
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="VHT_CAPAB" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="vht_capab=" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="VHT_CAPAB" />
                        <"}" text="}" />
                    </expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">>" text=">>" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/hostapd.conf" />
                </concatenation>
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <list>
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="IEEE80211N" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="1" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <whitespace text=" " />
            <"||" text="||" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="IEEE80211AC" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="1" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
        </list>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="wmm_enabled=1" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">>" text=">>" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/hostapd.conf" />
                </concatenation>
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <unary_expression>
                <test_operator text="-n" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="PASSPHRASE" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </unary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="WPA_VERSION" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <"==" text="==" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="1+2" />
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="WPA_VERSION" />
                <"=" text="=" />
                <number text="2" />
            </variable_assignment>
            <whitespace text=" " />
            <comment text="# Assuming you want to default to WPA2 for the \"1+2\" setting" />
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="USE_PSK" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="WPA_KEY_TYPE" />
                <"=" text="=" />
                <word text="passphrase" />
            </variable_assignment>
            <whitespace text="\n    " />
            <else_clause>
                <else text="else" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="WPA_KEY_TYPE" />
                    <"=" text="=" />
                    <word text="psk" />
                </variable_assignment>
                <whitespace text="\n" />
            </else_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="WPA_VERSION" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <"==" text="==" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="3" />
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <comment text="# Configuring for WPA3 Transition Mode" />
            <whitespace text="\n        " />
            <comment text="# 80211w must be 1 or Apple Devices will not connect. " />
            <whitespace text="\n        " />
            <comment text="# 1 is the only valid value for WPA3 Transition Mode" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="cat" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <heredoc_redirect>
                    <"<<" text="<<" />
                    <whitespace text=" " />
                    <heredoc_start text="EOF" />
                    <whitespace text=" " />
                    <file_redirect>
                        <">>" text=">>" />
                        <whitespace text=" " />
                        <concatenation>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="CONFDIR" />
                            </simple_expansion>
                            <word text="/hostapd.conf" />
                        </concatenation>
                    </file_redirect>
                    <whitespace text="\n" />
                    <heredoc_body>
                        <text text="wpa=2" />
                        <whitespace text="\nwpa_" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="WPA_KEY_TYPE" />
                            <"}" text="}" />
                        </expansion>
                        <heredoc_content text="=" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="PASSPHRASE" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text="\n" />
                        <heredoc_content text="wpa_key_mgmt=WPA-PSK SAE\nwpa_pairwise=CCMP\nrsn_pairwise=CCMP\nieee80211w=1\n" />
                    </heredoc_body>
                    <heredoc_end text="EOF" />
                </heredoc_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <else_clause>
                <else text="else" />
                <whitespace text="\n        " />
                <comment text="# Original configuration for WPA_VERSION other than 3" />
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="cat" />
                        </command_name>
                    </command>
                    <whitespace text=" " />
                    <heredoc_redirect>
                        <"<<" text="<<" />
                        <whitespace text=" " />
                        <heredoc_start text="EOF" />
                        <whitespace text=" " />
                        <file_redirect>
                            <">>" text=">>" />
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="CONFDIR" />
                                </simple_expansion>
                                <word text="/hostapd.conf" />
                            </concatenation>
                        </file_redirect>
                        <whitespace text="\n" />
                        <heredoc_body>
                            <text text="wpa=" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="WPA_VERSION" />
                                <"}" text="}" />
                            </expansion>
                            <whitespace text="\n" />
                            <heredoc_content text="wpa_" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="WPA_KEY_TYPE" />
                                <"}" text="}" />
                            </expansion>
                            <heredoc_content text="=" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="PASSPHRASE" />
                                <"}" text="}" />
                            </expansion>
                            <whitespace text="\n" />
                            <heredoc_content text="wpa_key_mgmt=WPA-PSK\nwpa_pairwise=CCMP\nrsn_pairwise=CCMP\n" />
                        </heredoc_body>
                        <heredoc_end text="EOF" />
                    </heredoc_redirect>
                </redirected_statement>
                <whitespace text="\n" />
            </else_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="SHARE_METHOD" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"==" text="==" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="bridge" />
                    <"\"" text="\"" />
                </string>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="bridge=" />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="BRIDGE_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">>" text=">>" />
                <whitespace text=" " />
                <concatenation>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="CONFDIR" />
                    </simple_expansion>
                    <word text="/hostapd.conf" />
                </concatenation>
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n" />
        <elif_clause>
            <elif text="elif" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="NO_DNSMASQ" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n    " />
            <comment text="# dnsmasq config (dhcp + dns)" />
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="DNSMASQ_VER" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <pipeline>
                        <command>
                            <command_name>
                                <word text="dnsmasq" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-v" />
                        </command>
                        <whitespace text=" " />
                        <"|" text="|" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="grep" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-m1" />
                            <whitespace text=" " />
                            <word text="-oE" />
                            <whitespace text=" " />
                            <raw_string text="'[0-9]+(\\.[0-9]+)*\\.[0-9]+'" />
                        </command>
                    </pipeline>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="version_cmp" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="DNSMASQ_VER" />
                </simple_expansion>
                <whitespace text=" " />
                <word text="2.63" />
            </command>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <special_variable_name text="?" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="DNSMASQ_BIND" />
                    <"=" text="=" />
                    <word text="bind-interfaces" />
                </variable_assignment>
                <whitespace text="\n    " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n        " />
                    <variable_assignment>
                        <variable_name text="DNSMASQ_BIND" />
                        <"=" text="=" />
                        <word text="bind-dynamic" />
                    </variable_assignment>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="DHCP_DNS" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"==" text="==" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="gateway" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="DHCP_DNS" />
                    <"=" text="=" />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="GATEWAY" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </variable_assignment>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="cat" />
                    </command_name>
                </command>
                <whitespace text=" " />
                <heredoc_redirect>
                    <"<<" text="<<" />
                    <whitespace text=" " />
                    <heredoc_start text="EOF" />
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <concatenation>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="CONFDIR" />
                            </simple_expansion>
                            <word text="/dnsmasq.conf" />
                        </concatenation>
                    </file_redirect>
                    <whitespace text="\n" />
                    <heredoc_body>
                        <text text="listen-address=" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text="\n" />
                        <heredoc_content text="" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="DNSMASQ_BIND" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text="\n" />
                        <heredoc_content text="dhcp-range=" />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"%" text="%" />
                            <regex text=".*" />
                            <"}" text="}" />
                        </expansion>
                        <heredoc_content text=".1," />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"%" text="%" />
                            <regex text=".*" />
                            <"}" text="}" />
                        </expansion>
                        <heredoc_content text=".254,255.255.255.0,24h\ndhcp-option-force=option:router," />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text="\n" />
                        <heredoc_content text="dhcp-option-force=option:dns-server," />
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="DHCP_DNS" />
                            <"}" text="}" />
                        </expansion>
                        <whitespace text="\n" />
                        <heredoc_content text="" />
                    </heredoc_body>
                    <heredoc_end text="EOF" />
                </heredoc_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <variable_assignment>
                <variable_name text="MTU" />
                <"=" text="=" />
                <command_substitution>
                    <"$(" text="$(" />
                    <command>
                        <command_name>
                            <word text="get_mtu" />
                        </command_name>
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="INTERNET_IFACE" />
                        </simple_expansion>
                    </command>
                    <")" text=")" />
                </command_substitution>
            </variable_assignment>
            <whitespace text="\n    " />
            <redirected_statement>
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-n" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="MTU" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="dhcp-option-force=option:mtu," />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="MTU" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                </list>
                <whitespace text=" " />
                <file_redirect>
                    <">>" text=">>" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/dnsmasq.conf" />
                    </concatenation>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <redirected_statement>
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <binary_expression>
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="ETC_HOSTS" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <test_operator text="-eq" />
                            <whitespace text=" " />
                            <number text="0" />
                        </binary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="no-hosts" />
                    </command>
                </list>
                <whitespace text=" " />
                <file_redirect>
                    <">>" text=">>" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/dnsmasq.conf" />
                    </concatenation>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <redirected_statement>
                <list>
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-n" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="ADDN_HOSTS" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <whitespace text=" " />
                    <"&&" text="&&" />
                    <whitespace text=" " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="addn-hosts=" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="ADDN_HOSTS" />
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                    </command>
                </list>
                <whitespace text=" " />
                <file_redirect>
                    <">>" text=">>" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/dnsmasq.conf" />
                    </concatenation>
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="DHCP_HOSTS" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <for_statement>
                    <for text="for" />
                    <whitespace text=" " />
                    <variable_name text="HOST" />
                    <whitespace text=" " />
                    <in text="in" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DHCP_HOSTS" />
                    </simple_expansion>
                    <";" text=";" />
                    <whitespace text=" " />
                    <do_group>
                        <do text="do" />
                        <whitespace text="\n            " />
                        <redirected_statement>
                            <command>
                                <command_name>
                                    <word text="echo" />
                                </command_name>
                                <whitespace text=" " />
                                <string>
                                    <"\"" text="\"" />
                                    <string_content text="dhcp-host=" />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="HOST" />
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                            </command>
                            <whitespace text=" " />
                            <file_redirect>
                                <">>" text=">>" />
                                <whitespace text=" " />
                                <concatenation>
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="CONFDIR" />
                                    </simple_expansion>
                                    <word text="/dnsmasq.conf" />
                                </concatenation>
                            </file_redirect>
                        </redirected_statement>
                        <whitespace text="\n        " />
                        <done text="done" />
                    </do_group>
                </for_statement>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <unary_expression>
                        <test_operator text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="DNS_LOGFILE" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </unary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="cat" />
                        </command_name>
                    </command>
                    <whitespace text=" " />
                    <heredoc_redirect>
                        <"<<" text="<<" />
                        <whitespace text=" " />
                        <heredoc_start text="EOF" />
                        <whitespace text=" " />
                        <file_redirect>
                            <">>" text=">>" />
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="CONFDIR" />
                                </simple_expansion>
                                <word text="/dnsmasq.conf" />
                            </concatenation>
                        </file_redirect>
                        <whitespace text="\n" />
                        <heredoc_body>
                            <text text="log-queries" />
                            <whitespace text="\nlog-facility=" />
                            <expansion>
                                <"${" text="${" />
                                <variable_name text="DNS_LOGFILE" />
                                <"}" text="}" />
                            </expansion>
                            <whitespace text="\n" />
                            <heredoc_content text="" />
                        </heredoc_body>
                        <heredoc_end text="EOF" />
                    </heredoc_redirect>
                </redirected_statement>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n    " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <binary_expression>
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="SHARE_METHOD" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                            <whitespace text=" " />
                            <"==" text="==" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="none" />
                                <"\"" text="\"" />
                            </string>
                        </binary_expression>
                        <whitespace text=" " />
                        <"&&" text="&&" />
                        <whitespace text=" " />
                        <binary_expression>
                            <string>
                                <"\"" text="\"" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="REDIRECT_TO_LOCALHOST" />
                                </simple_expansion>
                                <"\"" text="\"" />
                            </string>
                            <whitespace text=" " />
                            <"==" text="==" />
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="1" />
                                <"\"" text="\"" />
                            </string>
                        </binary_expression>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="cat" />
                        </command_name>
                    </command>
                    <whitespace text=" " />
                    <heredoc_redirect>
                        <"<<" text="<<" />
                        <whitespace text=" " />
                        <heredoc_start text="EOF" />
                        <whitespace text=" " />
                        <file_redirect>
                            <">>" text=">>" />
                            <whitespace text=" " />
                            <concatenation>
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="CONFDIR" />
                                </simple_expansion>
                                <word text="/dnsmasq.conf" />
                            </concatenation>
                        </file_redirect>
                        <whitespace text="\n" />
                        <heredoc_body>
                            <text text="address=/#/" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="GATEWAY" />
                            </simple_expansion>
                            <whitespace text="\n" />
                            <heredoc_content text="" />
                        </heredoc_body>
                        <heredoc_end text="EOF" />
                    </heredoc_redirect>
                </redirected_statement>
                <whitespace text="\n    " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n" />
        </elif_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# initialize WiFi interface" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="NO_VIRT" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-n" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NEW_MACADDR" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <list>
            <command>
                <command_name>
                    <word text="ip" />
                </command_name>
                <whitespace text=" " />
                <word text="link" />
                <whitespace text=" " />
                <word text="set" />
                <whitespace text=" " />
                <word text="dev" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
                <whitespace text=" " />
                <word text="address" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="NEW_MACADDR" />
                    <"}" text="}" />
                </expansion>
            </command>
            <whitespace text=" " />
            <"||" text="||" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="die" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="VIRTDIEMSG" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
        </list>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <list>
        <command>
            <command_name>
                <word text="ip" />
            </command_name>
            <whitespace text=" " />
            <word text="link" />
            <whitespace text=" " />
            <word text="set" />
            <whitespace text=" " />
            <word text="down" />
            <whitespace text=" " />
            <word text="dev" />
            <whitespace text=" " />
            <expansion>
                <"${" text="${" />
                <variable_name text="WIFI_IFACE" />
                <"}" text="}" />
            </expansion>
        </command>
        <whitespace text=" " />
        <"||" text="||" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="die" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="VIRTDIEMSG" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n" />
    <list>
        <command>
            <command_name>
                <word text="ip" />
            </command_name>
            <whitespace text=" " />
            <word text="addr" />
            <whitespace text=" " />
            <word text="flush" />
            <whitespace text=" " />
            <expansion>
                <"${" text="${" />
                <variable_name text="WIFI_IFACE" />
                <"}" text="}" />
            </expansion>
        </command>
        <whitespace text=" " />
        <"||" text="||" />
        <whitespace text=" " />
        <command>
            <command_name>
                <word text="die" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="VIRTDIEMSG" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
    </list>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="NO_VIRT" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="1" />
                </binary_expression>
                <whitespace text=" " />
                <"&&" text="&&" />
                <whitespace text=" " />
                <unary_expression>
                    <test_operator text="-n" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NEW_MACADDR" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                </unary_expression>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <list>
            <command>
                <command_name>
                    <word text="ip" />
                </command_name>
                <whitespace text=" " />
                <word text="link" />
                <whitespace text=" " />
                <word text="set" />
                <whitespace text=" " />
                <word text="dev" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
                <whitespace text=" " />
                <word text="address" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="NEW_MACADDR" />
                    <"}" text="}" />
                </expansion>
            </command>
            <whitespace text=" " />
            <"||" text="||" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="die" />
                </command_name>
            </command>
        </list>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="SHARE_METHOD" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"!=" text="!=" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="bridge" />
                    <"\"" text="\"" />
                </string>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <list>
            <command>
                <command_name>
                    <word text="ip" />
                </command_name>
                <whitespace text=" " />
                <word text="link" />
                <whitespace text=" " />
                <word text="set" />
                <whitespace text=" " />
                <word text="up" />
                <whitespace text=" " />
                <word text="dev" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
            </command>
            <whitespace text=" " />
            <"||" text="||" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="die" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="VIRTDIEMSG" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
        </list>
        <whitespace text="\n    " />
        <list>
            <command>
                <command_name>
                    <word text="ip" />
                </command_name>
                <whitespace text=" " />
                <word text="addr" />
                <whitespace text=" " />
                <word text="add" />
                <whitespace text=" " />
                <concatenation>
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="GATEWAY" />
                        <"}" text="}" />
                    </expansion>
                    <word text="/24" />
                </concatenation>
                <whitespace text=" " />
                <word text="broadcast" />
                <whitespace text=" " />
                <concatenation>
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="GATEWAY" />
                        <"%" text="%" />
                        <regex text=".*" />
                        <"}" text="}" />
                    </expansion>
                    <word text=".255" />
                </concatenation>
                <whitespace text=" " />
                <word text="dev" />
                <whitespace text=" " />
                <expansion>
                    <"${" text="${" />
                    <variable_name text="WIFI_IFACE" />
                    <"}" text="}" />
                </expansion>
            </command>
            <whitespace text=" " />
            <"||" text="||" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="die" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="VIRTDIEMSG" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
            </command>
        </list>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# enable Internet sharing" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="SHARE_METHOD" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"!=" text="!=" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="none" />
                    <"\"" text="\"" />
                </string>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <string>
                <"\"" text="\"" />
                <string_content text="Sharing Internet using method: " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="SHARE_METHOD" />
                </simple_expansion>
                <"\"" text="\"" />
            </string>
        </command>
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <string>
                        <"\"" text="\"" />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="SHARE_METHOD" />
                        </simple_expansion>
                        <"\"" text="\"" />
                    </string>
                    <whitespace text=" " />
                    <"==" text="==" />
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="nat" />
                        <"\"" text="\"" />
                    </string>
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <list>
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-t" />
                    <whitespace text=" " />
                    <word text="nat" />
                    <whitespace text=" " />
                    <word text="-I" />
                    <whitespace text=" " />
                    <word text="POSTROUTING" />
                    <whitespace text=" " />
                    <word text="-s" />
                    <whitespace text=" " />
                    <concatenation>
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"%" text="%" />
                            <regex text=".*" />
                            <"}" text="}" />
                        </expansion>
                        <word text=".0/24" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="!" />
                    <whitespace text=" " />
                    <word text="-o" />
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="MASQUERADE" />
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n        " />
            <list>
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-I" />
                    <whitespace text=" " />
                    <word text="FORWARD" />
                    <whitespace text=" " />
                    <word text="-i" />
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="WIFI_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text=" " />
                    <word text="-s" />
                    <whitespace text=" " />
                    <concatenation>
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"%" text="%" />
                            <regex text=".*" />
                            <"}" text="}" />
                        </expansion>
                        <word text=".0/24" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="ACCEPT" />
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n        " />
            <list>
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-I" />
                    <whitespace text=" " />
                    <word text="FORWARD" />
                    <whitespace text=" " />
                    <word text="-i" />
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="INTERNET_IFACE" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text=" " />
                    <word text="-d" />
                    <whitespace text=" " />
                    <concatenation>
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"%" text="%" />
                            <regex text=".*" />
                            <"}" text="}" />
                        </expansion>
                        <word text=".0/24" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="ACCEPT" />
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n        " />
            <list>
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <concatenation>
                            <word text="/proc/sys/net/ipv4/conf/" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="INTERNET_IFACE" />
                            </simple_expansion>
                            <word text="/forwarding" />
                        </concatenation>
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n        " />
            <list>
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <number text="1" />
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">" text=">" />
                        <whitespace text=" " />
                        <word text="/proc/sys/net/ipv4/ip_forward" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n        " />
            <comment text="# to enable clients to establish PPTP connections we must" />
            <whitespace text="\n        " />
            <comment text="# load nf_nat_pptp module" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="modprobe" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="nf_nat_pptp" />
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">" text=">" />
                    <whitespace text=" " />
                    <word text="/dev/null" />
                </file_redirect>
                <whitespace text=" " />
                <file_redirect>
                    <file_descriptor text="2" />
                    <">&" text=">&" />
                    <number text="1" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <elif_clause>
                <elif text="elif" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="SHARE_METHOD" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                        <whitespace text=" " />
                        <"==" text="==" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="bridge" />
                            <"\"" text="\"" />
                        </string>
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <comment text="# disable iptables rules for bridged interfaces" />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <test_command>
                        <"[[" text="[[" />
                        <whitespace text=" " />
                        <unary_expression>
                            <test_operator text="-e" />
                            <whitespace text=" " />
                            <word text="/proc/sys/net/bridge/bridge-nf-call-iptables" />
                        </unary_expression>
                        <whitespace text=" " />
                        <"]]" text="]]" />
                    </test_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <number text="0" />
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">" text=">" />
                            <whitespace text=" " />
                            <word text="/proc/sys/net/bridge/bridge-nf-call-iptables" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n\n        " />
                <comment text="# to initialize the bridge interface correctly we need to do the following:" />
                <whitespace text="\n        " />
                <comment text="#" />
                <whitespace text="\n        " />
                <comment text="# 1) save the IPs and route table of INTERNET_IFACE" />
                <whitespace text="\n        " />
                <comment text="# 2) if NetworkManager is running set INTERNET_IFACE as unmanaged" />
                <whitespace text="\n        " />
                <comment text="# 3) create BRIDGE_IFACE and attach INTERNET_IFACE to it" />
                <whitespace text="\n        " />
                <comment text="# 4) set the previously saved IPs and route table to BRIDGE_IFACE" />
                <whitespace text="\n        " />
                <comment text="#" />
                <whitespace text="\n        " />
                <comment text="# we need the above because BRIDGE_IFACE is the master interface from now on" />
                <whitespace text="\n        " />
                <comment text="# and it must know where is connected, otherwise connection is lost." />
                <whitespace text="\n        " />
                <if_statement>
                    <if text="if" />
                    <whitespace text=" " />
                    <negated_command>
                        <"!" text="!" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="is_bridge_interface" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="INTERNET_IFACE" />
                            </simple_expansion>
                        </command>
                    </negated_command>
                    <";" text=";" />
                    <whitespace text=" " />
                    <then text="then" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="-n" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="Create a bridge interface... " />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="OLD_IFS" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="IFS" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="IFS" />
                        <"=" text="=" />
                        <ansi_c_string text="$'\\n'" />
                    </variable_assignment>
                    <whitespace text="\n\n            " />
                    <variable_assignment>
                        <variable_name text="IP_ADDRS" />
                        <"=" text="=" />
                        <array>
                            <"(" text="(" />
                            <whitespace text=" " />
                            <command_substitution>
                                <"$(" text="$(" />
                                <pipeline>
                                    <command>
                                        <command_name>
                                            <word text="ip" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="addr" />
                                        <whitespace text=" " />
                                        <word text="show" />
                                        <whitespace text=" " />
                                        <simple_expansion>
                                            <"$" text="$" />
                                            <variable_name text="INTERNET_IFACE" />
                                        </simple_expansion>
                                    </command>
                                    <whitespace text=" " />
                                    <"|" text="|" />
                                    <whitespace text=" " />
                                    <command>
                                        <command_name>
                                            <word text="grep" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="-A" />
                                        <whitespace text=" " />
                                        <number text="1" />
                                        <whitespace text=" " />
                                        <word text="-E" />
                                        <whitespace text=" " />
                                        <raw_string text="'inet[[:blank:]]'" />
                                    </command>
                                    <whitespace text=" " />
                                    <"|" text="|" />
                                    <whitespace text=" " />
                                    <command>
                                        <command_name>
                                            <word text="paste" />
                                        </command_name>
                                        <whitespace text=" " />
                                        <word text="-" />
                                        <whitespace text=" " />
                                        <word text="-" />
                                    </command>
                                </pipeline>
                                <")" text=")" />
                            </command_substitution>
                            <whitespace text=" " />
                            <")" text=")" />
                        </array>
                    </variable_assignment>
                    <whitespace text="\n            " />
                    <variable_assignment>
                        <variable_name text="ROUTE_ADDRS" />
                        <"=" text="=" />
                        <array>
                            <"(" text="(" />
                            <whitespace text=" " />
                            <command_substitution>
                                <"$(" text="$(" />
                                <command>
                                    <command_name>
                                        <word text="ip" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="route" />
                                    <whitespace text=" " />
                                    <word text="show" />
                                    <whitespace text=" " />
                                    <word text="dev" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="INTERNET_IFACE" />
                                    </simple_expansion>
                                </command>
                                <")" text=")" />
                            </command_substitution>
                            <whitespace text=" " />
                            <")" text=")" />
                        </array>
                    </variable_assignment>
                    <whitespace text="\n\n            " />
                    <variable_assignment>
                        <variable_name text="IFS" />
                        <"=" text="=" />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="OLD_IFS" />
                            </simple_expansion>
                            <"\"" text="\"" />
                        </string>
                    </variable_assignment>
                    <whitespace text="\n\n            " />
                    <if_statement>
                        <if text="if" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="networkmanager_is_running" />
                            </command_name>
                        </command>
                        <";" text=";" />
                        <whitespace text=" " />
                        <then text="then" />
                        <whitespace text="\n                " />
                        <command>
                            <command_name>
                                <word text="networkmanager_add_unmanaged" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="INTERNET_IFACE" />
                            </simple_expansion>
                        </command>
                        <whitespace text="\n                " />
                        <command>
                            <command_name>
                                <word text="networkmanager_wait_until_unmanaged" />
                            </command_name>
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="INTERNET_IFACE" />
                            </simple_expansion>
                        </command>
                        <whitespace text="\n            " />
                        <fi text="fi" />
                    </if_statement>
                    <whitespace text="\n\n            " />
                    <comment text="# create bridge interface" />
                    <whitespace text="\n            " />
                    <list>
                        <command>
                            <command_name>
                                <word text="ip" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="link" />
                            <whitespace text=" " />
                            <word text="add" />
                            <whitespace text=" " />
                            <word text="name" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="BRIDGE_IFACE" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <word text="type" />
                            <whitespace text=" " />
                            <word text="bridge" />
                        </command>
                        <whitespace text=" " />
                        <"||" text="||" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="die" />
                            </command_name>
                        </command>
                    </list>
                    <whitespace text="\n            " />
                    <list>
                        <command>
                            <command_name>
                                <word text="ip" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="link" />
                            <whitespace text=" " />
                            <word text="set" />
                            <whitespace text=" " />
                            <word text="dev" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="BRIDGE_IFACE" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <word text="up" />
                        </command>
                        <whitespace text=" " />
                        <"||" text="||" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="die" />
                            </command_name>
                        </command>
                    </list>
                    <whitespace text="\n            " />
                    <comment text="# set 0ms forward delay" />
                    <whitespace text="\n            " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="-n" />
                            <whitespace text=" " />
                            <number text="0" />
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">" text=">" />
                            <whitespace text=" " />
                            <concatenation>
                                <word text="/sys/class/net/" />
                                <simple_expansion>
                                    <"$" text="$" />
                                    <variable_name text="BRIDGE_IFACE" />
                                </simple_expansion>
                                <word text="/bridge/forward_delay" />
                            </concatenation>
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n\n            " />
                    <comment text="# attach internet interface to bridge interface" />
                    <whitespace text="\n            " />
                    <list>
                        <command>
                            <command_name>
                                <word text="ip" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="link" />
                            <whitespace text=" " />
                            <word text="set" />
                            <whitespace text=" " />
                            <word text="dev" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="INTERNET_IFACE" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <word text="promisc" />
                            <whitespace text=" " />
                            <word text="on" />
                        </command>
                        <whitespace text=" " />
                        <"||" text="||" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="die" />
                            </command_name>
                        </command>
                    </list>
                    <whitespace text="\n            " />
                    <list>
                        <command>
                            <command_name>
                                <word text="ip" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="link" />
                            <whitespace text=" " />
                            <word text="set" />
                            <whitespace text=" " />
                            <word text="dev" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="INTERNET_IFACE" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <word text="up" />
                        </command>
                        <whitespace text=" " />
                        <"||" text="||" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="die" />
                            </command_name>
                        </command>
                    </list>
                    <whitespace text="\n            " />
                    <list>
                        <command>
                            <command_name>
                                <word text="ip" />
                            </command_name>
                            <whitespace text=" " />
                            <word text="link" />
                            <whitespace text=" " />
                            <word text="set" />
                            <whitespace text=" " />
                            <word text="dev" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="INTERNET_IFACE" />
                            </simple_expansion>
                            <whitespace text=" " />
                            <word text="master" />
                            <whitespace text=" " />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="BRIDGE_IFACE" />
                            </simple_expansion>
                        </command>
                        <whitespace text=" " />
                        <"||" text="||" />
                        <whitespace text=" " />
                        <command>
                            <command_name>
                                <word text="die" />
                            </command_name>
                        </command>
                    </list>
                    <whitespace text="\n\n            " />
                    <command>
                        <command_name>
                            <word text="ip" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="addr" />
                        <whitespace text=" " />
                        <word text="flush" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="INTERNET_IFACE" />
                        </simple_expansion>
                    </command>
                    <whitespace text="\n            " />
                    <for_statement>
                        <for text="for" />
                        <whitespace text=" " />
                        <variable_name text="x" />
                        <whitespace text=" " />
                        <in text="in" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <subscript>
                                    <variable_name text="IP_ADDRS" />
                                    <"[" text="[" />
                                    <word text="@" />
                                    <"]" text="]" />
                                </subscript>
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                        <";" text=";" />
                        <whitespace text=" " />
                        <do_group>
                            <do text="do" />
                            <whitespace text="\n                " />
                            <variable_assignment>
                                <variable_name text="x" />
                                <"=" text="=" />
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="x" />
                                        <"/" text="/" />
                                        <regex text="inet" />
                                        <"/" text="/" />
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                            </variable_assignment>
                            <whitespace text="\n                " />
                            <variable_assignment>
                                <variable_name text="x" />
                                <"=" text="=" />
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="x" />
                                        <"/" text="/" />
                                        <regex text="secondary" />
                                        <"/" text="/" />
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                            </variable_assignment>
                            <whitespace text="\n                " />
                            <variable_assignment>
                                <variable_name text="x" />
                                <"=" text="=" />
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="x" />
                                        <"/" text="/" />
                                        <regex text="dynamic" />
                                        <"/" text="/" />
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                            </variable_assignment>
                            <whitespace text="\n                " />
                            <variable_assignment>
                                <variable_name text="x" />
                                <"=" text="=" />
                                <command_substitution>
                                    <"$(" text="$(" />
                                    <pipeline>
                                        <command>
                                            <command_name>
                                                <word text="echo" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="x" />
                                            </simple_expansion>
                                        </command>
                                        <whitespace text=" " />
                                        <"|" text="|" />
                                        <whitespace text=" " />
                                        <command>
                                            <command_name>
                                                <word text="sed" />
                                            </command_name>
                                            <whitespace text=" " />
                                            <raw_string text="'s/\\([0-9]\\)sec/\\1/g'" />
                                        </command>
                                    </pipeline>
                                    <")" text=")" />
                                </command_substitution>
                            </variable_assignment>
                            <whitespace text="\n                " />
                            <variable_assignment>
                                <variable_name text="x" />
                                <"=" text="=" />
                                <string>
                                    <"\"" text="\"" />
                                    <expansion>
                                        <"${" text="${" />
                                        <variable_name text="x" />
                                        <"/" text="/" />
                                        <regex text="${INTERNET_IFACE}" />
                                        <"/" text="/" />
                                        <"}" text="}" />
                                    </expansion>
                                    <"\"" text="\"" />
                                </string>
                            </variable_assignment>
                            <whitespace text="\n                " />
                            <list>
                                <command>
                                    <command_name>
                                        <word text="ip" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="addr" />
                                    <whitespace text=" " />
                                    <word text="add" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="x" />
                                    </simple_expansion>
                                    <whitespace text=" " />
                                    <word text="dev" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="BRIDGE_IFACE" />
                                    </simple_expansion>
                                </command>
                                <whitespace text=" " />
                                <"||" text="||" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="die" />
                                    </command_name>
                                </command>
                            </list>
                            <whitespace text="\n            " />
                            <done text="done" />
                        </do_group>
                    </for_statement>
                    <whitespace text="\n\n            " />
                    <comment text="# remove any existing entries that were added from 'ip addr add'" />
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="ip" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="route" />
                        <whitespace text=" " />
                        <word text="flush" />
                        <whitespace text=" " />
                        <word text="dev" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="INTERNET_IFACE" />
                        </simple_expansion>
                    </command>
                    <whitespace text="\n            " />
                    <command>
                        <command_name>
                            <word text="ip" />
                        </command_name>
                        <whitespace text=" " />
                        <word text="route" />
                        <whitespace text=" " />
                        <word text="flush" />
                        <whitespace text=" " />
                        <word text="dev" />
                        <whitespace text=" " />
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="BRIDGE_IFACE" />
                        </simple_expansion>
                    </command>
                    <whitespace text="\n\n            " />
                    <comment text="# we must first add the entries that specify the subnets and then the" />
                    <whitespace text="\n            " />
                    <comment text="# gateway entry, otherwise 'ip addr add' will return an error" />
                    <whitespace text="\n            " />
                    <for_statement>
                        <for text="for" />
                        <whitespace text=" " />
                        <variable_name text="x" />
                        <whitespace text=" " />
                        <in text="in" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <subscript>
                                    <variable_name text="ROUTE_ADDRS" />
                                    <"[" text="[" />
                                    <word text="@" />
                                    <"]" text="]" />
                                </subscript>
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                        <";" text=";" />
                        <whitespace text=" " />
                        <do_group>
                            <do text="do" />
                            <whitespace text="\n                " />
                            <list>
                                <test_command>
                                    <"[[" text="[[" />
                                    <whitespace text=" " />
                                    <binary_expression>
                                        <string>
                                            <"\"" text="\"" />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="x" />
                                            </simple_expansion>
                                            <"\"" text="\"" />
                                        </string>
                                        <whitespace text=" " />
                                        <"==" text="==" />
                                        <whitespace text=" " />
                                        <extglob_pattern text="default*" />
                                    </binary_expression>
                                    <whitespace text=" " />
                                    <"]]" text="]]" />
                                </test_command>
                                <whitespace text=" " />
                                <"&&" text="&&" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="continue" />
                                    </command_name>
                                </command>
                            </list>
                            <whitespace text="\n                " />
                            <list>
                                <command>
                                    <command_name>
                                        <word text="ip" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="route" />
                                    <whitespace text=" " />
                                    <word text="add" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="x" />
                                    </simple_expansion>
                                    <whitespace text=" " />
                                    <word text="dev" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="BRIDGE_IFACE" />
                                    </simple_expansion>
                                </command>
                                <whitespace text=" " />
                                <"||" text="||" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="die" />
                                    </command_name>
                                </command>
                            </list>
                            <whitespace text="\n            " />
                            <done text="done" />
                        </do_group>
                    </for_statement>
                    <whitespace text="\n\n            " />
                    <for_statement>
                        <for text="for" />
                        <whitespace text=" " />
                        <variable_name text="x" />
                        <whitespace text=" " />
                        <in text="in" />
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <expansion>
                                <"${" text="${" />
                                <subscript>
                                    <variable_name text="ROUTE_ADDRS" />
                                    <"[" text="[" />
                                    <word text="@" />
                                    <"]" text="]" />
                                </subscript>
                                <"}" text="}" />
                            </expansion>
                            <"\"" text="\"" />
                        </string>
                        <";" text=";" />
                        <whitespace text=" " />
                        <do_group>
                            <do text="do" />
                            <whitespace text="\n                " />
                            <list>
                                <test_command>
                                    <"[[" text="[[" />
                                    <whitespace text=" " />
                                    <binary_expression>
                                        <string>
                                            <"\"" text="\"" />
                                            <simple_expansion>
                                                <"$" text="$" />
                                                <variable_name text="x" />
                                            </simple_expansion>
                                            <"\"" text="\"" />
                                        </string>
                                        <whitespace text=" " />
                                        <"!=" text="!=" />
                                        <whitespace text=" " />
                                        <extglob_pattern text="default*" />
                                    </binary_expression>
                                    <whitespace text=" " />
                                    <"]]" text="]]" />
                                </test_command>
                                <whitespace text=" " />
                                <"&&" text="&&" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="continue" />
                                    </command_name>
                                </command>
                            </list>
                            <whitespace text="\n                " />
                            <list>
                                <command>
                                    <command_name>
                                        <word text="ip" />
                                    </command_name>
                                    <whitespace text=" " />
                                    <word text="route" />
                                    <whitespace text=" " />
                                    <word text="add" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="x" />
                                    </simple_expansion>
                                    <whitespace text=" " />
                                    <word text="dev" />
                                    <whitespace text=" " />
                                    <simple_expansion>
                                        <"$" text="$" />
                                        <variable_name text="BRIDGE_IFACE" />
                                    </simple_expansion>
                                </command>
                                <whitespace text=" " />
                                <"||" text="||" />
                                <whitespace text=" " />
                                <command>
                                    <command_name>
                                        <word text="die" />
                                    </command_name>
                                </command>
                            </list>
                            <whitespace text="\n            " />
                            <done text="done" />
                        </do_group>
                    </for_statement>
                    <whitespace text="\n\n            " />
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <simple_expansion>
                                <"$" text="$" />
                                <variable_name text="BRIDGE_IFACE" />
                            </simple_expansion>
                            <string_content text=" created." />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text="\n        " />
                    <fi text="fi" />
                </if_statement>
                <whitespace text="\n" />
            </elif_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <else_clause>
            <else text="else" />
            <whitespace text="\n    " />
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="No Internet sharing" />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text="\n" />
        </else_clause>
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# start dhcp + dns (optional)" />
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <string>
                    <"\"" text="\"" />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="SHARE_METHOD" />
                    </simple_expansion>
                    <"\"" text="\"" />
                </string>
                <whitespace text=" " />
                <"!=" text="!=" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="bridge" />
                    <"\"" text="\"" />
                </string>
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="NO_DNS" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <variable_assignment>
                <variable_name text="DNS_PORT" />
                <"=" text="=" />
                <number text="5353" />
            </variable_assignment>
            <whitespace text="\n        " />
            <list>
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-I" />
                    <whitespace text=" " />
                    <word text="INPUT" />
                    <whitespace text=" " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <word text="tcp" />
                    <whitespace text=" " />
                    <word text="-m" />
                    <whitespace text=" " />
                    <word text="tcp" />
                    <whitespace text=" " />
                    <word text="--dport" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DNS_PORT" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="ACCEPT" />
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n        " />
            <list>
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-I" />
                    <whitespace text=" " />
                    <word text="INPUT" />
                    <whitespace text=" " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <word text="udp" />
                    <whitespace text=" " />
                    <word text="-m" />
                    <whitespace text=" " />
                    <word text="udp" />
                    <whitespace text=" " />
                    <word text="--dport" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DNS_PORT" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="ACCEPT" />
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n        " />
            <list>
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-t" />
                    <whitespace text=" " />
                    <word text="nat" />
                    <whitespace text=" " />
                    <word text="-I" />
                    <whitespace text=" " />
                    <word text="PREROUTING" />
                    <whitespace text=" " />
                    <word text="-s" />
                    <whitespace text=" " />
                    <concatenation>
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"%" text="%" />
                            <regex text=".*" />
                            <"}" text="}" />
                        </expansion>
                        <word text=".0/24" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-d" />
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="GATEWAY" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text=" \\" />
                    <whitespace text="\n            " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <word text="tcp" />
                    <whitespace text=" " />
                    <word text="-m" />
                    <whitespace text=" " />
                    <word text="tcp" />
                    <whitespace text=" " />
                    <word text="--dport" />
                    <whitespace text=" " />
                    <number text="53" />
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="REDIRECT" />
                    <whitespace text=" " />
                    <word text="--to-ports" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DNS_PORT" />
                    </simple_expansion>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n        " />
            <list>
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-t" />
                    <whitespace text=" " />
                    <word text="nat" />
                    <whitespace text=" " />
                    <word text="-I" />
                    <whitespace text=" " />
                    <word text="PREROUTING" />
                    <whitespace text=" " />
                    <word text="-s" />
                    <whitespace text=" " />
                    <concatenation>
                        <expansion>
                            <"${" text="${" />
                            <variable_name text="GATEWAY" />
                            <"%" text="%" />
                            <regex text=".*" />
                            <"}" text="}" />
                        </expansion>
                        <word text=".0/24" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-d" />
                    <whitespace text=" " />
                    <expansion>
                        <"${" text="${" />
                        <variable_name text="GATEWAY" />
                        <"}" text="}" />
                    </expansion>
                    <whitespace text=" \\" />
                    <whitespace text="\n            " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <word text="udp" />
                    <whitespace text=" " />
                    <word text="-m" />
                    <whitespace text=" " />
                    <word text="udp" />
                    <whitespace text=" " />
                    <word text="--dport" />
                    <whitespace text=" " />
                    <number text="53" />
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="REDIRECT" />
                    <whitespace text=" " />
                    <word text="--to-ports" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DNS_PORT" />
                    </simple_expansion>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n    " />
            <else_clause>
                <else text="else" />
                <whitespace text="\n        " />
                <variable_assignment>
                    <variable_name text="DNS_PORT" />
                    <"=" text="=" />
                    <number text="0" />
                </variable_assignment>
                <whitespace text="\n" />
            </else_clause>
            <whitespace text="    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <test_command>
                <"[[" text="[[" />
                <whitespace text=" " />
                <binary_expression>
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="NO_DNSMASQ" />
                    </simple_expansion>
                    <whitespace text=" " />
                    <test_operator text="-eq" />
                    <whitespace text=" " />
                    <number text="0" />
                </binary_expression>
                <whitespace text=" " />
                <"]]" text="]]" />
            </test_command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n      " />
            <list>
                <command>
                    <command_name>
                        <word text="iptables" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-w" />
                    <whitespace text=" " />
                    <word text="-I" />
                    <whitespace text=" " />
                    <word text="INPUT" />
                    <whitespace text=" " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <word text="udp" />
                    <whitespace text=" " />
                    <word text="-m" />
                    <whitespace text=" " />
                    <word text="udp" />
                    <whitespace text=" " />
                    <word text="--dport" />
                    <whitespace text=" " />
                    <number text="67" />
                    <whitespace text=" " />
                    <word text="-j" />
                    <whitespace text=" " />
                    <word text="ACCEPT" />
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n\n\n      " />
            <comment text="# apparmor does not allow dnsmasq to read files." />
            <whitespace text="\n      " />
            <comment text="# remove restriction." />
            <whitespace text="\n\n      " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <variable_assignment>
                    <variable_name text="COMPLAIN_CMD" />
                    <"=" text="=" />
                    <command_substitution>
                        <"$(" text="$(" />
                        <list>
                            <command>
                                <command_name>
                                    <word text="command" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-v" />
                                <whitespace text=" " />
                                <word text="complain" />
                            </command>
                            <whitespace text=" " />
                            <"||" text="||" />
                            <whitespace text=" " />
                            <command>
                                <command_name>
                                    <word text="command" />
                                </command_name>
                                <whitespace text=" " />
                                <word text="-v" />
                                <whitespace text=" " />
                                <word text="aa-complain" />
                            </command>
                        </list>
                        <")" text=")" />
                    </command_substitution>
                </variable_assignment>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n        " />
                <command>
                    <command_name>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="COMPLAIN_CMD" />
                        </simple_expansion>
                    </command_name>
                    <whitespace text=" " />
                    <word text="dnsmasq" />
                </command>
                <whitespace text="\n      " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n\n      " />
            <command>
                <command_name>
                    <word text="umask" />
                </command_name>
                <whitespace text=" " />
                <number text="0033" />
            </command>
            <whitespace text="\n      " />
            <list>
                <command>
                    <command_name>
                        <word text="dnsmasq" />
                    </command_name>
                    <whitespace text=" " />
                    <word text="-C" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/dnsmasq.conf" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-x" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/dnsmasq.pid" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-l" />
                    <whitespace text=" " />
                    <concatenation>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="CONFDIR" />
                        </simple_expansion>
                        <word text="/dnsmasq.leases" />
                    </concatenation>
                    <whitespace text=" " />
                    <word text="-p" />
                    <whitespace text=" " />
                    <simple_expansion>
                        <"$" text="$" />
                        <variable_name text="DNS_PORT" />
                    </simple_expansion>
                </command>
                <whitespace text=" " />
                <"||" text="||" />
                <whitespace text=" " />
                <command>
                    <command_name>
                        <word text="die" />
                    </command_name>
                </command>
            </list>
            <whitespace text="\n      " />
            <command>
                <command_name>
                    <word text="umask" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="SCRIPT_UMASK" />
                </simple_expansion>
            </command>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# start access point" />
    <whitespace text="\n" />
    <command>
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="hostapd command-line interface: hostapd_cli -p " />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="CONFDIR" />
            </simple_expansion>
            <string_content text="/hostapd_ctrl" />
            <"\"" text="\"" />
        </string>
    </command>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[[" text="[[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="NO_HAVEGED" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="0" />
            </binary_expression>
            <whitespace text=" " />
            <"]]" text="]]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="haveged_watchdog" />
            </command_name>
        </command>
        <whitespace text=" " />
        <"&" text="&" />
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="HAVEGED_WATCHDOG_PID" />
            <"=" text="=" />
            <simple_expansion>
                <"$" text="$" />
                <special_variable_name text="!" />
            </simple_expansion>
        </variable_assignment>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <comment text="# start hostapd (use stdbuf when available for no delayed output in programs that redirect stdout)" />
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="STDBUF_PATH" />
        <"=" text="=" />
        <command_substitution>
            <"`" text="`" />
            <command>
                <command_name>
                    <word text="which" />
                </command_name>
                <whitespace text=" " />
                <word text="stdbuf" />
            </command>
            <"`" text="`" />
        </command_substitution>
    </variable_assignment>
    <whitespace text="\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <test_command>
            <"[" text="[" />
            <whitespace text=" " />
            <binary_expression>
                <simple_expansion>
                    <"$" text="$" />
                    <special_variable_name text="?" />
                </simple_expansion>
                <whitespace text=" " />
                <test_operator text="-eq" />
                <whitespace text=" " />
                <number text="0" />
            </binary_expression>
            <whitespace text=" " />
            <"]" text="]" />
        </test_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <variable_assignment>
            <variable_name text="STDBUF_PATH" />
            <"=" text="=" />
            <concatenation>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="STDBUF_PATH" />
                </simple_expansion>
                <string>
                    <"\"" text="\"" />
                    <string_content text=" -oL" />
                    <"\"" text="\"" />
                </string>
            </concatenation>
        </variable_assignment>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n" />
    <command>
        <command_name>
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="STDBUF_PATH" />
            </simple_expansion>
        </command_name>
        <whitespace text=" " />
        <simple_expansion>
            <"$" text="$" />
            <variable_name text="HOSTAPD" />
        </simple_expansion>
        <whitespace text=" " />
        <simple_expansion>
            <"$" text="$" />
            <variable_name text="HOSTAPD_DEBUG_ARGS" />
        </simple_expansion>
        <whitespace text=" " />
        <concatenation>
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="CONFDIR" />
            </simple_expansion>
            <word text="/hostapd.conf" />
        </concatenation>
    </command>
    <whitespace text=" " />
    <"&" text="&" />
    <whitespace text="\n" />
    <variable_assignment>
        <variable_name text="HOSTAPD_PID" />
        <"=" text="=" />
        <simple_expansion>
            <"$" text="$" />
            <special_variable_name text="!" />
        </simple_expansion>
    </variable_assignment>
    <whitespace text="\n" />
    <redirected_statement>
        <command>
            <command_name>
                <word text="echo" />
            </command_name>
            <whitespace text=" " />
            <simple_expansion>
                <"$" text="$" />
                <variable_name text="HOSTAPD_PID" />
            </simple_expansion>
        </command>
        <whitespace text=" " />
        <file_redirect>
            <">" text=">" />
            <whitespace text=" " />
            <concatenation>
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="CONFDIR" />
                </simple_expansion>
                <word text="/hostapd.pid" />
            </concatenation>
        </file_redirect>
    </redirected_statement>
    <whitespace text="\n\n" />
    <if_statement>
        <if text="if" />
        <whitespace text=" " />
        <negated_command>
            <"!" text="!" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="wait" />
                </command_name>
                <whitespace text=" " />
                <simple_expansion>
                    <"$" text="$" />
                    <variable_name text="HOSTAPD_PID" />
                </simple_expansion>
            </command>
        </negated_command>
        <";" text=";" />
        <whitespace text=" " />
        <then text="then" />
        <whitespace text="\n    " />
        <redirected_statement>
            <command>
                <command_name>
                    <word text="echo" />
                </command_name>
                <whitespace text=" " />
                <word text="-e" />
                <whitespace text=" " />
                <string>
                    <"\"" text="\"" />
                    <string_content text="\\nError: Failed to run hostapd, maybe a program is interfering." />
                    <"\"" text="\"" />
                </string>
            </command>
            <whitespace text=" " />
            <file_redirect>
                <">&" text=">&" />
                <number text="2" />
            </file_redirect>
        </redirected_statement>
        <whitespace text="\n    " />
        <if_statement>
            <if text="if" />
            <whitespace text=" " />
            <command>
                <command_name>
                    <word text="networkmanager_is_running" />
                </command_name>
            </command>
            <";" text=";" />
            <whitespace text=" " />
            <then text="then" />
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="If an error like 'n80211: Could not configure driver mode' was thrown" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="try running the following before starting create_ap:" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n        " />
            <if_statement>
                <if text="if" />
                <whitespace text=" " />
                <test_command>
                    <"[[" text="[[" />
                    <whitespace text=" " />
                    <binary_expression>
                        <simple_expansion>
                            <"$" text="$" />
                            <variable_name text="NM_OLDER_VERSION" />
                        </simple_expansion>
                        <whitespace text=" " />
                        <test_operator text="-eq" />
                        <whitespace text=" " />
                        <number text="1" />
                    </binary_expression>
                    <whitespace text=" " />
                    <"]]" text="]]" />
                </test_command>
                <";" text=";" />
                <whitespace text=" " />
                <then text="then" />
                <whitespace text="\n            " />
                <redirected_statement>
                    <command>
                        <command_name>
                            <word text="echo" />
                        </command_name>
                        <whitespace text=" " />
                        <string>
                            <"\"" text="\"" />
                            <string_content text="    nmcli nm wifi off" />
                            <"\"" text="\"" />
                        </string>
                    </command>
                    <whitespace text=" " />
                    <file_redirect>
                        <">&" text=">&" />
                        <number text="2" />
                    </file_redirect>
                </redirected_statement>
                <whitespace text="\n        " />
                <else_clause>
                    <else text="else" />
                    <whitespace text="\n            " />
                    <redirected_statement>
                        <command>
                            <command_name>
                                <word text="echo" />
                            </command_name>
                            <whitespace text=" " />
                            <string>
                                <"\"" text="\"" />
                                <string_content text="    nmcli r wifi off" />
                                <"\"" text="\"" />
                            </string>
                        </command>
                        <whitespace text=" " />
                        <file_redirect>
                            <">&" text=">&" />
                            <number text="2" />
                        </file_redirect>
                    </redirected_statement>
                    <whitespace text="\n" />
                </else_clause>
                <whitespace text="        " />
                <fi text="fi" />
            </if_statement>
            <whitespace text="\n        " />
            <redirected_statement>
                <command>
                    <command_name>
                        <word text="echo" />
                    </command_name>
                    <whitespace text=" " />
                    <string>
                        <"\"" text="\"" />
                        <string_content text="    rfkill unblock wlan" />
                        <"\"" text="\"" />
                    </string>
                </command>
                <whitespace text=" " />
                <file_redirect>
                    <">&" text=">&" />
                    <number text="2" />
                </file_redirect>
            </redirected_statement>
            <whitespace text="\n    " />
            <fi text="fi" />
        </if_statement>
        <whitespace text="\n    " />
        <command>
            <command_name>
                <word text="die" />
            </command_name>
        </command>
        <whitespace text="\n" />
        <fi text="fi" />
    </if_statement>
    <whitespace text="\n\n" />
    <command>
        <command_name>
            <word text="clean_exit" />
        </command_name>
    </command>
    <whitespace text="\n\n" />
    <comment text="# Local Variables:" />
    <whitespace text="\n" />
    <comment text="# tab-width: 4" />
    <whitespace text="\n" />
    <comment text="# indent-tabs-mode: nil" />
    <whitespace text="\n" />
    <comment text="# End:" />
    <whitespace text="\n\n" />
    <comment text="# vim: et sts=4 sw=4" />
    <whitespace text="\n\n\n" />
    <command>
        <variable_assignment>
            <variable_name text="HOME" />
            <"=" text="=" />
            <string>
                <"\"" text="\"" />
                <string_content text="./other" />
                <"\"" text="\"" />
            </string>
        </variable_assignment>
        <whitespace text=" " />
        <command_name>
            <word text="echo" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="hi" />
            <"\"" text="\"" />
        </string>
    </command>
    <";" text=";" />
    <whitespace text=" " />
    <command>
        <command_name>
            <word text="something" />
        </command_name>
        <whitespace text=" " />
        <string>
            <"\"" text="\"" />
            <string_content text="else" />
            <"\"" text="\"" />
        </string>
    </command>
</program>
